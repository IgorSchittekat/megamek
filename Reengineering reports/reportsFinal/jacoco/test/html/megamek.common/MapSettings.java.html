<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapSettings.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.common</a> &gt; <span class="el_source">MapSettings.java</span></div><h1>MapSettings.java</h1><pre class="source lang-java linenums">/*
 * MegaMek - Copyright (C) 2002,2003 Ben Mazur (bmazur@sev.org)
 *
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License as published by the Free
 *  Software Foundation; either version 2 of the License, or (at your option)
 *  any later version.
 *
 *  This program is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
 *  for more details.
 */

package megamek.common;

import java.io.File;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Iterator;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.PropertyException;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.namespace.QName;
import megamek.MegaMek;
import megamek.common.util.BuildingTemplate;
import megamek.utils.MegaMekXmlUtil;

/**
 * MapSettings.java Created on March 27, 2002, 1:07 PM
 *
 * @author Ben
 */
@XmlRootElement(name = &quot;ENVIRONMENT&quot;)
@XmlAccessorType(XmlAccessType.NONE)
public class MapSettings implements Serializable {
    private static final long serialVersionUID = -6163977970758303066L;

    public static final String BOARD_RANDOM = &quot;[RANDOM]&quot;;
    public static final String BOARD_SURPRISE = &quot;[SURPRISE]&quot;;
    public static final String BOARD_GENERATED = &quot;[GENERATED]&quot;;

    public static final int MOUNTAIN_PLAIN = 0;
    public static final int MOUNTAIN_VOLCANO_EXTINCT = 1;
    public static final int MOUNTAIN_VOLCANO_DORMANT = 2;
    public static final int MOUNTAIN_VOLCANO_ACTIVE = 3;
    public static final int MOUNTAIN_SNOWCAPPED = 4;
    public static final int MOUNTAIN_LAKE = 5;

    public static final int MEDIUM_GROUND = 0;
    public static final int MEDIUM_ATMOSPHERE = 1;
    public static final int MEDIUM_SPACE = 2;

<span class="fc" id="L63">    private static final String[] mediumNames = { &quot;Ground&quot;, &quot;Atmosphere&quot;, &quot;Space&quot; };</span>

<span class="pc" id="L65">    @XmlElement(name = &quot;WIDTH&quot;)</span>
    private int boardWidth = 16;
<span class="pc" id="L67">    @XmlElement(name = &quot;HEIGHT&quot;)</span>
    private int boardHeight = 17;
<span class="pc" id="L69">    private int mapWidth = 1;</span>
<span class="pc" id="L70">    private int mapHeight = 1;</span>
<span class="pc" id="L71">    private int medium = MEDIUM_GROUND;</span>

<span class="pc" id="L73">    private ArrayList&lt;String&gt; boardsSelected = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L74">    private ArrayList&lt;String&gt; boardsAvailable = new ArrayList&lt;String&gt;();</span>
<span class="pc" id="L75">    private ArrayList&lt;BuildingTemplate&gt; boardBuildings = new ArrayList&lt;BuildingTemplate&gt;();</span>

    /**
     * Parameters for the Map Generator Parameters refer to a default map siz 16
     * x 17, with other size some of the parameters get linear transformed to
     * give good result for new size
     */

    /** how much hills there should be, Range 0..99 */
<span class="pc" id="L84">    @XmlElement(name = &quot;HILLYNESS&quot;)</span>
    private int hilliness = 40;
    /**
     * how much cliffs should there be, range 0-100 (% chance for each cliff
     * candidate)
     */
<span class="pc" id="L90">    @XmlElement(name = &quot;CLIFFS&quot;)</span>
    private int cliffs = 0;
    /** Maximum difference between highest elevation and lowest sink */
<span class="pc" id="L93">    @XmlElement(name = &quot;HILLELEVATIONRANGE&quot;)</span>
    private int range = 5;
    /** Probabiltity for invertion of the map, Range 0..100 */
<span class="pc" id="L96">    @XmlElement(name = &quot;HILLINVERTPROB&quot;)</span>
    private int probInvert = 5;

    /** how much Lakes at least */
<span class="pc" id="L100">    @XmlElement(name = &quot;WATERMINSPOTS&quot;)</span>
    private int minWaterSpots = 1;
    /** how much Lakes at most */
<span class="pc" id="L103">    @XmlElement(name = &quot;WATERMAXSPOTS&quot;)</span>
    private int maxWaterSpots = 3;
    /** minimum size of a lake */
<span class="pc" id="L106">    @XmlElement(name = &quot;WATERMINHEXES&quot;)</span>
    private int minWaterSize = 5;
    /** maximum Size of a lake */
<span class="pc" id="L109">    @XmlElement(name = &quot;WATERMAXHEXES&quot;)</span>
    private int maxWaterSize = 10;
    /** probability for water deeper than lvl1, Range 0..100 */
<span class="pc" id="L112">    @XmlElement(name = &quot;WATERDEEPPROB&quot;)</span>
    private int probDeep = 33;

    /** how much forests at least */
<span class="pc" id="L116">    @XmlElement(name = &quot;FORESTMINSPOTS&quot;)</span>
    private int minForestSpots = 3;
    /** how much forests at most */
<span class="pc" id="L119">    @XmlElement(name = &quot;FORESTMAXSPOTS&quot;)</span>
    private int maxForestSpots = 8;
    /** minimum size of a forest */
<span class="pc" id="L122">    @XmlElement(name = &quot;FORESTMINHEXES&quot;)</span>
    private int minForestSize = 4;
    /** maximum Size of a forest */
<span class="pc" id="L125">    @XmlElement(name = &quot;FORESTMAXHEXES&quot;)</span>
    private int maxForestSize = 12;
    /** probability for heavy woods, Range 0..100 */
<span class="pc" id="L128">    @XmlElement(name = &quot;FORESTHEAVYPROB&quot;)</span>
    private int probHeavy = 30;
    
    /** how much foliage at least */
<span class="pc" id="L132">    @XmlElement(name = &quot;FOLIAGEMINSPOTS&quot;)</span>
    private int minFoliageSpots = 0;
    /** how much foliage at most */
<span class="pc" id="L135">    @XmlElement(name = &quot;FOLIAGEMAXSPOTS&quot;)</span>
    private int maxFoliageSpots = 0;
    /** minimum size of a forest */
<span class="pc" id="L138">    @XmlElement(name = &quot;FOLIAGEMINHEXES&quot;)</span>
    private int minFoliageSize = 0;
    /** maximum Size of a forest */
<span class="pc" id="L141">    @XmlElement(name = &quot;FOLIAGEMAXHEXES&quot;)</span>
    private int maxFoliageSize = 0;
    /** probability for heavy foliage, Range 0..100 */
<span class="pc" id="L144">    @XmlElement(name = &quot;FOLIAGEHEAVYPROB&quot;)</span>
    private int probFoliageHeavy = 0;

    /** how much rough spots at least */
<span class="pc" id="L148">    @XmlElement(name = &quot;ROUGHMINSPOTS&quot;)</span>
    private int minRoughSpots = 2;
    /** how much rough spots at most */
<span class="pc" id="L151">    @XmlElement(name = &quot;ROUGHMAXSPOTS&quot;)</span>
    private int maxRoughSpots = 10;
    /** minimum size of a rough spot */
<span class="pc" id="L154">    @XmlElement(name = &quot;ROUGHMINHEXES&quot;)</span>
    private int minRoughSize = 1;
    /** maximum Size of a rough spot */
<span class="pc" id="L157">    @XmlElement(name = &quot;ROUGHMAXHEXES&quot;)</span>
    private int maxRoughSize = 2;

    /** how much sand spots at least */
<span class="pc" id="L161">    @XmlElement(name = &quot;SANDMINSPOTS&quot;)</span>
    private int minSandSpots = 2;
    /** how much sand spots at most */
<span class="pc" id="L164">    @XmlElement(name = &quot;SANDMAXSPOTS&quot;)</span>
    private int maxSandSpots = 10;
    /** minimum size of a rough spot */
<span class="pc" id="L167">    @XmlElement(name = &quot;SANDMINHEXES&quot;)</span>
    private int minSandSize = 1;
    /** maximum Size of a rough spot */
<span class="pc" id="L170">    @XmlElement(name = &quot;SANDMAXHEXES&quot;)</span>
    private int maxSandSize = 2;

    /** how much planted field spots at least */
<span class="pc" id="L174">    @XmlElement(name = &quot;PLANTEDFIELDMINSPOTS&quot;)</span>
    private int minPlantedFieldSpots = 2;
    /** how much planted field spots at most */
<span class="pc" id="L177">    @XmlElement(name = &quot;PLANTEDFIELDMAXSPOTS&quot;)</span>
    private int maxPlantedFieldSpots = 10;
    /** minimum size of a planted field spot */
<span class="pc" id="L180">    @XmlElement(name = &quot;PLANTEDFIELDMINHEXES&quot;)</span>
    private int minPlantedFieldSize = 1;
    /** maximum size of a planted field spot */
<span class="pc" id="L183">    @XmlElement(name = &quot;PLANTEDFIELDMAXHEXES&quot;)</span>
    private int maxPlantedFieldSize = 2;

    /** how much swamp spots at least */
<span class="pc" id="L187">    @XmlElement(name = &quot;SWAMPMINSPOTS&quot;)</span>
    private int minSwampSpots = 2;
    /** how much swamp spots at most */
<span class="pc" id="L190">    @XmlElement(name = &quot;SWAMPMAXSPOTS&quot;)</span>
    private int maxSwampSpots = 10;
    /** minimum size of a swamp spot */
<span class="pc" id="L193">    @XmlElement(name = &quot;SWAMPMINHEXES&quot;)</span>
    private int minSwampSize = 1;
    /** maximum Size of a swamp spot */
<span class="pc" id="L196">    @XmlElement(name = &quot;SWAMPMAXHEXES&quot;)</span>
    private int maxSwampSize = 2;

    /** how much pavement spots at least */
<span class="pc" id="L200">    @XmlElement(name = &quot;PAVEMENTMINSPOTS&quot;)</span>
    private int minPavementSpots = 0;
    /** how much pavement spots at most */
<span class="pc" id="L203">    @XmlElement(name = &quot;PAVEMENTMAXSPOTS&quot;)</span>
    private int maxPavementSpots = 0;
    /** minimum size of a pavement spot */
<span class="pc" id="L206">    @XmlElement(name = &quot;PAVEMENTMINHEXES&quot;)</span>
    private int minPavementSize = 1;
    /** maximum Size of a pavement spot */
<span class="pc" id="L209">    @XmlElement(name = &quot;PAVEMENTMAXHEXES&quot;)</span>
    private int maxPavementSize = 6;

    /** how much rubble spots at least */
<span class="pc" id="L213">    @XmlElement(name = &quot;RUBBLEMINSPOTS&quot;)</span>
    private int minRubbleSpots = 0;
    /** how much rubble spots at most */
<span class="pc" id="L216">    @XmlElement(name = &quot;RUBBLEMAXSPOTS&quot;)</span>
    private int maxRubbleSpots = 0;
    /** minimum size of a rubble spot */
<span class="pc" id="L219">    @XmlElement(name = &quot;RUBBLEMINHEXES&quot;)</span>
    private int minRubbleSize = 1;
    /** maximum Size of a rubble spot */
<span class="pc" id="L222">    @XmlElement(name = &quot;RUBBLEMAXHEXES&quot;)</span>
    private int maxRubbleSize = 6;

    /** how much fortified spots at least */
<span class="pc" id="L226">    @XmlElement(name = &quot;FORTIFIEDMINSPOTS&quot;)</span>
    private int minFortifiedSpots = 0;
    /** how much fortified spots at most */
<span class="pc" id="L229">    @XmlElement(name = &quot;FORTIFIEDMAXSPOTS&quot;)</span>
    private int maxFortifiedSpots = 0;
    /** minimum size of a fortified spot */
<span class="pc" id="L232">    @XmlElement(name = &quot;FORTIFIEDMINHEXES&quot;)</span>
    private int minFortifiedSize = 1;
    /** maximum Size of a fortified spot */
<span class="pc" id="L235">    @XmlElement(name = &quot;FORTIFIEDMAXHEXES&quot;)</span>
    private int maxFortifiedSize = 2;

    /** how much ice spots at least */
<span class="pc" id="L239">    @XmlElement(name = &quot;ICEMINSPOTS&quot;)</span>
    private int minIceSpots = 0;
    /** how much ice spots at most */
<span class="pc" id="L242">    @XmlElement(name = &quot;ICEMAXSPOTS&quot;)</span>
    private int maxIceSpots = 0;
    /** minimum size of a ice spot */
<span class="pc" id="L245">    @XmlElement(name = &quot;ICEMINHEXES&quot;)</span>
    private int minIceSize = 1;
    /** maximum Size of a ice spot */
<span class="pc" id="L248">    @XmlElement(name = &quot;ICEMAXHEXES&quot;)</span>
    private int maxIceSize = 6;

    /** probability for a road, range 0..100 */
<span class="pc" id="L252">    @XmlElement(name = &quot;ROADPROB&quot;)</span>
    private int probRoad = 0;

    /** probability for a river, range 0..100 */
<span class="pc" id="L256">    @XmlElement(name = &quot;RIVERPROB&quot;)</span>
    private int probRiver = 0;

    /** probabilitay for Crater 0..100 */
<span class="pc" id="L260">    @XmlElement(name = &quot;CRATEPROB&quot;)</span>
    private int probCrater = 0;

    /** minimum Radius of the Craters */
<span class="pc" id="L264">    @XmlElement(name = &quot;CRATERMINRADIUS&quot;)</span>
    private int minRadius = 2;

    /** maximum Radius of the Craters */
<span class="pc" id="L268">    @XmlElement(name = &quot;CRATERMAXRADIUS&quot;)</span>
    private int maxRadius = 7;

    /** maximum Number of Craters on one map */
<span class="pc" id="L272">    @XmlElement(name = &quot;CRATERMAXNUM&quot;)</span>
    private int maxCraters = 2;

    /** minimum Number of Craters on one map */
<span class="pc" id="L276">    @XmlElement(name = &quot;CRATERMINNUM&quot;)</span>
    private int minCraters = 1;

    /** which landscape generation Algortihm to use */
    /* atm there are 2 different: 0= first, 1=second */
<span class="pc" id="L281">    @XmlElement(name = &quot;ALGORITHM&quot;)</span>
    private int algorithmToUse = 0;

    /** a tileset theme to apply */
<span class="pc" id="L285">    @XmlElement(name = &quot;THEME&quot;)</span>
    private String theme = &quot;&quot;;

    /** probability of flooded map */
<span class="pc" id="L289">    @XmlElement(name = &quot;PROBFLOOD&quot;)</span>
    private int probFlood = 0;
    /** probability of forest fire */
<span class="pc" id="L292">    @XmlElement(name = &quot;PROBFORESTFIRE&quot;)</span>
    private int probForestFire = 0;
    /** probability of frozen map */
<span class="pc" id="L295">    @XmlElement(name = &quot;PROBFREEZE&quot;)</span>
    private int probFreeze = 0;
    /** probability of drought */
<span class="pc" id="L298">    @XmlElement(name = &quot;PROBDROUGHT&quot;)</span>
    private int probDrought = 0;
    /** special FX modifier */
<span class="pc" id="L301">    @XmlElement(name = &quot;FXMOD&quot;)</span>
    private int fxMod = 0;

    /** Parameters for the city generator */
<span class="pc" id="L305">    @XmlElement(name = &quot;CITYBLOCKS&quot;)</span>
    private int cityBlocks = 16;
<span class="pc" id="L307">    @XmlElement(name = &quot;CITYTYPE&quot;)</span>
    private String cityType = &quot;NONE&quot;;
<span class="pc" id="L309">    @XmlElement(name = &quot;MINCF&quot;)</span>
    private int cityMinCF = 10;
<span class="pc" id="L311">    @XmlElement(name = &quot;MAXCF&quot;)</span>
    private int cityMaxCF = 100;
<span class="pc" id="L313">    @XmlElement(name = &quot;MINFLOORS&quot;)</span>
    private int cityMinFloors = 1;
<span class="pc" id="L315">    @XmlElement(name = &quot;MAXFLOORS&quot;)</span>
    private int cityMaxFloors = 6;
<span class="pc" id="L317">    @XmlElement(name = &quot;CITYDENSITY&quot;)</span>
    private int cityDensity = 75;
<span class="pc" id="L319">    @XmlElement(name = &quot;TOWNSIZE&quot;)</span>
    private int townSize = 60;

<span class="pc" id="L322">    @XmlElement(name = &quot;INVERTNEGATIVETERRAIN&quot;)</span>
    private int invertNegativeTerrain = 0;

<span class="pc" id="L325">    @XmlElement(name = &quot;MOUNTPEAKS&quot;)</span>
    private int mountainPeaks = 0;
<span class="pc" id="L327">    @XmlElement(name = &quot;MOUNTWIDTHMIN&quot;)</span>
    private int mountainWidthMin = 7;
<span class="pc" id="L329">    @XmlElement(name = &quot;MOUNTWIDTHMAX&quot;)</span>
    private int mountainWidthMax = 20;
<span class="pc" id="L331">    @XmlElement(name = &quot;MOUNTHEIGHTMIN&quot;)</span>
    private int mountainHeightMin = 5;
<span class="pc" id="L333">    @XmlElement(name = &quot;MOUNTHEIGHTMAX&quot;)</span>
    private int mountainHeightMax = 8;
<span class="pc" id="L335">    @XmlElement(name = &quot;MOUNTSTYLE&quot;)</span>
    private int mountainStyle = MOUNTAIN_PLAIN;

    /** end Map Generator Parameters */

    /**
     * Creates and returns a new default instance of MapSettings.
     * 
     * @return a MapSettings with default settings values
     */
    public static MapSettings getInstance() {
<span class="fc" id="L346">        return new MapSettings();</span>
    }

    /**
     * Creates and returns a clone of the given MapSettings.
     *
     * @param other
     *            the MapSettings to clone
     * @return a MapSettings with the cloned settings values
     */
    public static MapSettings getInstance(final MapSettings other) {
<span class="nc" id="L357">        return new MapSettings(other);</span>
    }

    /**
     * Creates and returns a new instance of MapSettings with default values
     * loaded from the given input stream.
     * 
     * @param is
     *            the input stream that contains an XML representation of the
     *            map settings
     * @return a MapSettings with the values from XML
     */
    public static MapSettings getInstance(final InputStream is) {
<span class="fc" id="L370">        MapSettings ms = null;</span>

        try {
<span class="fc" id="L373">            JAXBContext jc = JAXBContext.newInstance(MapSettings.class);</span>

<span class="fc" id="L375">            Unmarshaller um = jc.createUnmarshaller();</span>
<span class="fc" id="L376">            ms = (MapSettings) um.unmarshal(MegaMekXmlUtil.createSafeXmlSource(is));</span>
<span class="nc" id="L377">        } catch (Exception e) {</span>
<span class="nc" id="L378">            MegaMek.getLogger().error(&quot;Error loading XML for map settings: &quot; + e.getMessage(), e);</span>
<span class="fc" id="L379">        }</span>

<span class="fc" id="L381">        return ms;</span>
    }

    /** Creates new MapSettings */
    private MapSettings() {
<span class="fc" id="L386">        this(megamek.common.preference.PreferenceManager.getClientPreferences().getBoardWidth(),</span>
<span class="fc" id="L387">                megamek.common.preference.PreferenceManager.getClientPreferences().getBoardHeight(),</span>
<span class="fc" id="L388">                megamek.common.preference.PreferenceManager.getClientPreferences().getMapWidth(),</span>
<span class="fc" id="L389">                megamek.common.preference.PreferenceManager.getClientPreferences().getMapHeight());</span>
<span class="fc" id="L390">    }</span>

    /** Create new MapSettings with all size settings specified */
<span class="fc" id="L393">    private MapSettings(int boardWidth, int boardHeight, int mapWidth, int mapHeight) {</span>
<span class="fc" id="L394">        setBoardSize(boardWidth, boardHeight);</span>
<span class="fc" id="L395">        setMapSize(mapWidth, mapHeight);</span>
<span class="fc" id="L396">    }</span>

    /** Creates new MapSettings that is a duplicate of another */
    @SuppressWarnings(&quot;unchecked&quot;)
<span class="nc" id="L400">    private MapSettings(MapSettings other) {</span>
<span class="nc" id="L401">        boardWidth = other.getBoardWidth();</span>
<span class="nc" id="L402">        boardHeight = other.getBoardHeight();</span>
<span class="nc" id="L403">        mapWidth = other.getMapWidth();</span>
<span class="nc" id="L404">        mapHeight = other.getMapHeight();</span>

<span class="nc" id="L406">        medium = other.getMedium();</span>

<span class="nc" id="L408">        boardsSelected = (ArrayList&lt;String&gt;) other.getBoardsSelectedVector().clone();</span>
<span class="nc" id="L409">        boardsAvailable = (ArrayList&lt;String&gt;) other.getBoardsAvailableVector().clone();</span>

<span class="nc" id="L411">        invertNegativeTerrain = other.getInvertNegativeTerrain();</span>
<span class="nc" id="L412">        mountainHeightMin = other.getMountainHeightMin();</span>
<span class="nc" id="L413">        mountainHeightMax = other.getMountainHeightMax();</span>
<span class="nc" id="L414">        mountainPeaks = other.getMountainPeaks();</span>
<span class="nc" id="L415">        mountainStyle = other.getMountainStyle();</span>
<span class="nc" id="L416">        mountainWidthMin = other.getMountainWidthMin();</span>
<span class="nc" id="L417">        mountainWidthMax = other.getMountainWidthMax();</span>
<span class="nc" id="L418">        hilliness = other.getHilliness();</span>
<span class="nc" id="L419">        cliffs = other.getCliffs();</span>
<span class="nc" id="L420">        range = other.getRange();</span>
<span class="nc" id="L421">        probInvert = other.getProbInvert();</span>
<span class="nc" id="L422">        minWaterSpots = other.getMinWaterSpots();</span>
<span class="nc" id="L423">        maxWaterSpots = other.getMaxWaterSpots();</span>
<span class="nc" id="L424">        minWaterSize = other.getMinWaterSize();</span>
<span class="nc" id="L425">        maxWaterSize = other.getMaxWaterSize();</span>
<span class="nc" id="L426">        probDeep = other.getProbDeep();</span>
<span class="nc" id="L427">        minForestSpots = other.getMinForestSpots();</span>
<span class="nc" id="L428">        maxForestSpots = other.getMaxForestSpots();</span>
<span class="nc" id="L429">        minForestSize = other.getMinForestSize();</span>
<span class="nc" id="L430">        maxForestSize = other.getMaxForestSize();</span>
<span class="nc" id="L431">        probHeavy = other.getProbHeavy();</span>
<span class="nc" id="L432">        minFoliageSpots = other.getMinFoliageSpots();</span>
<span class="nc" id="L433">        maxFoliageSpots = other.getMaxFoliageSpots();</span>
<span class="nc" id="L434">        minFoliageSize = other.getMinFoliageSize();</span>
<span class="nc" id="L435">        maxFoliageSize = other.getMaxFoliageSize();</span>
<span class="nc" id="L436">        probFoliageHeavy = other.getProbFoliageHeavy();</span>
<span class="nc" id="L437">        minRoughSpots = other.getMinRoughSpots();</span>
<span class="nc" id="L438">        maxRoughSpots = other.getMaxRoughSpots();</span>
<span class="nc" id="L439">        minRoughSize = other.getMinRoughSize();</span>
<span class="nc" id="L440">        maxRoughSize = other.getMaxRoughSize();</span>
<span class="nc" id="L441">        minSandSpots = other.getMinSandSpots();</span>
<span class="nc" id="L442">        maxSandSpots = other.getMaxSandSpots();</span>
<span class="nc" id="L443">        minSandSize = other.getMinSandSize();</span>
<span class="nc" id="L444">        maxSandSize = other.getMaxSandSize();</span>
<span class="nc" id="L445">        minPlantedFieldSpots = other.getMinPlantedFieldSpots();</span>
<span class="nc" id="L446">        maxPlantedFieldSpots = other.getMaxPlantedFieldSpots();</span>
<span class="nc" id="L447">        minPlantedFieldSize = other.getMinPlantedFieldSize();</span>
<span class="nc" id="L448">        maxPlantedFieldSize = other.getMaxPlantedFieldSize();</span>
<span class="nc" id="L449">        minSwampSpots = other.getMinSwampSpots();</span>
<span class="nc" id="L450">        maxSwampSpots = other.getMaxSwampSpots();</span>
<span class="nc" id="L451">        minSwampSize = other.getMinSwampSize();</span>
<span class="nc" id="L452">        maxSwampSize = other.getMaxSwampSize();</span>
<span class="nc" id="L453">        minPavementSpots = other.getMinPavementSpots();</span>
<span class="nc" id="L454">        maxPavementSpots = other.getMaxPavementSpots();</span>
<span class="nc" id="L455">        minPavementSize = other.getMinPavementSize();</span>
<span class="nc" id="L456">        maxPavementSize = other.getMaxPavementSize();</span>
<span class="nc" id="L457">        minRubbleSpots = other.getMinRubbleSpots();</span>
<span class="nc" id="L458">        maxRubbleSpots = other.getMaxRubbleSpots();</span>
<span class="nc" id="L459">        minRubbleSize = other.getMinRubbleSize();</span>
<span class="nc" id="L460">        maxRubbleSize = other.getMaxRubbleSize();</span>
<span class="nc" id="L461">        minFortifiedSpots = other.getMinFortifiedSpots();</span>
<span class="nc" id="L462">        maxFortifiedSpots = other.getMaxFortifiedSpots();</span>
<span class="nc" id="L463">        minFortifiedSize = other.getMinFortifiedSize();</span>
<span class="nc" id="L464">        maxFortifiedSize = other.getMaxFortifiedSize();</span>
<span class="nc" id="L465">        minIceSpots = other.getMinIceSpots();</span>
<span class="nc" id="L466">        maxIceSpots = other.getMaxIceSpots();</span>
<span class="nc" id="L467">        minIceSize = other.getMinIceSize();</span>
<span class="nc" id="L468">        maxIceSize = other.getMaxIceSize();</span>
<span class="nc" id="L469">        probRoad = other.getProbRoad();</span>
<span class="nc" id="L470">        probRiver = other.getProbRiver();</span>
<span class="nc" id="L471">        probCrater = other.getProbCrater();</span>
<span class="nc" id="L472">        minRadius = other.getMinRadius();</span>
<span class="nc" id="L473">        maxRadius = other.getMaxRadius();</span>
<span class="nc" id="L474">        minCraters = other.getMinCraters();</span>
<span class="nc" id="L475">        maxCraters = other.getMaxCraters();</span>
<span class="nc" id="L476">        algorithmToUse = other.getAlgorithmToUse();</span>
<span class="nc" id="L477">        theme = other.getTheme();</span>
<span class="nc" id="L478">        probFlood = other.getProbFlood();</span>
<span class="nc" id="L479">        probForestFire = other.getProbForestFire();</span>
<span class="nc" id="L480">        probFreeze = other.getProbFreeze();</span>
<span class="nc" id="L481">        probDrought = other.getProbDrought();</span>
<span class="nc" id="L482">        fxMod = other.getFxMod();</span>
<span class="nc" id="L483">        cityBlocks = other.getCityBlocks();</span>
<span class="nc" id="L484">        cityType = other.getCityType();</span>
<span class="nc" id="L485">        cityMinCF = other.getCityMinCF();</span>
<span class="nc" id="L486">        cityMaxCF = other.getCityMaxCF();</span>
<span class="nc" id="L487">        cityMinFloors = other.getCityMinFloors();</span>
<span class="nc" id="L488">        cityMaxFloors = other.getCityMaxFloors();</span>
<span class="nc" id="L489">        cityDensity = other.getCityDensity();</span>
<span class="nc" id="L490">        boardBuildings = other.getBoardBuildings();</span>
<span class="nc" id="L491">        townSize = other.getTownSize();</span>
<span class="nc" id="L492">    }</span>

    /**
     * Odious hack to fix cross-platform issues. The Server generates the list
     * of available boards and then sends them to the client. Instead of storing
     * the boards as a File object, they are stored as lists of Strings. This
     * means that, a Windows server will generate Windows paths that could then
     * be sent to non-windows machines.
     * 
     * While the available and selected boards should really be stored as lists
     * of Files, they have infrastructure built up around them and it's far
     * easier to use this kludgy hack.
     */
    public void adjustPathSeparator() {
        // Windows will happily accept a forward slash in the path, the only
        // real issue is back-slashes (windows separators) in Linux
<span class="nc" id="L508">        boolean isWindows = System.getProperty(&quot;os.name&quot;).contains(&quot;Windows&quot;);</span>
<span class="nc" id="L509">        boolean containsWindowsPathSeparator = false;</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">        for (String path : boardsAvailable) {</span>
<span class="nc bnc" id="L511" title="All 2 branches missed.">            if (path.contains(&quot;\\&quot;)) {</span>
<span class="nc" id="L512">                containsWindowsPathSeparator = true;</span>
            }
<span class="nc bnc" id="L514" title="All 2 branches missed.">            if (containsWindowsPathSeparator) {</span>
<span class="nc" id="L515">                break;</span>
            }
<span class="nc" id="L517">        }</span>

<span class="nc bnc" id="L519" title="All 4 branches missed.">        if (!isWindows &amp;&amp; containsWindowsPathSeparator) {</span>
<span class="nc bnc" id="L520" title="All 2 branches missed.">            for (int i = 0; i &lt; boardsAvailable.size(); i++) {</span>
<span class="nc bnc" id="L521" title="All 2 branches missed.">                if (boardsAvailable.get(i) == null) {</span>
<span class="nc" id="L522">                    continue;</span>
                }
<span class="nc" id="L524">                boardsAvailable.set(i, boardsAvailable.get(i).replace(&quot;\\&quot;, &quot;/&quot;));</span>
            }
<span class="nc bnc" id="L526" title="All 2 branches missed.">            for (int i = 0; i &lt; boardsSelected.size(); i++) {</span>
<span class="nc bnc" id="L527" title="All 2 branches missed.">                if (boardsSelected.get(i) == null) {</span>
<span class="nc" id="L528">                    continue;</span>
                }
<span class="nc" id="L530">                boardsSelected.set(i, boardsSelected.get(i).replace(&quot;\\&quot;, &quot;/&quot;));</span>
            }
        }
<span class="nc" id="L533">    }</span>

    public int getBoardWidth() {
<span class="fc" id="L536">        return boardWidth;</span>
    }

    public int getBoardHeight() {
<span class="fc" id="L540">        return boardHeight;</span>
    }

    public void setBoardSize(int boardWidth, int boardHeight) {
<span class="pc bpc" id="L544" title="2 of 4 branches missed.">        if ((boardWidth &lt;= 0) || (boardHeight &lt;= 0)) {</span>
<span class="nc" id="L545">            throw new IllegalArgumentException(&quot;Total board area must be positive&quot;);</span>
        }

        // change only if actually different
<span class="pc bpc" id="L549" title="1 of 4 branches missed.">        if ((this.boardWidth != boardWidth) || (this.boardHeight != boardHeight)) {</span>
<span class="fc" id="L550">            this.boardWidth = boardWidth;</span>
<span class="fc" id="L551">            this.boardHeight = boardHeight;</span>

<span class="fc" id="L553">            boardsAvailable.clear();</span>
        }
<span class="fc" id="L555">    }</span>

    public String getTheme() {
<span class="fc" id="L558">        return theme;</span>
    }

    public void setTheme(String th) {
<span class="nc" id="L562">        theme = th;</span>
<span class="nc" id="L563">    }</span>

    public int getMapWidth() {
<span class="nc" id="L566">        return mapWidth;</span>
    }

    public int getMapHeight() {
<span class="nc" id="L570">        return mapHeight;</span>
    }

    public void setMapSize(int mapWidth, int mapHeight) {
<span class="pc bpc" id="L574" title="2 of 4 branches missed.">        if ((mapWidth &lt;= 0) || (mapHeight &lt;= 0)) {</span>
<span class="nc" id="L575">            throw new IllegalArgumentException(&quot;Total map area must be positive&quot;);</span>
        }
        
        // If the map has become smaller, shrink the list by removing surplus elements
<span class="pc bpc" id="L579" title="1 of 2 branches missed.">        if (mapWidth * mapHeight &lt; boardsSelected.size()) {</span>
<span class="nc" id="L580">            boardsSelected.subList(mapWidth * mapHeight, boardsSelected.size()).clear();</span>
        }

<span class="fc" id="L583">        this.mapWidth = mapWidth;</span>
<span class="fc" id="L584">        this.mapHeight = mapHeight;</span>
        // Create null entries for everything that isn't surprise or generated
<span class="pc bpc" id="L586" title="1 of 2 branches missed.">        for (int i = 0; i &lt; boardsSelected.size(); i++) {</span>
<span class="nc bnc" id="L587" title="All 4 branches missed.">            if ((boardsSelected.get(i) != null) &amp;&amp; !boardsSelected.get(i).equals(BOARD_GENERATED)</span>
<span class="nc bnc" id="L588" title="All 2 branches missed.">                    &amp;&amp; !boardsSelected.get(i).equals(BOARD_SURPRISE)) {</span>
<span class="nc" id="L589">                boardsSelected.set(i, null);</span>
            }
        }
        
        // Fill the list with null elements if the map has grown
<span class="fc bfc" id="L594" title="All 2 branches covered.">        while (boardsSelected.size() &lt; (mapWidth * mapHeight)) {</span>
<span class="fc" id="L595">            boardsSelected.add(null);</span>
        }
<span class="fc" id="L597">    }</span>

    public Iterator&lt;String&gt; getBoardsSelected() {
<span class="nc" id="L600">        return boardsSelected.iterator();</span>
    }

    public ArrayList&lt;String&gt; getBoardsSelectedVector() {
<span class="nc" id="L604">        return boardsSelected;</span>
    }

    public void setBoardsSelectedVector(ArrayList&lt;String&gt; boardsSelected) {
<span class="nc" id="L608">        this.boardsSelected = boardsSelected;</span>
<span class="nc" id="L609">    }</span>

    /**
     * Fills in all nulls in the boards selected list with the specified board
     */
    public void setNullBoards(String board) {
<span class="nc bnc" id="L615" title="All 2 branches missed.">        for (int i = 0; i &lt; boardsSelected.size(); i++) {</span>
<span class="nc bnc" id="L616" title="All 2 branches missed.">            if (boardsSelected.get(i) == null) {</span>
<span class="nc" id="L617">                boardsSelected.set(i, board);</span>
            }
        }
<span class="nc" id="L620">    }</span>

    public ArrayList&lt;BuildingTemplate&gt; getBoardBuildings() {
<span class="nc" id="L623">        return boardBuildings;</span>
    }

    public void setBoardBuildings(ArrayList&lt;BuildingTemplate&gt; buildings) {
<span class="nc" id="L627">        boardBuildings = buildings;</span>
<span class="nc" id="L628">    }</span>

    /**
     * Replaces the specified type of board with random boards
     */
    public void replaceBoardWithRandom(String board) {
<span class="nc bnc" id="L634" title="All 2 branches missed.">        if (board == null) {</span>
<span class="nc" id="L635">            return;</span>
        }
<span class="nc bnc" id="L637" title="All 2 branches missed.">        for (int i = 0; i &lt; boardsSelected.size(); i++) {</span>
<span class="nc bnc" id="L638" title="All 2 branches missed.">            if (board.equals(boardsSelected.get(i))) {</span>
<span class="nc" id="L639">                int rindex = 0;</span>
<span class="nc" id="L640">                boolean nonFound = true;</span>
<span class="nc bnc" id="L641" title="All 2 branches missed.">                while (nonFound) {</span>
                    // if we have no boards, set rindex to 0, so the generated
                    // board
                    // gets selected
                    // Default boards are GENERATED, RANDOM and SUPPRISE
<span class="nc bnc" id="L646" title="All 2 branches missed.">                    if (boardsAvailable.size() &lt; 4) {</span>
<span class="nc" id="L647">                        rindex = 0;</span>
<span class="nc" id="L648">                        nonFound = false;</span>
                    } else {
<span class="nc" id="L650">                        rindex = Compute.randomInt(boardsAvailable.size() - 3) + 3;</span>
                        // validate that the selected map is legal
<span class="nc" id="L652">                        IBoard b = new Board(16, 17);</span>
<span class="nc" id="L653">                        String boardSelected = boardsAvailable.get(rindex);</span>
<span class="nc bnc" id="L654" title="All 2 branches missed.">                        if (!MapSettings.BOARD_GENERATED.equals(boardSelected)</span>
<span class="nc bnc" id="L655" title="All 2 branches missed.">                                &amp;&amp; !MapSettings.BOARD_RANDOM.equals(boardSelected)</span>
<span class="nc bnc" id="L656" title="All 2 branches missed.">                                &amp;&amp; !MapSettings.BOARD_SURPRISE.equals(boardSelected)) {</span>
<span class="nc" id="L657">                            b.load(new File(Configuration.boardsDir(), boardSelected + &quot;.board&quot;));</span>
<span class="nc bnc" id="L658" title="All 2 branches missed.">                            if (b.isValid()) {</span>
<span class="nc" id="L659">                                nonFound = false;</span>
                            } else {
<span class="nc" id="L661">                                boardsAvailable.remove(rindex);</span>
                            }
                        }
<span class="nc" id="L664">                    }</span>
                }
                // Do a one pi rotation half of the time.
<span class="nc bnc" id="L667" title="All 2 branches missed.">                if (0 == Compute.randomInt(2)) {</span>
<span class="nc" id="L668">                    boardsSelected.set(i, Board.BOARD_REQUEST_ROTATION + boardsAvailable.get(rindex));</span>
                } else {
<span class="nc" id="L670">                    boardsSelected.set(i, boardsAvailable.get(rindex));</span>
                }
            }
        }
<span class="nc" id="L674">    }</span>

    /**
     * Removes selected boards that aren't listed in the available boards
     */
    public void removeUnavailable() {
<span class="nc bnc" id="L680" title="All 2 branches missed.">        for (int i = 0; i &lt; boardsSelected.size(); i++) {</span>
            // If board is already null or no boards available, remove board
<span class="nc bnc" id="L682" title="All 4 branches missed.">            if ((boardsSelected.get(i) == null) || (boardsAvailable.size() == 0)) {</span>
<span class="nc" id="L683">                boardsSelected.set(i, null);</span>
            } else { // Otherwise, if the name isn't available, remove it
<span class="nc" id="L685">                String boardName = boardsSelected.get(i);</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">                if (boardsSelected.get(i).startsWith(Board.BOARD_REQUEST_ROTATION)) {</span>
<span class="nc" id="L687">                    boardName = boardName.substring(Board.BOARD_REQUEST_ROTATION.length());</span>
                }
<span class="nc bnc" id="L689" title="All 2 branches missed.">                if (boardsAvailable.indexOf(boardName) == -1) {</span>
<span class="nc" id="L690">                    boardsSelected.set(i, null);</span>
                }
            }
        }
<span class="nc" id="L694">    }</span>

    public Iterator&lt;String&gt; getBoardsAvailable() {
<span class="nc" id="L697">        return boardsAvailable.iterator();</span>
    }

    public ArrayList&lt;String&gt; getBoardsAvailableVector() {
<span class="nc" id="L701">        return boardsAvailable;</span>
    }

    public void setBoardsAvailableVector(ArrayList&lt;String&gt; boardsAvailable) {
<span class="nc" id="L705">        this.boardsAvailable = boardsAvailable;</span>
<span class="nc" id="L706">    }</span>

    /**
     * Checks, if the Mapgenerator parameters are all valid. If not they are
     * changed to valid values.
     */
    public void validateMapGenParameters() {
<span class="nc bnc" id="L713" title="All 2 branches missed.">        if (hilliness &lt; 0) {</span>
<span class="nc" id="L714">            hilliness = 0;</span>
        }
<span class="nc bnc" id="L716" title="All 2 branches missed.">        if (hilliness &gt; 99) {</span>
<span class="nc" id="L717">            hilliness = 99;</span>
        }
<span class="nc bnc" id="L719" title="All 2 branches missed.">        if (cliffs &lt; 0) {</span>
<span class="nc" id="L720">            cliffs = 0;</span>
        }
<span class="nc bnc" id="L722" title="All 2 branches missed.">        if (cliffs &gt; 100) {</span>
<span class="nc" id="L723">            cliffs = 100;</span>
        }
<span class="nc bnc" id="L725" title="All 2 branches missed.">        if (range &lt; 0) {</span>
<span class="nc" id="L726">            range = 0;</span>
        }
<span class="nc bnc" id="L728" title="All 2 branches missed.">        if (minWaterSpots &lt; 0) {</span>
<span class="nc" id="L729">            minWaterSpots = 0;</span>
        }
<span class="nc bnc" id="L731" title="All 2 branches missed.">        if (maxWaterSpots &lt; minWaterSpots) {</span>
<span class="nc" id="L732">            maxWaterSpots = minWaterSpots;</span>
        }
<span class="nc bnc" id="L734" title="All 2 branches missed.">        if (minWaterSize &lt; 0) {</span>
<span class="nc" id="L735">            minWaterSize = 0;</span>
        }
<span class="nc bnc" id="L737" title="All 2 branches missed.">        if (maxWaterSize &lt; minWaterSize) {</span>
<span class="nc" id="L738">            maxWaterSize = minWaterSize;</span>
        }
<span class="nc bnc" id="L740" title="All 2 branches missed.">        if (probDeep &lt; 0) {</span>
<span class="nc" id="L741">            probDeep = 0;</span>
        }
<span class="nc bnc" id="L743" title="All 2 branches missed.">        if (probDeep &gt; 100) {</span>
<span class="nc" id="L744">            probDeep = 100;</span>
        }
<span class="nc bnc" id="L746" title="All 2 branches missed.">        if (minForestSpots &lt; 0) {</span>
<span class="nc" id="L747">            minForestSpots = 0;</span>
        }
<span class="nc bnc" id="L749" title="All 2 branches missed.">        if (maxForestSpots &lt; minForestSpots) {</span>
<span class="nc" id="L750">            maxForestSpots = minForestSpots;</span>
        }
<span class="nc bnc" id="L752" title="All 2 branches missed.">        if (minForestSize &lt; 0) {</span>
<span class="nc" id="L753">            minForestSize = 0;</span>
        }
<span class="nc bnc" id="L755" title="All 2 branches missed.">        if (maxForestSize &lt; minForestSize) {</span>
<span class="nc" id="L756">            maxForestSize = minForestSize;</span>
        }
<span class="nc bnc" id="L758" title="All 2 branches missed.">        if (probHeavy &lt; 0) {</span>
<span class="nc" id="L759">            probHeavy = 0;</span>
        }
<span class="nc bnc" id="L761" title="All 2 branches missed.">        if (probHeavy &gt; 100) {</span>
<span class="nc" id="L762">            probHeavy = 100;</span>
        }
<span class="nc bnc" id="L764" title="All 2 branches missed.">        if (minFoliageSpots &lt; 0) {</span>
<span class="nc" id="L765">            minFoliageSpots = 0;</span>
        }
<span class="nc bnc" id="L767" title="All 2 branches missed.">        if (maxFoliageSpots &lt; minFoliageSpots) {</span>
<span class="nc" id="L768">            maxFoliageSpots = minFoliageSpots;</span>
        }
<span class="nc bnc" id="L770" title="All 2 branches missed.">        if (minFoliageSize &lt; 0) {</span>
<span class="nc" id="L771">            minFoliageSize = 0;</span>
        }
<span class="nc bnc" id="L773" title="All 2 branches missed.">        if (maxFoliageSize &lt; minFoliageSize) {</span>
<span class="nc" id="L774">            maxFoliageSize = minFoliageSize;</span>
        }
<span class="nc bnc" id="L776" title="All 2 branches missed.">        if (probFoliageHeavy &lt; 0) {</span>
<span class="nc" id="L777">            probFoliageHeavy = 0;</span>
        }
<span class="nc bnc" id="L779" title="All 2 branches missed.">        if (probFoliageHeavy &gt; 100) {</span>
<span class="nc" id="L780">            probFoliageHeavy = 100;</span>
        }
<span class="nc bnc" id="L782" title="All 2 branches missed.">        if (minRoughSpots &lt; 0) {</span>
<span class="nc" id="L783">            minRoughSpots = 0;</span>
        }
<span class="nc bnc" id="L785" title="All 2 branches missed.">        if (maxRoughSpots &lt; minRoughSpots) {</span>
<span class="nc" id="L786">            maxRoughSpots = minRoughSpots;</span>
        }
<span class="nc bnc" id="L788" title="All 2 branches missed.">        if (minRoughSize &lt; 0) {</span>
<span class="nc" id="L789">            minRoughSize = 0;</span>
        }
<span class="nc bnc" id="L791" title="All 2 branches missed.">        if (maxRoughSize &lt; minRoughSize) {</span>
<span class="nc" id="L792">            maxRoughSize = minRoughSize;</span>
        }
<span class="nc bnc" id="L794" title="All 2 branches missed.">        if (minSandSpots &lt; 0) {</span>
<span class="nc" id="L795">            minSandSpots = 0;</span>
        }
<span class="nc bnc" id="L797" title="All 2 branches missed.">        if (maxSandSpots &lt; minSandSpots) {</span>
<span class="nc" id="L798">            maxSandSpots = minSandSpots;</span>
        }
<span class="nc bnc" id="L800" title="All 2 branches missed.">        if (minSandSize &lt; 0) {</span>
<span class="nc" id="L801">            minSandSize = 0;</span>
        }
<span class="nc bnc" id="L803" title="All 2 branches missed.">        if (maxSandSize &lt; minSandSize) {</span>
<span class="nc" id="L804">            maxSandSize = minSandSize;</span>
        }
<span class="nc bnc" id="L806" title="All 2 branches missed.">        if (minPlantedFieldSpots &lt; 0) {</span>
<span class="nc" id="L807">            minPlantedFieldSpots = 0;</span>
        }
<span class="nc bnc" id="L809" title="All 2 branches missed.">        if (maxPlantedFieldSpots &lt; minPlantedFieldSpots) {</span>
<span class="nc" id="L810">            maxPlantedFieldSpots = minPlantedFieldSpots;</span>
        }
<span class="nc bnc" id="L812" title="All 2 branches missed.">        if (minPlantedFieldSize &lt; 0) {</span>
<span class="nc" id="L813">            minPlantedFieldSize = 0;</span>
        }
<span class="nc bnc" id="L815" title="All 2 branches missed.">        if (maxPlantedFieldSize &lt; minPlantedFieldSize) {</span>
<span class="nc" id="L816">            maxPlantedFieldSize = minPlantedFieldSize;</span>
        }
<span class="nc bnc" id="L818" title="All 2 branches missed.">        if (minSwampSpots &lt; 0) {</span>
<span class="nc" id="L819">            minSwampSpots = 0;</span>
        }
<span class="nc bnc" id="L821" title="All 2 branches missed.">        if (maxSwampSpots &lt; minSwampSpots) {</span>
<span class="nc" id="L822">            maxSwampSpots = minSwampSpots;</span>
        }
<span class="nc bnc" id="L824" title="All 2 branches missed.">        if (minSwampSize &lt; 0) {</span>
<span class="nc" id="L825">            minSwampSize = 0;</span>
        }
<span class="nc bnc" id="L827" title="All 2 branches missed.">        if (maxSwampSize &lt; minSwampSize) {</span>
<span class="nc" id="L828">            maxSwampSize = minSwampSize;</span>
        }
<span class="nc bnc" id="L830" title="All 2 branches missed.">        if (minPavementSpots &lt; 0) {</span>
<span class="nc" id="L831">            minPavementSpots = 0;</span>
        }
<span class="nc bnc" id="L833" title="All 2 branches missed.">        if (maxPavementSpots &lt; minPavementSpots) {</span>
<span class="nc" id="L834">            maxPavementSpots = minPavementSpots;</span>
        }
<span class="nc bnc" id="L836" title="All 2 branches missed.">        if (minPavementSize &lt; 0) {</span>
<span class="nc" id="L837">            minPavementSize = 0;</span>
        }
<span class="nc bnc" id="L839" title="All 2 branches missed.">        if (maxPavementSize &lt; minPavementSize) {</span>
<span class="nc" id="L840">            maxPavementSize = minPavementSize;</span>
        }
<span class="nc bnc" id="L842" title="All 2 branches missed.">        if (minRubbleSpots &lt; 0) {</span>
<span class="nc" id="L843">            minRubbleSpots = 0;</span>
        }
<span class="nc bnc" id="L845" title="All 2 branches missed.">        if (maxRubbleSpots &lt; minRubbleSpots) {</span>
<span class="nc" id="L846">            maxRubbleSpots = minRubbleSpots;</span>
        }
<span class="nc bnc" id="L848" title="All 2 branches missed.">        if (minRubbleSize &lt; 0) {</span>
<span class="nc" id="L849">            minRubbleSize = 0;</span>
        }
<span class="nc bnc" id="L851" title="All 2 branches missed.">        if (maxRubbleSize &lt; minRubbleSize) {</span>
<span class="nc" id="L852">            maxRubbleSize = minRubbleSize;</span>
        }
<span class="nc bnc" id="L854" title="All 2 branches missed.">        if (minFortifiedSpots &lt; 0) {</span>
<span class="nc" id="L855">            minFortifiedSpots = 0;</span>
        }
<span class="nc bnc" id="L857" title="All 2 branches missed.">        if (maxFortifiedSpots &lt; minFortifiedSpots) {</span>
<span class="nc" id="L858">            maxFortifiedSpots = minFortifiedSpots;</span>
        }
<span class="nc bnc" id="L860" title="All 2 branches missed.">        if (minFortifiedSize &lt; 0) {</span>
<span class="nc" id="L861">            minFortifiedSize = 0;</span>
        }
<span class="nc bnc" id="L863" title="All 2 branches missed.">        if (maxFortifiedSize &lt; minFortifiedSize) {</span>
<span class="nc" id="L864">            maxFortifiedSize = minFortifiedSize;</span>
        }
<span class="nc bnc" id="L866" title="All 2 branches missed.">        if (minIceSpots &lt; 0) {</span>
<span class="nc" id="L867">            minIceSpots = 0;</span>
        }
<span class="nc bnc" id="L869" title="All 2 branches missed.">        if (maxIceSpots &lt; minIceSpots) {</span>
<span class="nc" id="L870">            maxIceSpots = minIceSpots;</span>
        }
<span class="nc bnc" id="L872" title="All 2 branches missed.">        if (minIceSize &lt; 0) {</span>
<span class="nc" id="L873">            minIceSize = 0;</span>
        }
<span class="nc bnc" id="L875" title="All 2 branches missed.">        if (maxIceSize &lt; minIceSize) {</span>
<span class="nc" id="L876">            maxIceSize = minIceSize;</span>
        }
<span class="nc bnc" id="L878" title="All 2 branches missed.">        if (probRoad &lt; 0) {</span>
<span class="nc" id="L879">            probRoad = 0;</span>
        }
<span class="nc bnc" id="L881" title="All 2 branches missed.">        if (probRoad &gt; 100) {</span>
<span class="nc" id="L882">            probRoad = 100;</span>
        }
<span class="nc bnc" id="L884" title="All 2 branches missed.">        if (probInvert &lt; 0) {</span>
<span class="nc" id="L885">            probInvert = 0;</span>
        }
<span class="nc bnc" id="L887" title="All 2 branches missed.">        if (probInvert &gt; 100) {</span>
<span class="nc" id="L888">            probInvert = 100;</span>
        }
<span class="nc bnc" id="L890" title="All 2 branches missed.">        if (probRiver &lt; 0) {</span>
<span class="nc" id="L891">            probRiver = 0;</span>
        }
<span class="nc bnc" id="L893" title="All 2 branches missed.">        if (probRiver &gt; 100) {</span>
<span class="nc" id="L894">            probRiver = 100;</span>
        }
<span class="nc bnc" id="L896" title="All 2 branches missed.">        if (probCrater &lt; 0) {</span>
<span class="nc" id="L897">            probCrater = 0;</span>
        }
<span class="nc bnc" id="L899" title="All 2 branches missed.">        if (probCrater &gt; 100) {</span>
<span class="nc" id="L900">            probCrater = 100;</span>
        }
<span class="nc bnc" id="L902" title="All 2 branches missed.">        if (minRadius &lt; 0) {</span>
<span class="nc" id="L903">            minRadius = 0;</span>
        }
<span class="nc bnc" id="L905" title="All 2 branches missed.">        if (maxRadius &lt; minRadius) {</span>
<span class="nc" id="L906">            maxRadius = minRadius;</span>
        }
<span class="nc bnc" id="L908" title="All 2 branches missed.">        if (minCraters &lt; 0) {</span>
<span class="nc" id="L909">            minCraters = 0;</span>
        }
<span class="nc bnc" id="L911" title="All 2 branches missed.">        if (maxCraters &lt; minCraters) {</span>
<span class="nc" id="L912">            maxCraters = minCraters;</span>
        }
<span class="nc bnc" id="L914" title="All 2 branches missed.">        if (algorithmToUse &lt; 0) {</span>
<span class="nc" id="L915">            algorithmToUse = 0;</span>
        }
<span class="nc bnc" id="L917" title="All 2 branches missed.">        if (algorithmToUse &gt; 2) {</span>
<span class="nc" id="L918">            algorithmToUse = 2;</span>
        }
<span class="nc" id="L920">    } /* validateMapGenParameters */</span>

    /**
     * Returns true if the this Mapsetting has the same mapgenerator settings
     * and size as the parameter.
     *
     * @param other
     *            The Mapsetting to which compare.
     * @return True if settings are the same.
     */
    public boolean equalMapGenParameters(MapSettings other) {
<span class="nc bnc" id="L931" title="All 4 branches missed.">        if ((boardWidth != other.getBoardWidth()) || (boardHeight != other.getBoardHeight())</span>
<span class="nc bnc" id="L932" title="All 4 branches missed.">                || (mapWidth != other.getMapWidth()) || (mapHeight != other.getMapHeight())</span>
<span class="nc bnc" id="L933" title="All 4 branches missed.">                || (invertNegativeTerrain != other.getInvertNegativeTerrain()) || (hilliness != other.getHilliness())</span>
<span class="nc bnc" id="L934" title="All 4 branches missed.">                || (cliffs != other.getCliffs()) || (range != other.getRange())</span>
<span class="nc bnc" id="L935" title="All 4 branches missed.">                || (minWaterSpots != other.getMinWaterSpots()) || (maxWaterSpots != other.getMaxWaterSpots())</span>
<span class="nc bnc" id="L936" title="All 4 branches missed.">                || (minWaterSize != other.getMinWaterSize()) || (maxWaterSize != other.getMaxWaterSize())</span>
<span class="nc bnc" id="L937" title="All 4 branches missed.">                || (probDeep != other.getProbDeep()) || (minForestSpots != other.getMinForestSpots())</span>
<span class="nc bnc" id="L938" title="All 4 branches missed.">                || (maxForestSpots != other.getMaxForestSpots()) || (minForestSize != other.getMinForestSize())</span>
<span class="nc bnc" id="L939" title="All 4 branches missed.">                || (maxForestSize != other.getMaxForestSize()) || (probHeavy != other.getProbHeavy())</span>
<span class="nc bnc" id="L940" title="All 2 branches missed.">                || (minFoliageSpots != other.getMinFoliageSpots())</span>
<span class="nc bnc" id="L941" title="All 4 branches missed.">                || (maxFoliageSpots != other.getMaxFoliageSpots()) || (minFoliageSize != other.getMinFoliageSize())</span>
<span class="nc bnc" id="L942" title="All 4 branches missed.">                || (maxFoliageSize != other.getMaxFoliageSize()) || (probFoliageHeavy != other.getProbFoliageHeavy())</span>
<span class="nc bnc" id="L943" title="All 4 branches missed.">                || (minRoughSpots != other.getMinRoughSpots()) || (maxRoughSpots != other.getMaxRoughSpots())</span>
<span class="nc bnc" id="L944" title="All 4 branches missed.">                || (minRoughSize != other.getMinRoughSize()) || (maxRoughSize != other.getMaxRoughSize())</span>
<span class="nc bnc" id="L945" title="All 4 branches missed.">                || (minSandSpots != other.getMinSandSpots()) || (maxSandSpots != other.getMaxSandSpots())</span>
<span class="nc bnc" id="L946" title="All 4 branches missed.">                || (minSandSize != other.getMinSandSize()) || (maxSandSize != other.getMaxSandSize())</span>
<span class="nc bnc" id="L947" title="All 2 branches missed.">                || (minPlantedFieldSpots != other.getMinPlantedFieldSpots())</span>
<span class="nc bnc" id="L948" title="All 2 branches missed.">                || (maxPlantedFieldSpots != other.getMaxPlantedFieldSpots())</span>
<span class="nc bnc" id="L949" title="All 2 branches missed.">                || (minPlantedFieldSize != other.getMinPlantedFieldSize())</span>
<span class="nc bnc" id="L950" title="All 2 branches missed.">                || (maxPlantedFieldSize != other.getMaxPlantedFieldSize())</span>
<span class="nc bnc" id="L951" title="All 4 branches missed.">                || (minSwampSpots != other.getMinSwampSpots()) || (maxSwampSpots != other.getMaxSwampSpots())</span>
<span class="nc bnc" id="L952" title="All 4 branches missed.">                || (minSwampSize != other.getMinSwampSize()) || (maxSwampSize != other.getMaxSwampSize())</span>
<span class="nc bnc" id="L953" title="All 2 branches missed.">                || (minPavementSpots != other.getMinPavementSpots())</span>
<span class="nc bnc" id="L954" title="All 4 branches missed.">                || (maxPavementSpots != other.getMaxPavementSpots()) || (minPavementSize != other.getMinPavementSize())</span>
<span class="nc bnc" id="L955" title="All 4 branches missed.">                || (maxPavementSize != other.getMaxPavementSize()) || (minRubbleSpots != other.getMinRubbleSpots())</span>
<span class="nc bnc" id="L956" title="All 4 branches missed.">                || (maxRubbleSpots != other.getMaxRubbleSpots()) || (minRubbleSize != other.getMinRubbleSize())</span>
<span class="nc bnc" id="L957" title="All 4 branches missed.">                || (maxRubbleSize != other.getMaxRubbleSize()) || (minFortifiedSpots != other.getMinFortifiedSpots())</span>
<span class="nc bnc" id="L958" title="All 2 branches missed.">                || (maxFortifiedSpots != other.getMaxFortifiedSpots())</span>
<span class="nc bnc" id="L959" title="All 2 branches missed.">                || (minFortifiedSize != other.getMinFortifiedSize())</span>
<span class="nc bnc" id="L960" title="All 4 branches missed.">                || (maxFortifiedSize != other.getMaxFortifiedSize()) || (minIceSpots != other.getMinIceSpots())</span>
<span class="nc bnc" id="L961" title="All 4 branches missed.">                || (maxIceSpots != other.getMaxIceSpots()) || (minIceSize != other.getMinIceSize())</span>
<span class="nc bnc" id="L962" title="All 4 branches missed.">                || (maxIceSize != other.getMaxIceSize()) || (probRoad != other.getProbRoad())</span>
<span class="nc bnc" id="L963" title="All 4 branches missed.">                || (probInvert != other.getProbInvert()) || (probRiver != other.getProbRiver())</span>
<span class="nc bnc" id="L964" title="All 4 branches missed.">                || (probCrater != other.getProbCrater()) || (minRadius != other.getMinRadius())</span>
<span class="nc bnc" id="L965" title="All 4 branches missed.">                || (maxRadius != other.getMaxRadius()) || (minCraters != other.getMinCraters())</span>
<span class="nc bnc" id="L966" title="All 4 branches missed.">                || (maxCraters != other.getMaxCraters()) || (!theme.equals(other.getTheme()))</span>
<span class="nc bnc" id="L967" title="All 4 branches missed.">                || (fxMod != other.getFxMod()) || (cityBlocks != other.getCityBlocks())</span>
<span class="nc bnc" id="L968" title="All 4 branches missed.">                || (cityType != other.getCityType()) || (cityMinCF != other.getCityMinCF())</span>
<span class="nc bnc" id="L969" title="All 4 branches missed.">                || (cityMaxCF != other.getCityMaxCF()) || (cityMinFloors != other.getCityMinFloors())</span>
<span class="nc bnc" id="L970" title="All 4 branches missed.">                || (cityMaxFloors != other.getCityMaxFloors()) || (cityDensity != other.getCityDensity())</span>
<span class="nc bnc" id="L971" title="All 4 branches missed.">                || (probFlood != other.getProbFlood()) || (probForestFire != other.getProbForestFire())</span>
<span class="nc bnc" id="L972" title="All 4 branches missed.">                || (probFreeze != other.getProbFreeze()) || (probDrought != other.getProbDrought())</span>
<span class="nc bnc" id="L973" title="All 4 branches missed.">                || (algorithmToUse != other.getAlgorithmToUse()) || (mountainHeightMin != other.getMountainHeightMin())</span>
<span class="nc bnc" id="L974" title="All 4 branches missed.">                || (mountainHeightMax != other.getMountainHeightMax()) || (mountainPeaks != other.getMountainPeaks())</span>
<span class="nc bnc" id="L975" title="All 4 branches missed.">                || (mountainStyle != other.getMountainStyle()) || (mountainWidthMin != other.getMountainWidthMin())</span>
<span class="nc bnc" id="L976" title="All 4 branches missed.">                || (mountainWidthMax != other.getMountainWidthMax()) || (boardBuildings != other.getBoardBuildings())) {</span>
<span class="nc" id="L977">            return false;</span>
        }
<span class="nc" id="L979">        return true;</span>
    } /* equalMapGenParameters */

    public int getInvertNegativeTerrain() {
<span class="fc" id="L983">        return invertNegativeTerrain;</span>
    }

    public int getHilliness() {
<span class="fc" id="L987">        return hilliness;</span>
    }

    public int getCliffs() {
<span class="fc" id="L991">        return cliffs;</span>
    }

    public int getRange() {
<span class="fc" id="L995">        return range;</span>
    }

    public int getProbInvert() {
<span class="fc" id="L999">        return probInvert;</span>
    }

    public int getMinWaterSpots() {
<span class="fc" id="L1003">        return minWaterSpots;</span>
    }

    public int getMaxWaterSpots() {
<span class="fc" id="L1007">        return maxWaterSpots;</span>
    }

    public int getMinWaterSize() {
<span class="fc" id="L1011">        return minWaterSize;</span>
    }

    public int getMaxWaterSize() {
<span class="fc" id="L1015">        return maxWaterSize;</span>
    }

    public int getProbDeep() {
<span class="fc" id="L1019">        return probDeep;</span>
    }

    public int getMinForestSpots() {
<span class="fc" id="L1023">        return minForestSpots;</span>
    }

    public int getMaxForestSpots() {
<span class="fc" id="L1027">        return maxForestSpots;</span>
    }

    public int getMinForestSize() {
<span class="fc" id="L1031">        return minForestSize;</span>
    }

    public int getMaxForestSize() {
<span class="fc" id="L1035">        return maxForestSize;</span>
    }

    public int getProbHeavy() {
<span class="fc" id="L1039">        return probHeavy;</span>
    }
    
    public int getMinFoliageSpots() {
<span class="nc" id="L1043">        return minFoliageSpots;</span>
    }

    public int getMaxFoliageSpots() {
<span class="nc" id="L1047">        return maxFoliageSpots;</span>
    }

    public int getMinFoliageSize() {
<span class="nc" id="L1051">        return minFoliageSize;</span>
    }

    public int getMaxFoliageSize() {
<span class="nc" id="L1055">        return maxFoliageSize;</span>
    }

    public int getProbFoliageHeavy() {
<span class="nc" id="L1059">        return probFoliageHeavy;</span>
    }

    public int getMinRoughSpots() {
<span class="fc" id="L1063">        return minRoughSpots;</span>
    }

    public int getMaxRoughSpots() {
<span class="fc" id="L1067">        return maxRoughSpots;</span>
    }

    public int getMinRoughSize() {
<span class="fc" id="L1071">        return minRoughSize;</span>
    }

    public int getMaxRoughSize() {
<span class="fc" id="L1075">        return maxRoughSize;</span>
    }

    public int getMinSandSpots() {
<span class="fc" id="L1079">        return minSandSpots;</span>
    }

    public void setMinSandSpots(int minSandSpots) {
<span class="nc" id="L1083">        this.minSandSpots = minSandSpots;</span>
<span class="nc" id="L1084">    }</span>

    public int getMaxSandSpots() {
<span class="fc" id="L1087">        return maxSandSpots;</span>
    }

    public void setMaxSandSpots(int maxSandSpots) {
<span class="nc" id="L1091">        this.maxSandSpots = maxSandSpots;</span>
<span class="nc" id="L1092">    }</span>

    public int getMinSandSize() {
<span class="fc" id="L1095">        return minSandSize;</span>
    }

    public void setMinSandSize(int minSandSize) {
<span class="nc" id="L1099">        this.minSandSize = minSandSize;</span>
<span class="nc" id="L1100">    }</span>

    public int getMaxSandSize() {
<span class="fc" id="L1103">        return maxSandSize;</span>
    }

    public void setMaxSandSize(int maxSandSize) {
<span class="nc" id="L1107">        this.maxSandSize = maxSandSize;</span>
<span class="nc" id="L1108">    }</span>

    public int getMinPlantedFieldSpots() {
<span class="fc" id="L1111">        return minPlantedFieldSpots;</span>
    }

    public void setMinPlantedFieldSpots(int minPlantedFieldSpots) {
<span class="nc" id="L1115">        this.minPlantedFieldSpots = minPlantedFieldSpots;</span>
<span class="nc" id="L1116">    }</span>

    public int getMaxPlantedFieldSpots() {
<span class="fc" id="L1119">        return maxPlantedFieldSpots;</span>
    }

    public void setMaxPlantedFieldSpots(int maxPlantedFieldSpots) {
<span class="nc" id="L1123">        this.maxPlantedFieldSpots = maxPlantedFieldSpots;</span>
<span class="nc" id="L1124">    }</span>

    public int getMinPlantedFieldSize() {
<span class="fc" id="L1127">        return minPlantedFieldSize;</span>
    }

    public void setMinPlantedFieldSize(int minPlantedFieldSize) {
<span class="nc" id="L1131">        this.minPlantedFieldSize = minPlantedFieldSize;</span>
<span class="nc" id="L1132">    }</span>

    public int getMaxPlantedFieldSize() {
<span class="fc" id="L1135">        return maxPlantedFieldSize;</span>
    }

    public void setMaxPlantedFieldSize(int maxPlantedFieldSize) {
<span class="nc" id="L1139">        this.maxPlantedFieldSize = maxPlantedFieldSize;</span>
<span class="nc" id="L1140">    }</span>

    public int getMinSwampSpots() {
<span class="fc" id="L1143">        return minSwampSpots;</span>
    }

    public int getMaxSwampSpots() {
<span class="fc" id="L1147">        return maxSwampSpots;</span>
    }

    public int getMinSwampSize() {
<span class="fc" id="L1151">        return minSwampSize;</span>
    }

    public int getMaxSwampSize() {
<span class="fc" id="L1155">        return maxSwampSize;</span>
    }

    public int getMinPavementSpots() {
<span class="fc" id="L1159">        return minPavementSpots;</span>
    }

    public int getMaxPavementSpots() {
<span class="fc" id="L1163">        return maxPavementSpots;</span>
    }

    public int getMinPavementSize() {
<span class="fc" id="L1167">        return minPavementSize;</span>
    }

    public int getMaxPavementSize() {
<span class="fc" id="L1171">        return maxPavementSize;</span>
    }

    public int getMinRubbleSpots() {
<span class="fc" id="L1175">        return minRubbleSpots;</span>
    }

    public int getMaxRubbleSpots() {
<span class="fc" id="L1179">        return maxRubbleSpots;</span>
    }

    public int getMinRubbleSize() {
<span class="fc" id="L1183">        return minRubbleSize;</span>
    }

    public int getMaxRubbleSize() {
<span class="fc" id="L1187">        return maxRubbleSize;</span>
    }

    public int getMinFortifiedSpots() {
<span class="fc" id="L1191">        return minFortifiedSpots;</span>
    }

    public int getMaxFortifiedSpots() {
<span class="fc" id="L1195">        return maxFortifiedSpots;</span>
    }

    public int getMinFortifiedSize() {
<span class="fc" id="L1199">        return minFortifiedSize;</span>
    }

    public int getMaxFortifiedSize() {
<span class="fc" id="L1203">        return maxFortifiedSize;</span>
    }

    public int getMinIceSpots() {
<span class="fc" id="L1207">        return minIceSpots;</span>
    }

    public int getMaxIceSpots() {
<span class="fc" id="L1211">        return maxIceSpots;</span>
    }

    public int getMinIceSize() {
<span class="fc" id="L1215">        return minIceSize;</span>
    }

    public int getMaxIceSize() {
<span class="fc" id="L1219">        return maxIceSize;</span>
    }

    public int getProbRoad() {
<span class="fc" id="L1223">        return probRoad;</span>
    }

    public int getProbRiver() {
<span class="fc" id="L1227">        return probRiver;</span>
    }

    public int getProbCrater() {
<span class="fc" id="L1231">        return probCrater;</span>
    }

    public int getMinRadius() {
<span class="fc" id="L1235">        return minRadius;</span>
    }

    public int getMaxRadius() {
<span class="fc" id="L1239">        return maxRadius;</span>
    }

    public int getMinCraters() {
<span class="fc" id="L1243">        return minCraters;</span>
    }

    public int getMaxCraters() {
<span class="fc" id="L1247">        return maxCraters;</span>
    }

    public int getAlgorithmToUse() {
<span class="fc" id="L1251">        return algorithmToUse;</span>
    }

    public int getProbFlood() {
<span class="fc" id="L1255">        return probFlood;</span>
    }

    public int getProbForestFire() {
<span class="fc" id="L1259">        return probForestFire;</span>
    }

    public int getProbFreeze() {
<span class="fc" id="L1263">        return probFreeze;</span>
    }

    public int getProbDrought() {
<span class="fc" id="L1267">        return probDrought;</span>
    }

    public int getFxMod() {
<span class="fc" id="L1271">        return fxMod;</span>
    }

    public int getCityBlocks() {
<span class="fc" id="L1275">        return cityBlocks;</span>
    }

    public String getCityType() {
<span class="fc" id="L1279">        return cityType;</span>
    }

    public int getCityMinCF() {
<span class="fc" id="L1283">        return cityMinCF;</span>
    }

    public int getCityMaxCF() {
<span class="fc" id="L1287">        return cityMaxCF;</span>
    }

    public int getCityMinFloors() {
<span class="fc" id="L1291">        return cityMinFloors;</span>
    }

    public int getCityMaxFloors() {
<span class="fc" id="L1295">        return cityMaxFloors;</span>
    }

    public int getCityDensity() {
<span class="fc" id="L1299">        return cityDensity;</span>
    }

    public int getTownSize() {
<span class="fc" id="L1303">        return townSize;</span>
    }

    public int getMountainHeightMin() {
<span class="fc" id="L1307">        return mountainHeightMin;</span>
    }

    public int getMountainHeightMax() {
<span class="fc" id="L1311">        return mountainHeightMax;</span>
    }

    public int getMountainPeaks() {
<span class="fc" id="L1315">        return mountainPeaks;</span>
    }

    public int getMountainStyle() {
<span class="fc" id="L1319">        return mountainStyle;</span>
    }

    public int getMountainWidthMin() {
<span class="fc" id="L1323">        return mountainWidthMin;</span>
    }

    public int getMountainWidthMax() {
<span class="fc" id="L1327">        return mountainWidthMax;</span>
    }

    /**
     * set the Parameters for the Map Generator
     */
    public void setElevationParams(int hill, int newRange, int prob) {
<span class="nc" id="L1334">        hilliness = hill;</span>
<span class="nc" id="L1335">        range = newRange;</span>
<span class="nc" id="L1336">        probInvert = prob;</span>
<span class="nc" id="L1337">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setWaterParams(int minSpots, int maxSpots, int minSize, int maxSize, int prob) {
<span class="nc" id="L1343">        minWaterSpots = minSpots;</span>
<span class="nc" id="L1344">        maxWaterSpots = maxSpots;</span>
<span class="nc" id="L1345">        minWaterSize = minSize;</span>
<span class="nc" id="L1346">        maxWaterSize = maxSize;</span>
<span class="nc" id="L1347">        probDeep = prob;</span>
<span class="nc" id="L1348">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setForestParams(int minSpots, int maxSpots, int minSize, int maxSize, int prob) {
<span class="nc" id="L1354">        minForestSpots = minSpots;</span>
<span class="nc" id="L1355">        maxForestSpots = maxSpots;</span>
<span class="nc" id="L1356">        minForestSize = minSize;</span>
<span class="nc" id="L1357">        maxForestSize = maxSize;</span>
<span class="nc" id="L1358">        probHeavy = prob;</span>
<span class="nc" id="L1359">    }</span>
    
    /**
     * set the Parameters for the Map Generator
     */
    public void setFoliageParams(int minSpots, int maxSpots, int minSize, int maxSize, int prob) {
<span class="nc" id="L1365">        minFoliageSpots = minSpots;</span>
<span class="nc" id="L1366">        maxFoliageSpots = maxSpots;</span>
<span class="nc" id="L1367">        minFoliageSize = minSize;</span>
<span class="nc" id="L1368">        maxFoliageSize = maxSize;</span>
<span class="nc" id="L1369">        probFoliageHeavy = prob;</span>
<span class="nc" id="L1370">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setRoughParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1376">        minRoughSpots = minSpots;</span>
<span class="nc" id="L1377">        maxRoughSpots = maxSpots;</span>
<span class="nc" id="L1378">        minRoughSize = minSize;</span>
<span class="nc" id="L1379">        maxRoughSize = maxSize;</span>
<span class="nc" id="L1380">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setSandParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1386">        minSandSpots = minSpots;</span>
<span class="nc" id="L1387">        maxSandSpots = maxSpots;</span>
<span class="nc" id="L1388">        minSandSize = minSize;</span>
<span class="nc" id="L1389">        maxSandSize = maxSize;</span>
<span class="nc" id="L1390">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setPlantedFieldParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1396">        minPlantedFieldSpots = minSpots;</span>
<span class="nc" id="L1397">        maxPlantedFieldSpots = maxSpots;</span>
<span class="nc" id="L1398">        minPlantedFieldSize = minSize;</span>
<span class="nc" id="L1399">        maxPlantedFieldSize = maxSize;</span>
<span class="nc" id="L1400">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setSwampParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1406">        minSwampSpots = minSpots;</span>
<span class="nc" id="L1407">        maxSwampSpots = maxSpots;</span>
<span class="nc" id="L1408">        minSwampSize = minSize;</span>
<span class="nc" id="L1409">        maxSwampSize = maxSize;</span>
<span class="nc" id="L1410">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setPavementParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1416">        minPavementSpots = minSpots;</span>
<span class="nc" id="L1417">        maxPavementSpots = maxSpots;</span>
<span class="nc" id="L1418">        minPavementSize = minSize;</span>
<span class="nc" id="L1419">        maxPavementSize = maxSize;</span>
<span class="nc" id="L1420">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setRubbleParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1426">        minRubbleSpots = minSpots;</span>
<span class="nc" id="L1427">        maxRubbleSpots = maxSpots;</span>
<span class="nc" id="L1428">        minRubbleSize = minSize;</span>
<span class="nc" id="L1429">        maxRubbleSize = maxSize;</span>
<span class="nc" id="L1430">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setFortifiedParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1436">        minFortifiedSpots = minSpots;</span>
<span class="nc" id="L1437">        maxFortifiedSpots = maxSpots;</span>
<span class="nc" id="L1438">        minFortifiedSize = minSize;</span>
<span class="nc" id="L1439">        maxFortifiedSize = maxSize;</span>
<span class="nc" id="L1440">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setIceParams(int minSpots, int maxSpots, int minSize, int maxSize) {
<span class="nc" id="L1446">        minIceSpots = minSpots;</span>
<span class="nc" id="L1447">        maxIceSpots = maxSpots;</span>
<span class="nc" id="L1448">        minIceSize = minSize;</span>
<span class="nc" id="L1449">        maxIceSize = maxSize;</span>
<span class="nc" id="L1450">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setRiverParam(int prob) {
<span class="nc" id="L1456">        probRiver = prob;</span>
<span class="nc" id="L1457">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setRoadParam(int prob) {
<span class="nc" id="L1463">        probRoad = prob;</span>
<span class="nc" id="L1464">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setCliffParam(int prob) {
<span class="nc" id="L1470">        cliffs = prob;</span>
<span class="nc" id="L1471">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setCraterParam(int prob, int minCrat, int maxCrat, int minRad, int maxRad) {

<span class="nc" id="L1478">        probCrater = prob;</span>
<span class="nc" id="L1479">        maxCraters = maxCrat;</span>
<span class="nc" id="L1480">        minCraters = minCrat;</span>
<span class="nc" id="L1481">        minRadius = minRad;</span>
<span class="nc" id="L1482">        maxRadius = maxRad;</span>
<span class="nc" id="L1483">    }</span>

    /**
     * set the Parameters for the Map Generator
     */
    public void setInvertNegativeTerrain(int invert) {
<span class="nc" id="L1489">        invertNegativeTerrain = invert;</span>
<span class="nc" id="L1490">    }</span>

    /**
     * set Map generator parameters
     */
    public void setSpecialFX(int modifier, int fire, int freeze, int flood, int drought) {
<span class="nc" id="L1496">        fxMod = modifier;</span>
<span class="nc" id="L1497">        probForestFire = fire;</span>
<span class="nc" id="L1498">        probFreeze = freeze;</span>
<span class="nc" id="L1499">        probFlood = flood;</span>
<span class="nc" id="L1500">        probDrought = drought;</span>
<span class="nc" id="L1501">    }</span>

    public void setAlgorithmToUse(int alg) {
<span class="nc" id="L1504">        algorithmToUse = alg;</span>
<span class="nc" id="L1505">    }</span>

    public void setCityParams(int cityBlocks, String cityType, int cityMinCF, int cityMaxCF, int cityMinFloors,
            int cityMaxFloors, int cityDensity, int townSize) {
<span class="nc" id="L1509">        this.cityBlocks = cityBlocks;</span>
<span class="nc" id="L1510">        this.cityType = cityType;</span>
<span class="nc" id="L1511">        this.cityMinCF = cityMinCF;</span>
<span class="nc" id="L1512">        this.cityMaxCF = cityMaxCF;</span>
<span class="nc" id="L1513">        this.cityMinFloors = cityMinFloors;</span>
<span class="nc" id="L1514">        this.cityMaxFloors = cityMaxFloors;</span>
<span class="nc" id="L1515">        this.cityDensity = cityDensity;</span>
<span class="nc" id="L1516">        this.townSize = townSize;</span>
<span class="nc" id="L1517">    }</span>

    public void setMountainParams(int mountainPeaks, int mountainWidthMin, int mountainWidthMax, int mountainHeightMin,
            int mountainHeightMax, int mountainStyle) {
<span class="nc" id="L1521">        this.mountainHeightMax = mountainHeightMax;</span>
<span class="nc" id="L1522">        this.mountainHeightMin = mountainHeightMin;</span>
<span class="nc" id="L1523">        this.mountainWidthMin = mountainWidthMin;</span>
<span class="nc" id="L1524">        this.mountainWidthMax = mountainWidthMax;</span>
<span class="nc" id="L1525">        this.mountainPeaks = mountainPeaks;</span>
<span class="nc" id="L1526">        this.mountainStyle = mountainStyle;</span>
<span class="nc" id="L1527">    }</span>

    public void setMedium(int m) {
<span class="nc" id="L1530">        medium = m;</span>
<span class="nc" id="L1531">    }</span>

    public int getMedium() {
<span class="nc" id="L1534">        return medium;</span>
    }

    public static String getMediumName(int m) {
<span class="nc" id="L1538">        return mediumNames[m];</span>
    }

    // note the format is intended to be interoperable with mekwars' existing
    // terrain.xml format
    public void save(final OutputStream os) {
        try {
<span class="fc" id="L1545">            JAXBContext jc = JAXBContext.newInstance(MapSettings.class);</span>

<span class="fc" id="L1547">            Marshaller marshaller = jc.createMarshaller();</span>
<span class="fc" id="L1548">            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);</span>

            // The default header has the encoding and standalone properties
<span class="fc" id="L1551">            marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);</span>
            try {
<span class="nc" id="L1553">            	marshaller.setProperty(&quot;com.sun.xml.internal.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;);</span>
<span class="fc" id="L1554">            } catch (PropertyException ex) {</span>
<span class="fc" id="L1555">            	marshaller.setProperty(&quot;com.sun.xml.bind.xmlHeaders&quot;, &quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;);</span>
<span class="nc" id="L1556">            }</span>

<span class="fc" id="L1558">            JAXBElement&lt;MapSettings&gt; element = new JAXBElement&lt;&gt;(new QName(&quot;ENVIRONMENT&quot;), MapSettings.class, this);</span>

<span class="fc" id="L1560">            marshaller.marshal(element, os);</span>
<span class="nc" id="L1561">        } catch (JAXBException ex) {</span>
<span class="nc" id="L1562">            System.err.println(&quot;Error writing XML for map settings: &quot; + ex.getMessage()); //$NON-NLS-1$</span>
<span class="nc" id="L1563">            ex.printStackTrace();</span>
<span class="fc" id="L1564">        }</span>
<span class="fc" id="L1565">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>