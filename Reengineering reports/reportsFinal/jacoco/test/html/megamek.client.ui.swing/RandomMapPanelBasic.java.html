<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RandomMapPanelBasic.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.client.ui.swing</a> &gt; <span class="el_source">RandomMapPanelBasic.java</span></div><h1>RandomMapPanelBasic.java</h1><pre class="source lang-java linenums">/*
 * MegaMek - Copyright (C) 2000-2011 Ben Mazur (bmazur@sev.org)
 *
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License as published by the Free
 *  Software Foundation; either version 2 of the License, or (at your option)
 *  any later version.
 *
 *  This program is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
 *  for more details.
 */
package megamek.client.ui.swing;

import megamek.client.ui.Messages;
import megamek.client.ui.swing.widget.CheckpointComboBox;
import megamek.common.MapSettings;

import javax.swing.*;
import java.awt.*;

/**
 * @author Deric &quot;Netzilla&quot; Page (deric dot page at usa dot net)
 * @since 3/13/14 3:55 PM
 */
public class RandomMapPanelBasic extends JPanel {

    private static final long serialVersionUID = -6971330721623187856L;
    
<span class="nc" id="L31">    private static final String NONE = Messages.getString(&quot;RandomMapDialog.uiNONE&quot;);</span>
<span class="nc" id="L32">    private static final String LOW = Messages.getString(&quot;RandomMapDialog.uiLow&quot;);</span>
<span class="nc" id="L33">    private static final String MEDIUM = Messages.getString(&quot;RandomMapDialog.uiMedium&quot;);</span>
<span class="nc" id="L34">    private static final String HIGH = Messages.getString(&quot;RandomMapDialog.uiHigh&quot;);</span>
<span class="nc" id="L35">    private static final String[] LOW_HIGH_CHOICES = new String[]{NONE, LOW, MEDIUM, HIGH};</span>

    private MapSettings mapSettings;

<span class="nc" id="L39">    private final JTabbedPane tabbedPane = new JTabbedPane(JTabbedPane.TOP, JTabbedPane.WRAP_TAB_LAYOUT);</span>

    // Civilization
    private static final String CT_HUB = &quot;HUB&quot;;
    private static final String CT_GRID = &quot;GRID&quot;;
    private static final String CT_METRO = &quot;METRO&quot;;
    private static final String CT_TOWN = &quot;TOWN&quot;;
<span class="nc" id="L46">    private static final String[] CT_CHOICES = new String[]{NONE, CT_GRID, CT_HUB, CT_METRO, CT_TOWN};</span>
<span class="nc" id="L47">    private final CheckpointComboBox&lt;String&gt; cityTypeCombo = new CheckpointComboBox&lt;&gt;(CT_CHOICES);</span>
<span class="nc" id="L48">    private final CheckpointComboBox&lt;String&gt; fortifiedCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L49">    private final CheckpointComboBox&lt;String&gt; pavementCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L50">    private final CheckpointComboBox&lt;String&gt; plantedFieldsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L51">    private final CheckpointComboBox&lt;String&gt; roadsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L52">    private final CheckpointComboBox&lt;String&gt; rubbleCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>

    // Elevation
<span class="nc" id="L55">    private final CheckpointComboBox&lt;String&gt; cliffsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L56">    private final CheckpointComboBox&lt;String&gt; cratersCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L57">    private final CheckpointComboBox&lt;String&gt; hillinessCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L58">    private final CheckpointComboBox&lt;String&gt; mountainCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>

    // Natural Features
<span class="nc" id="L61">    private final CheckpointComboBox&lt;String&gt; roughsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L62">    private final CheckpointComboBox&lt;String&gt; sandsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L63">    private final CheckpointComboBox&lt;String&gt; swampsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L64">    private final CheckpointComboBox&lt;String&gt; woodsCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L65">    private final CheckpointComboBox&lt;String&gt; foliageCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>

    // Water
<span class="nc" id="L68">    private final CheckpointComboBox&lt;String&gt; lakesCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L69">    private final CheckpointComboBox&lt;String&gt; riversCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>
<span class="nc" id="L70">    private final CheckpointComboBox&lt;String&gt; iceCombo = new CheckpointComboBox&lt;&gt;(LOW_HIGH_CHOICES);</span>

<span class="nc" id="L72">    public RandomMapPanelBasic(MapSettings mapSettings) {</span>
<span class="nc" id="L73">        setMapSettings(mapSettings);</span>

<span class="nc" id="L75">        initGUI();</span>
<span class="nc" id="L76">        validate();</span>
<span class="nc" id="L77">    }</span>

    private void initGUI() {
<span class="nc" id="L80">        JScrollPane civilizationPanel = setupCivilizationPanel();</span>
<span class="nc" id="L81">        tabbedPane.addTab(Messages.getString(&quot;RandomMapDialog.tabCivilization&quot;), civilizationPanel);</span>

<span class="nc" id="L83">        JScrollPane elevationPanel = setupElevationPanel();</span>
<span class="nc" id="L84">        tabbedPane.addTab(Messages.getString(&quot;RandomMapDialog.tabElevation&quot;), elevationPanel);</span>

<span class="nc" id="L86">        JScrollPane naturalFeaturesPanel = setupNaturalFeaturesPanel();</span>
<span class="nc" id="L87">        tabbedPane.addTab(Messages.getString(&quot;RandomMapDialog.tabNatural&quot;), naturalFeaturesPanel);</span>

<span class="nc" id="L89">        JScrollPane waterPanel = setupWaterPanel();</span>
<span class="nc" id="L90">        tabbedPane.addTab(Messages.getString(&quot;RandomMapDialog.tabWater&quot;), waterPanel);</span>

<span class="nc" id="L92">        tabbedPane.setSelectedComponent(civilizationPanel);</span>

<span class="nc" id="L94">        setLayout(new BorderLayout());</span>
<span class="nc" id="L95">        add(tabbedPane, BorderLayout.CENTER);</span>
<span class="nc" id="L96">    }</span>

    public void setMapSettings(MapSettings mapSettings) {
<span class="nc bnc" id="L99" title="All 2 branches missed.">        if (mapSettings == null) {</span>
<span class="nc" id="L100">            return;</span>
        }
<span class="nc" id="L102">        this.mapSettings = mapSettings;</span>
<span class="nc" id="L103">        loadMapSettings();</span>
<span class="nc" id="L104">    }</span>

    private void loadMapSettings() {
<span class="nc" id="L107">        lakesCombo.setSelectedItem(lakesToRange(this.mapSettings.getMinWaterSize(),</span>
<span class="nc" id="L108">                                                this.mapSettings.getMinWaterSpots(),</span>
<span class="nc" id="L109">                                                this.mapSettings.getProbDeep()));</span>
<span class="nc" id="L110">        lakesCombo.checkpoint();</span>
<span class="nc" id="L111">        riversCombo.setSelectedItem(percentageToRange(this.mapSettings.getProbRiver()));</span>
<span class="nc" id="L112">        riversCombo.checkpoint();</span>
<span class="nc" id="L113">        iceCombo.setSelectedItem(iceToRange(this.mapSettings.getMinIceSize(), this.mapSettings.getMinIceSpots()));</span>
<span class="nc" id="L114">        iceCombo.checkpoint();</span>
<span class="nc" id="L115">        roughsCombo.setSelectedItem(roughsToRange(this.mapSettings.getMinRoughSize(),</span>
<span class="nc" id="L116">                                                  this.mapSettings.getMinRoughSpots()));</span>
<span class="nc" id="L117">        roughsCombo.checkpoint();</span>
<span class="nc" id="L118">        sandsCombo.setSelectedItem(sandsToRange(this.mapSettings.getMinSandSize(),</span>
<span class="nc" id="L119">                                                this.mapSettings.getMinSandSpots()));</span>
<span class="nc" id="L120">        sandsCombo.checkpoint();</span>
<span class="nc" id="L121">        swampsCombo.setSelectedItem(swampsToRange(this.mapSettings.getMinSwampSize(),</span>
<span class="nc" id="L122">                                                  this.mapSettings.getMinSwampSpots()));</span>
<span class="nc" id="L123">        swampsCombo.checkpoint();</span>
<span class="nc" id="L124">        woodsCombo.setSelectedItem(woodsToRange(this.mapSettings.getMinForestSize(),</span>
<span class="nc" id="L125">                                                this.mapSettings.getMinForestSpots(),</span>
<span class="nc" id="L126">                                                this.mapSettings.getProbHeavy()));</span>
<span class="nc" id="L127">        woodsCombo.checkpoint();</span>
<span class="nc" id="L128">        foliageCombo.setSelectedItem(woodsToRange(this.mapSettings.getMinFoliageSize(),</span>
<span class="nc" id="L129">                this.mapSettings.getMinFoliageSpots(),</span>
<span class="nc" id="L130">                this.mapSettings.getProbFoliageHeavy()));</span>
<span class="nc" id="L131">        foliageCombo.checkpoint();</span>
<span class="nc" id="L132">        cliffsCombo.setSelectedItem(percentageToRange(this.mapSettings.getCliffs()));</span>
<span class="nc" id="L133">        cliffsCombo.checkpoint();</span>
<span class="nc" id="L134">        cratersCombo.setSelectedItem(cratersToRange(this.mapSettings.getProbCrater()));</span>
<span class="nc" id="L135">        cratersCombo.checkpoint();</span>
<span class="nc" id="L136">        hillinessCombo.setSelectedItem(percentageToRange(this.mapSettings.getHilliness()));</span>
<span class="nc" id="L137">        hillinessCombo.checkpoint();</span>
<span class="nc" id="L138">        mountainCombo.setSelectedItem(convertMountain(this.mapSettings.getMountainPeaks(),</span>
<span class="nc" id="L139">                                                      this.mapSettings.getMountainHeightMin(),</span>
<span class="nc" id="L140">                                                      this.mapSettings.getMountainWidthMin(),</span>
<span class="nc" id="L141">                                                      this.mapSettings.getMountainStyle()));</span>
<span class="nc" id="L142">        mountainCombo.checkpoint();</span>
<span class="nc" id="L143">        cityTypeCombo.setSelectedItem(this.mapSettings.getCityType());</span>
<span class="nc" id="L144">        cityTypeCombo.checkpoint();</span>
<span class="nc" id="L145">        fortifiedCombo.setSelectedItem(fortifiedToRange(this.mapSettings.getMinFortifiedSize(),</span>
<span class="nc" id="L146">                                                        this.mapSettings.getMinFortifiedSpots()));</span>
<span class="nc" id="L147">        fortifiedCombo.checkpoint();</span>
<span class="nc" id="L148">        pavementCombo.setSelectedItem(pavementToRange(this.mapSettings.getMinPavementSize(),</span>
<span class="nc" id="L149">                                                      this.mapSettings.getMinPavementSpots()));</span>
<span class="nc" id="L150">        pavementCombo.checkpoint();</span>
<span class="nc" id="L151">        plantedFieldsCombo.setSelectedItem(plantedFieldsToRange(this.mapSettings.getMinPlantedFieldSize(),</span>
<span class="nc" id="L152">                                                                this.mapSettings.getMinPlantedFieldSpots()));</span>
<span class="nc" id="L153">        plantedFieldsCombo.checkpoint();</span>
<span class="nc" id="L154">        roadsCombo.setSelectedItem(percentageToRange(this.mapSettings.getProbRoad()));</span>
<span class="nc" id="L155">        roadsCombo.checkpoint();</span>
<span class="nc" id="L156">        rubbleCombo.setSelectedItem(rubbleToRange(this.mapSettings.getMinRubbleSize(),</span>
<span class="nc" id="L157">                                                  this.mapSettings.getMinRubbleSpots()));</span>
<span class="nc" id="L158">        rubbleCombo.checkpoint();</span>
<span class="nc" id="L159">    }</span>

    private JScrollPane setupWaterPanel() {

<span class="nc" id="L163">        JPanel panel = new JPanel(new SpringLayout());</span>

<span class="nc" id="L165">        final JLabel lakesLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labLakes&quot;));</span>
<span class="nc" id="L166">        panel.add(lakesLabel);</span>
<span class="nc" id="L167">        lakesCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.lakesCombo.toolTip&quot;));</span>
<span class="nc" id="L168">        panel.add(lakesCombo);</span>

<span class="nc" id="L170">        final JLabel riversLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labRivers&quot;));</span>
<span class="nc" id="L171">        panel.add(riversLabel);</span>
<span class="nc" id="L172">        riversCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.riversCombo.toolTip&quot;));</span>
<span class="nc" id="L173">        panel.add(riversCombo);</span>
        
<span class="nc" id="L175">        final JLabel iceLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labIce&quot;));</span>
<span class="nc" id="L176">        panel.add(iceLabel);</span>
<span class="nc" id="L177">        iceCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.iceCombo.toolTip&quot;));</span>
<span class="nc" id="L178">        panel.add(iceCombo);</span>

<span class="nc" id="L180">        makeCompactGrid(panel, 3, 2, 6, 6, 6, 6);</span>
<span class="nc" id="L181">        return new JScrollPane(panel);</span>
    }
    

    private String iceToRange(int minSize, int minSpots) {
<span class="nc" id="L186">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String lakesToRange(int minSize, int minSpots, int percentDeep) {
<span class="nc" id="L190">        int range = percentDeep + (minSize * 5) + (minSpots * 10);</span>
<span class="nc" id="L191">        return convert(range, 20, 65, 100);</span>
    }
    
    private String convert(int value, int low, int med, int high) {
<span class="nc bnc" id="L195" title="All 2 branches missed.">        if (value &gt;= high) {</span>
<span class="nc" id="L196">            return HIGH;</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">        } else if (value &gt;= med) {</span>
<span class="nc" id="L198">            return MEDIUM;</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">        } else if (value &gt;= low) {</span>
<span class="nc" id="L200">            return LOW;</span>
        }
<span class="nc" id="L202">        return NONE;</span>
    }

    private JScrollPane setupNaturalFeaturesPanel() {
<span class="nc" id="L206">        JPanel panel = new JPanel(new SpringLayout());</span>
        
<span class="nc" id="L208">        final JLabel roughsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labRough&quot;));</span>
<span class="nc" id="L209">        panel.add(roughsLabel);</span>
<span class="nc" id="L210">        roughsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.roughsCombo.toolTip&quot;));</span>
<span class="nc" id="L211">        panel.add(roughsCombo);</span>

<span class="nc" id="L213">        final JLabel sandsLabel = new JLabel(Messages.getString((&quot;RandomMapDialog.labSand&quot;)));</span>
<span class="nc" id="L214">        panel.add(sandsLabel);</span>
<span class="nc" id="L215">        sandsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.sandsCombo.toolTip&quot;));</span>
<span class="nc" id="L216">        panel.add(sandsCombo);</span>

<span class="nc" id="L218">        final JLabel swampsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labSwamp&quot;));</span>
<span class="nc" id="L219">        panel.add(swampsLabel);</span>
<span class="nc" id="L220">        swampsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.swampsCombo.toolTip&quot;));</span>
<span class="nc" id="L221">        panel.add(swampsCombo);</span>

<span class="nc" id="L223">        final JLabel woodsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labWoods&quot;));</span>
<span class="nc" id="L224">        panel.add(woodsLabel);</span>
<span class="nc" id="L225">        woodsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.woodsCombo.toolTip&quot;));</span>
<span class="nc" id="L226">        panel.add(woodsCombo);</span>

<span class="nc" id="L228">        final JLabel foliageLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labFoliage&quot;));</span>
<span class="nc" id="L229">        panel.add(foliageLabel);</span>
<span class="nc" id="L230">        foliageCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.foliageCombo.toolTip&quot;));</span>
<span class="nc" id="L231">        panel.add(foliageCombo);</span>
        
<span class="nc" id="L233">        makeCompactGrid(panel, 5, 2, 6, 6, 6, 6);</span>
<span class="nc" id="L234">        return new JScrollPane(panel);</span>
    }

    private String roughsToRange(int minSize, int minSpots) {
<span class="nc" id="L238">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String sandsToRange(int minSize, int minSpots) {
<span class="nc" id="L242">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String swampsToRange(int minSize, int minSpots) {
<span class="nc" id="L246">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String woodsToRange(int minSize, int minSpots, int percentHeavy) {
<span class="nc" id="L250">        return convert(percentHeavy + (minSize * 5) + (minSpots * 6), 50, 65, 100);</span>
    }

    private JScrollPane setupElevationPanel() {
<span class="nc" id="L254">        JPanel panel = new JPanel(new SpringLayout());</span>

<span class="nc" id="L256">        final JLabel cliffsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labCliffs&quot;));</span>
<span class="nc" id="L257">        panel.add(cliffsLabel);</span>
<span class="nc" id="L258">        cliffsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.cliffsCombo.toolTip&quot;));</span>
<span class="nc" id="L259">        panel.add(cliffsCombo);</span>

<span class="nc" id="L261">        final JLabel cratersLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labCraters&quot;));</span>
<span class="nc" id="L262">        panel.add(cratersLabel);</span>
<span class="nc" id="L263">        cratersCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.cratersCombo.toolTip&quot;));</span>
<span class="nc" id="L264">        panel.add(cratersCombo);</span>

<span class="nc" id="L266">        final JLabel hillinessLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labElevation&quot;));</span>
<span class="nc" id="L267">        panel.add(hillinessLabel);</span>
<span class="nc" id="L268">        hillinessCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.hillinessCombo.toolTip&quot;));</span>
<span class="nc" id="L269">        panel.add(hillinessCombo);</span>

<span class="nc" id="L271">        final JLabel mountainLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labMountain&quot;));</span>
<span class="nc" id="L272">        panel.add(mountainLabel);</span>
<span class="nc" id="L273">        mountainCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.mountainCombo.toolTip&quot;));</span>
<span class="nc" id="L274">        panel.add(mountainCombo);</span>
        
<span class="nc" id="L276">        makeCompactGrid(panel, 4, 2, 6, 6, 6, 6);</span>
<span class="nc" id="L277">        return new JScrollPane(panel);</span>
    }

    private String cratersToRange(int craterProbability) {
<span class="nc" id="L281">        return convert(craterProbability, 15, 40, 60);</span>
    }

    private String convertMountain(int peaks, int minHeight, int minWidth, int style) {
<span class="nc bnc" id="L285" title="All 2 branches missed.">        if (MapSettings.MOUNTAIN_SNOWCAPPED == style) {</span>
<span class="nc" id="L286">            return HIGH;</span>
        }

<span class="nc bnc" id="L289" title="All 2 branches missed.">        if (minWidth &gt;= 10) {</span>
<span class="nc" id="L290">            return HIGH;</span>
        }

<span class="nc bnc" id="L293" title="All 2 branches missed.">        if (minHeight &gt;= 8) {</span>
<span class="nc" id="L294">            return HIGH;</span>
        }
<span class="nc bnc" id="L296" title="All 2 branches missed.">        if (minHeight &gt;= 6) {</span>
<span class="nc" id="L297">            return MEDIUM;</span>
        }

<span class="nc bnc" id="L300" title="All 2 branches missed.">        if (peaks &lt; 1) {</span>
<span class="nc" id="L301">            return NONE;</span>
        }

<span class="nc" id="L304">        return LOW;</span>
    }

    private String percentageToRange(int value) {
<span class="nc" id="L308">        return convert(value, 15, 40, 60);</span>
    }

    private String fortifiedToRange(int minSize, int minSpots) {
<span class="nc" id="L312">        return convert(minSize + minSpots, 2, 3, 5);</span>
    }

    private String pavementToRange(int minSize, int minSpots) {
<span class="nc" id="L316">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String plantedFieldsToRange(int minSize, int minSpots) {
<span class="nc" id="L320">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private String rubbleToRange(int minSize, int minSpots) {
<span class="nc" id="L324">        return convert(minSize + minSpots, 2, 4, 6);</span>
    }

    private JScrollPane setupCivilizationPanel() {
<span class="nc" id="L328">        JPanel panel = new JPanel(new SpringLayout());</span>
        
<span class="nc" id="L330">        final JLabel cityTypeLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labCity&quot;));</span>
<span class="nc" id="L331">        panel.add(cityTypeLabel);</span>
<span class="nc" id="L332">        cityTypeCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.cityTypeCombo.toolTip&quot;));</span>
<span class="nc" id="L333">        panel.add(cityTypeCombo);</span>

<span class="nc" id="L335">        final JLabel fortifiedLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labFortified&quot;));</span>
<span class="nc" id="L336">        panel.add(fortifiedLabel);</span>
<span class="nc" id="L337">        fortifiedCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.fortifiedCombo.toolTip&quot;));</span>
<span class="nc" id="L338">        panel.add(fortifiedCombo);</span>

<span class="nc" id="L340">        final JLabel pavementLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labPavement&quot;));</span>
<span class="nc" id="L341">        panel.add(pavementLabel);</span>
<span class="nc" id="L342">        pavementCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.pavementCombo.toolTip&quot;));</span>
<span class="nc" id="L343">        panel.add(pavementCombo);</span>

<span class="nc" id="L345">        final JLabel plantedFieldsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labPlantedField&quot;));</span>
<span class="nc" id="L346">        panel.add(plantedFieldsLabel);</span>
<span class="nc" id="L347">        plantedFieldsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.plantedFieldsCombo.toolTip&quot;));</span>
<span class="nc" id="L348">        panel.add(plantedFieldsCombo);</span>

<span class="nc" id="L350">        final JLabel roadsLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labRoads&quot;));</span>
<span class="nc" id="L351">        panel.add(roadsLabel);</span>
<span class="nc" id="L352">        roadsCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.roadsCombo.toolTip&quot;));</span>
<span class="nc" id="L353">        panel.add(roadsCombo);</span>

<span class="nc" id="L355">        final JLabel rubbleLabel = new JLabel(Messages.getString(&quot;RandomMapDialog.labRubble&quot;));</span>
<span class="nc" id="L356">        panel.add(rubbleLabel);</span>
<span class="nc" id="L357">        rubbleCombo.setToolTipText(Messages.getString(&quot;RandomMapDialog.rubbleCombo.toolTip&quot;));</span>
<span class="nc" id="L358">        panel.add(rubbleCombo);</span>
        
<span class="nc" id="L360">        makeCompactGrid(panel, 6, 2, 6, 6, 6, 6);</span>
<span class="nc" id="L361">        return new JScrollPane(panel);</span>
    }

    public MapSettings getMapSettings() {
<span class="nc" id="L365">        MapSettings newMapSettings = MapSettings.getInstance(mapSettings);</span>
        String value;
<span class="nc" id="L367">        boolean anyChanges = false;</span>

<span class="nc bnc" id="L369" title="All 2 branches missed.">        if (hillinessCombo.hasChanged()) {</span>
<span class="nc" id="L370">            value = (String) hillinessCombo.getSelectedItem();</span>
<span class="nc" id="L371">            setupHills(value, newMapSettings);</span>
<span class="nc" id="L372">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L375" title="All 2 branches missed.">        if (cliffsCombo.hasChanged()) {</span>
<span class="nc" id="L376">            value = (String) cliffsCombo.getSelectedItem();</span>
<span class="nc" id="L377">            newMapSettings.setCliffParam(rangeToPercentage(value));</span>
<span class="nc" id="L378">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L381" title="All 2 branches missed.">        if (woodsCombo.hasChanged()) {</span>
<span class="nc" id="L382">            value = (String) woodsCombo.getSelectedItem();</span>
<span class="nc" id="L383">            setupWoods(value, newMapSettings);</span>
<span class="nc" id="L384">            anyChanges = true;</span>
        }
        
<span class="nc bnc" id="L387" title="All 2 branches missed.">        if (foliageCombo.hasChanged()) {</span>
<span class="nc" id="L388">            value = (String) foliageCombo.getSelectedItem();</span>
<span class="nc" id="L389">            setupFoliage(value, newMapSettings);</span>
<span class="nc" id="L390">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L393" title="All 2 branches missed.">        if (lakesCombo.hasChanged()) {</span>
<span class="nc" id="L394">            value = (String) lakesCombo.getSelectedItem();</span>
<span class="nc" id="L395">            setupLakes(value, newMapSettings);</span>
<span class="nc" id="L396">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L399" title="All 2 branches missed.">        if (roughsCombo.hasChanged()) {</span>
<span class="nc" id="L400">            value = (String) roughsCombo.getSelectedItem();</span>
<span class="nc" id="L401">            setupRoughs(value, newMapSettings);</span>
<span class="nc" id="L402">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L405" title="All 2 branches missed.">        if (sandsCombo.hasChanged()) {</span>
<span class="nc" id="L406">            value = (String) sandsCombo.getSelectedItem();</span>
<span class="nc" id="L407">            setupSand(value, newMapSettings);</span>
<span class="nc" id="L408">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L411" title="All 2 branches missed.">        if (plantedFieldsCombo.hasChanged()) {</span>
<span class="nc" id="L412">            value = (String) plantedFieldsCombo.getSelectedItem();</span>
<span class="nc" id="L413">            setupPlantedFields(value, newMapSettings);</span>
<span class="nc" id="L414">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L417" title="All 2 branches missed.">        if (swampsCombo.hasChanged()) {</span>
<span class="nc" id="L418">            value = (String) swampsCombo.getSelectedItem();</span>
<span class="nc" id="L419">            setupSwamps(value, newMapSettings);</span>
<span class="nc" id="L420">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L423" title="All 2 branches missed.">        if (pavementCombo.hasChanged()) {</span>
<span class="nc" id="L424">            value = (String) pavementCombo.getSelectedItem();</span>
<span class="nc" id="L425">            setupPavement(value, newMapSettings);</span>
<span class="nc" id="L426">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L429" title="All 2 branches missed.">        if (rubbleCombo.hasChanged()) {</span>
<span class="nc" id="L430">            value = (String) rubbleCombo.getSelectedItem();</span>
<span class="nc" id="L431">            setupRubble(value, newMapSettings);</span>
<span class="nc" id="L432">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L435" title="All 2 branches missed.">        if (fortifiedCombo.hasChanged()) {</span>
<span class="nc" id="L436">            value = (String) fortifiedCombo.getSelectedItem();</span>
<span class="nc" id="L437">            setupFortified(value, newMapSettings);</span>
<span class="nc" id="L438">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L441" title="All 2 branches missed.">        if (iceCombo.hasChanged()) {</span>
<span class="nc" id="L442">            value = (String) iceCombo.getSelectedItem();</span>
<span class="nc" id="L443">            setupIce(value, newMapSettings);</span>
<span class="nc" id="L444">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L447" title="All 2 branches missed.">        if (roadsCombo.hasChanged()) {</span>
<span class="nc" id="L448">            value = (String) roadsCombo.getSelectedItem();</span>
<span class="nc" id="L449">            newMapSettings.setRoadParam(rangeToPercentage(value));</span>
<span class="nc" id="L450">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L453" title="All 2 branches missed.">        if (riversCombo.hasChanged()) {</span>
<span class="nc" id="L454">            value = (String) riversCombo.getSelectedItem();</span>
<span class="nc" id="L455">            newMapSettings.setRiverParam(rangeToPercentage(value));</span>
<span class="nc" id="L456">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L459" title="All 2 branches missed.">        if (cratersCombo.hasChanged()) {</span>
<span class="nc" id="L460">            value = (String) cratersCombo.getSelectedItem();</span>
<span class="nc" id="L461">            setupCraters(value, newMapSettings);</span>
<span class="nc" id="L462">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L465" title="All 2 branches missed.">        if (mountainCombo.hasChanged()) {</span>
<span class="nc" id="L466">            value = (String) mountainCombo.getSelectedItem();</span>
<span class="nc" id="L467">            setupMountains(value, newMapSettings);</span>
<span class="nc" id="L468">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L471" title="All 2 branches missed.">        if (cityTypeCombo.hasChanged()) {</span>
<span class="nc" id="L472">            value = (String) cityTypeCombo.getSelectedItem();</span>
<span class="nc" id="L473">            setupCity(value, newMapSettings);</span>
<span class="nc" id="L474">            anyChanges = true;</span>
        }

<span class="nc bnc" id="L477" title="All 2 branches missed.">        if (anyChanges) {</span>
<span class="nc" id="L478">            newMapSettings.setAlgorithmToUse(0);</span>
<span class="nc" id="L479">            newMapSettings.setSpecialFX(0, 0, 0, 0, 0);</span>
<span class="nc" id="L480">            newMapSettings.setInvertNegativeTerrain(0);</span>
<span class="nc" id="L481">            return newMapSettings;</span>
        }

<span class="nc" id="L484">        return mapSettings;</span>
    }

    private void setupCity(String cityType, MapSettings mapSettings) {
<span class="nc bnc" id="L488" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(cityType)) {</span>
<span class="nc" id="L489">            mapSettings.setCityParams(0, cityType, 0, 0, 0, 0, 0, 0);</span>
<span class="nc bnc" id="L490" title="All 2 branches missed.">        } else if (NONE.equalsIgnoreCase(cityType)) {</span>
<span class="nc" id="L491">            mapSettings.setCityParams(3, cityType, 10, 50, 1, 3, 75, 60);</span>
        } else {
<span class="nc" id="L493">            mapSettings.setCityParams(16, cityType, 10, 100, 1, 6, 75, 60);</span>
        }
<span class="nc" id="L495">    }</span>

    private void setupMountains(String mountainsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L498" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(mountainsValue)) {</span>
<span class="nc" id="L499">            mapSettings.setMountainParams(0, 7, 10, 4, 6, 0);</span>
<span class="nc bnc" id="L500" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(mountainsValue)) {</span>
<span class="nc" id="L501">            mapSettings.setMountainParams(1, 7, 10, 4, 6, 0);</span>
<span class="nc bnc" id="L502" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(mountainsValue)) {</span>
<span class="nc" id="L503">            mapSettings.setMountainParams(2, 7, 10, 6, 8, 0);</span>
        } else {
<span class="nc" id="L505">            mapSettings.setMountainParams(3, 9, 14, 8, 10, MapSettings.MOUNTAIN_SNOWCAPPED);</span>
        }
<span class="nc" id="L507">    }</span>

    private void setupCraters(String cratersValue, MapSettings mapSettings) {
<span class="nc bnc" id="L510" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(cratersValue)) {</span>
<span class="nc" id="L511">            mapSettings.setCraterParam(0, 0, 0, 0, 0);</span>
<span class="nc bnc" id="L512" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(cratersValue)) {</span>
<span class="nc" id="L513">            mapSettings.setCraterParam(25, 1, 3, 1, 3);</span>
<span class="nc bnc" id="L514" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(cratersValue)) {</span>
<span class="nc" id="L515">            mapSettings.setCraterParam(50, 3, 8, 1, 5);</span>
        } else {
<span class="nc" id="L517">            mapSettings.setCraterParam(75, 6, 14, 3, 9);</span>
        }
<span class="nc" id="L519">    }</span>

    private void setupIce(String iceValue, MapSettings mapSettings) {
<span class="nc bnc" id="L522" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(iceValue)) {</span>
<span class="nc" id="L523">            mapSettings.setIceParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(iceValue)) {</span>
<span class="nc" id="L525">            mapSettings.setIceParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L526" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(iceValue)) {</span>
<span class="nc" id="L527">            mapSettings.setIceParams(2, 5, 3, 8);</span>
        } else {
<span class="nc" id="L529">            mapSettings.setIceParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L531">    }</span>

    private void setupFortified(String fortifiedValue, MapSettings mapSettings) {
<span class="nc bnc" id="L534" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(fortifiedValue)) {</span>
<span class="nc" id="L535">            mapSettings.setFortifiedParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L536" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(fortifiedValue)) {</span>
<span class="nc" id="L537">            mapSettings.setFortifiedParams(1, 2, 1, 2);</span>
<span class="nc bnc" id="L538" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(fortifiedValue)) {</span>
<span class="nc" id="L539">            mapSettings.setFortifiedParams(2, 4, 2, 3);</span>
        } else {
<span class="nc" id="L541">            mapSettings.setFortifiedParams(2, 4, 3, 6);</span>
        }
<span class="nc" id="L543">    }</span>

    private void setupRubble(String rubbleValue, MapSettings mapSettings) {
<span class="nc bnc" id="L546" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(rubbleValue)) {</span>
<span class="nc" id="L547">            mapSettings.setRubbleParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(rubbleValue)) {</span>
<span class="nc" id="L549">            mapSettings.setRubbleParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L550" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(rubbleValue)) {</span>
<span class="nc" id="L551">            mapSettings.setRubbleParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L553">            mapSettings.setRubbleParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L555">    }</span>

    private void setupPavement(String pavementValue, MapSettings mapSettings) {
<span class="nc bnc" id="L558" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(pavementValue)) {</span>
<span class="nc" id="L559">            mapSettings.setPavementParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L560" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(pavementValue)) {</span>
<span class="nc" id="L561">            mapSettings.setPavementParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L562" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(pavementValue)) {</span>
<span class="nc" id="L563">            mapSettings.setPavementParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L565">            mapSettings.setPavementParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L567">    }</span>

    private void setupSwamps(String swampsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L570" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(swampsValue)) {</span>
<span class="nc" id="L571">            mapSettings.setSwampParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L572" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(swampsValue)) {</span>
<span class="nc" id="L573">            mapSettings.setSwampParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(swampsValue)) {</span>
<span class="nc" id="L575">            mapSettings.setSwampParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L577">            mapSettings.setSwampParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L579">    }</span>

    private void setupPlantedFields(String fieldsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L582" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(fieldsValue)) {</span>
<span class="nc" id="L583">            mapSettings.setPlantedFieldParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L584" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(fieldsValue)) {</span>
<span class="nc" id="L585">            mapSettings.setPlantedFieldParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L586" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(fieldsValue)) {</span>
<span class="nc" id="L587">            mapSettings.setPlantedFieldParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L589">            mapSettings.setPlantedFieldParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L591">    }</span>

    private void setupSand(String sandsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L594" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(sandsValue)) {</span>
<span class="nc" id="L595">            mapSettings.setSandParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L596" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(sandsValue)) {</span>
<span class="nc" id="L597">            mapSettings.setSandParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L598" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(sandsValue)) {</span>
<span class="nc" id="L599">            mapSettings.setSandParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L601">            mapSettings.setSandParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L603">    }</span>

    private void setupRoughs(String roughsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L606" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(roughsValue)) {</span>
<span class="nc" id="L607">            mapSettings.setRoughParams(0, 0, 0, 0);</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(roughsValue)) {</span>
<span class="nc" id="L609">            mapSettings.setRoughParams(2, 6, 1, 2);</span>
<span class="nc bnc" id="L610" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(roughsValue)) {</span>
<span class="nc" id="L611">            mapSettings.setRoughParams(3, 8, 2, 5);</span>
        } else {
<span class="nc" id="L613">            mapSettings.setRoughParams(5, 10, 3, 7);</span>
        }
<span class="nc" id="L615">    }</span>

    private void setupLakes(String lakesValue, MapSettings mapSettings) {
<span class="nc bnc" id="L618" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(lakesValue)) {</span>
<span class="nc" id="L619">            mapSettings.setWaterParams(0, 0, 0, 0, 0);</span>
<span class="nc bnc" id="L620" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(lakesValue)) {</span>
<span class="nc" id="L621">            mapSettings.setWaterParams(1, 5, 1, 5, 20);</span>
<span class="nc bnc" id="L622" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(lakesValue)) {</span>
<span class="nc" id="L623">            mapSettings.setWaterParams(2, 5, 6, 10, 30);</span>
        } else {
<span class="nc" id="L625">            mapSettings.setWaterParams(3, 6, 8, 15, 45);</span>
        }
<span class="nc" id="L627">    }</span>

    private void setupWoods(String woodsValue, MapSettings mapSettings) {
<span class="nc bnc" id="L630" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(woodsValue)) {</span>
<span class="nc" id="L631">            mapSettings.setForestParams(0, 0, 0, 0, 0);</span>
<span class="nc bnc" id="L632" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(woodsValue)) {</span>
<span class="nc" id="L633">            mapSettings.setForestParams(3, 6, 3, 6, 20);</span>
<span class="nc bnc" id="L634" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(woodsValue)) {</span>
<span class="nc" id="L635">            mapSettings.setForestParams(4, 8, 3, 10, 30);</span>
        } else {
<span class="nc" id="L637">            mapSettings.setForestParams(6, 10, 8, 13, 45);</span>
        }
<span class="nc" id="L639">    }</span>
    
    private void setupFoliage(String foliageValue, MapSettings mapSettings) {
<span class="nc bnc" id="L642" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(foliageValue)) {</span>
<span class="nc" id="L643">            mapSettings.setFoliageParams(0, 0, 0, 0, 0);</span>
<span class="nc bnc" id="L644" title="All 2 branches missed.">        } else if (LOW.equalsIgnoreCase(foliageValue)) {</span>
<span class="nc" id="L645">            mapSettings.setFoliageParams(3, 6, 3, 6, 20);</span>
<span class="nc bnc" id="L646" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(foliageValue)) {</span>
<span class="nc" id="L647">            mapSettings.setFoliageParams(4, 8, 3, 10, 30);</span>
        } else {
<span class="nc" id="L649">            mapSettings.setFoliageParams(6, 10, 8, 13, 45);</span>
        }
<span class="nc" id="L651">    }</span>

    private void setupHills(String hillsValue, MapSettings mapSettings) {
<span class="nc" id="L654">        int percent = rangeToPercentage(hillsValue);</span>
<span class="nc" id="L655">        int range = 0;</span>
<span class="nc bnc" id="L656" title="All 2 branches missed.">        if (LOW.equalsIgnoreCase(hillsValue)) {</span>
<span class="nc" id="L657">            range = 3;</span>
<span class="nc bnc" id="L658" title="All 2 branches missed.">        } else if (MEDIUM.equalsIgnoreCase(hillsValue)) {</span>
<span class="nc" id="L659">            range = 5;</span>
<span class="nc bnc" id="L660" title="All 2 branches missed.">        } else if (HIGH.equalsIgnoreCase(hillsValue)) {</span>
<span class="nc" id="L661">            range = 8;</span>
        }
<span class="nc" id="L663">        mapSettings.setElevationParams(percent, range, 0);</span>
<span class="nc" id="L664">    }</span>

    private int rangeToPercentage(String range) {
<span class="nc bnc" id="L667" title="All 2 branches missed.">        if (NONE.equalsIgnoreCase(range)) {</span>
<span class="nc" id="L668">            return 0;</span>
        }
<span class="nc bnc" id="L670" title="All 2 branches missed.">        if (LOW.equals(range)) {</span>
<span class="nc" id="L671">            return 25;</span>
        }
<span class="nc bnc" id="L673" title="All 2 branches missed.">        if (MEDIUM.equals(range)) {</span>
<span class="nc" id="L674">            return 50;</span>
        }
<span class="nc" id="L676">        return 75;</span>
    }
    
    /**
     * From https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringGridProject/src/layout/SpringUtilities.java
     * 
     * Aligns the first &lt;code&gt;rows&lt;/code&gt; * &lt;code&gt;cols&lt;/code&gt;
     * components of &lt;code&gt;parent&lt;/code&gt; in
     * a grid. Each component in a column is as wide as the maximum
     * preferred width of the components in that column;
     * height is similarly determined for each row.
     * The parent is made just big enough to fit them all.
     *
     * @param rows number of rows
     * @param cols number of columns
     * @param initialX x location to start the grid at
     * @param initialY y location to start the grid at
     * @param xPad x padding between cells
     * @param yPad y padding between cells
     */
    public static void makeCompactGrid(Container parent,
            int rows, int cols,
            int initialX, int initialY,
            int xPad, int yPad) {
        SpringLayout layout;
        try {
<span class="nc" id="L702">            layout = (SpringLayout)parent.getLayout();</span>
<span class="nc" id="L703">        } catch (ClassCastException exc) {</span>
<span class="nc" id="L704">            System.err.println(&quot;The first argument to makeCompactGrid must use SpringLayout.&quot;);</span>
<span class="nc" id="L705">            return;</span>
<span class="nc" id="L706">        }</span>

        //Align all cells in each column and make them the same width.
<span class="nc" id="L709">        Spring x = Spring.constant(initialX);</span>
<span class="nc bnc" id="L710" title="All 2 branches missed.">        for (int c = 0; c &lt; cols; c++) {</span>
<span class="nc" id="L711">            Spring width = Spring.constant(0);</span>
<span class="nc bnc" id="L712" title="All 2 branches missed.">            for (int r = 0; r &lt; rows; r++) {</span>
<span class="nc" id="L713">                width = Spring.max(width,</span>
<span class="nc" id="L714">                        getConstraintsForCell(r, c, parent, cols).</span>
<span class="nc" id="L715">                        getWidth());</span>
            }
<span class="nc bnc" id="L717" title="All 2 branches missed.">            for (int r = 0; r &lt; rows; r++) {</span>
<span class="nc" id="L718">                SpringLayout.Constraints constraints =</span>
<span class="nc" id="L719">                        getConstraintsForCell(r, c, parent, cols);</span>
<span class="nc" id="L720">                constraints.setX(x);</span>
<span class="nc" id="L721">                constraints.setWidth(width);</span>
            }
<span class="nc" id="L723">            x = Spring.sum(x, Spring.sum(width, Spring.constant(xPad)));</span>
        }

        //Align all cells in each row and make them the same height.
<span class="nc" id="L727">        Spring y = Spring.constant(initialY);</span>
<span class="nc bnc" id="L728" title="All 2 branches missed.">        for (int r = 0; r &lt; rows; r++) {</span>
<span class="nc" id="L729">            Spring height = Spring.constant(0);</span>
<span class="nc bnc" id="L730" title="All 2 branches missed.">            for (int c = 0; c &lt; cols; c++) {</span>
<span class="nc" id="L731">                height = Spring.max(height,</span>
<span class="nc" id="L732">                        getConstraintsForCell(r, c, parent, cols).</span>
<span class="nc" id="L733">                        getHeight());</span>
            }
<span class="nc bnc" id="L735" title="All 2 branches missed.">            for (int c = 0; c &lt; cols; c++) {</span>
<span class="nc" id="L736">                SpringLayout.Constraints constraints =</span>
<span class="nc" id="L737">                        getConstraintsForCell(r, c, parent, cols);</span>
<span class="nc" id="L738">                constraints.setY(y);</span>
<span class="nc" id="L739">                constraints.setHeight(height);</span>
            }
<span class="nc" id="L741">            y = Spring.sum(y, Spring.sum(height, Spring.constant(yPad)));</span>
        }

        //Set the parent's size.
<span class="nc" id="L745">        SpringLayout.Constraints pCons = layout.getConstraints(parent);</span>
<span class="nc" id="L746">        pCons.setConstraint(SpringLayout.SOUTH, y);</span>
<span class="nc" id="L747">        pCons.setConstraint(SpringLayout.EAST, x);</span>
<span class="nc" id="L748">    }</span>

    private static SpringLayout.Constraints getConstraintsForCell(
            int row, int col,
            Container parent,
            int cols) {
<span class="nc" id="L754">        SpringLayout layout = (SpringLayout) parent.getLayout();</span>
<span class="nc" id="L755">        Component c = parent.getComponent(row * cols + col);</span>
<span class="nc" id="L756">        return layout.getConstraints(c);</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>