<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CommonMenuBar.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.client.ui.swing</a> &gt; <span class="el_source">CommonMenuBar.java</span></div><h1>CommonMenuBar.java</h1><pre class="source lang-java linenums">/*
 * MegaMek - Copyright (C) 2003,2004,2005 Ben Mazur (bmazur@sev.org)
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License as published by the Free
 *  Software Foundation; either version 2 of the License, or (at your option)
 *  any later version.
 *
 *  This program is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
 *  for more details.
 */
package megamek.client.ui.swing;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.InputEvent;
import java.awt.event.KeyEvent;
import java.util.Enumeration;
import java.util.Vector;

import javax.swing.JCheckBoxMenuItem;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.KeyStroke;

import megamek.client.Client;
import megamek.client.ui.Messages;
import megamek.common.Entity;
import megamek.common.IGame;
import megamek.common.WeaponOrderHandler;
import megamek.common.Entity.WeaponSortOrder;
import megamek.common.preference.IPreferenceChangeListener;
import megamek.common.preference.PreferenceChangeEvent;

/**
 * Every menu bar in MegaMek should have an identical look-and-feel, with
 * various menu items enabled or disabled, based upon the frame that owns the
 * menu bar, and the current state of the program.
 */
public class CommonMenuBar extends JMenuBar implements ActionListener,
        IPreferenceChangeListener {
    /**
     *
     */
    private static final long serialVersionUID = -3696211330827384307L;
    /**
     * The &lt;code&gt;Game&lt;/code&gt; current selected. This value may be
     * &lt;code&gt;null&lt;/code&gt;.
     */
    private IGame game;
    private JMenuItem fileGameNew;
    private JMenuItem fileGameOpen;
    private JMenuItem fileGameSave;
    private JMenuItem fileGameSaveServer;
    private JMenuItem fileGameScenario;
    private JMenuItem fileGameConnectBot;
    private JMenuItem fileGameConnect;
    private JMenuItem replacePlayer;
    /**
     * When we have a &lt;code&gt;Board&lt;/code&gt;, set this to &lt;code&gt;true&lt;/code&gt;.
     */
    private boolean hasBoard;
    private JMenuItem fileBoardNew;
    private JMenuItem fileBoardOpen;
    private JMenuItem fileBoardSave;
    private JMenuItem fileBoardSaveAs;
    private JMenuItem fileBoardSaveAsImage;
    private JMenuItem fileBoardSaveAsImageUnits;
    /**
     * When we have a unit list, set this to &lt;code&gt;true&lt;/code&gt;.
     */
    private boolean hasUnitList;
    private JMenuItem fileUnitsReinforce;
    private JMenuItem fileUnitsReinforceRAT;
    private JMenuItem fileRefreshCache;
    private JMenuItem fileUnitsOpen;
    private JMenuItem fileUnitsClear;
    private JMenuItem fileUnitsSave;
    /**
     * The &lt;code&gt;Entity&lt;/code&gt; current selected. This value may be
     * &lt;code&gt;null&lt;/code&gt;.
     */
    private Entity entity;
    /**
     * Record the current phase of the game.
     */
<span class="nc" id="L89">    private IGame.Phase phase = IGame.Phase.PHASE_UNKNOWN;</span>
    //private JMenuItem filePrint;
    private JMenuItem viewMiniMap;
    private JMenuItem viewMekDisplay;
    private JMenuItem viewAccessibilityWindow;
    private JCheckBoxMenuItem viewKeybindsOverlay;
    private JMenuItem viewZoomIn;
    private JMenuItem viewZoomOut;
    private JMenuItem viewResetWindowPositions;
    private JCheckBoxMenuItem toggleIsometric;
    private JCheckBoxMenuItem toggleFieldOfFire;
    private JCheckBoxMenuItem toggleFovHighlight;
    private JCheckBoxMenuItem toggleFovDarken;
    private JCheckBoxMenuItem toggleFiringSolutions;
    private JCheckBoxMenuItem viewMovementEnvelope;
    private JMenuItem viewMovModEnvelope;
    private JMenuItem viewChangeTheme;
    private JMenuItem viewLOSSetting;
    private JMenuItem viewUnitOverview;
    private JMenuItem viewRoundReport;
    private JMenuItem viewGameOptions;
    private JMenuItem viewClientSettings;
    private JMenuItem viewPlayerSettings;
    private JMenuItem viewPlayerList;
    private JMenuItem deployMinesConventional;
    private JMenuItem deployMinesCommand;
    private JMenuItem deployMinesVibrabomb;
    private JMenuItem deployMinesActive;
    private JMenuItem deployMinesInferno;
    private JMenuItem deployNext;
    private JMenuItem deployTurn;
    private JMenuItem deployLoad;
    private JMenuItem deployUnload;
    private JMenuItem deployRemove;
    private JMenuItem deployAssaultDrop;
    private JMenuItem moveWalk;
    private JMenuItem moveNext;
    private JMenuItem moveForwardIni;
    private JMenuItem moveTurn;
    private JMenuItem moveLayMine;
    private JMenuItem moveLoad;
    private JMenuItem moveUnload;
    private JMenuItem moveTow;
    private JMenuItem moveDisconnect;
    private JMenuItem moveJump;
    private JMenuItem moveSwim;
    private JMenuItem moveModeConvert;
    private JMenuItem moveBackUp;
    private JMenuItem moveCharge;
    private JMenuItem moveDFA;
    private JMenuItem moveGoProne;
    private JMenuItem moveFlee;
    private JMenuItem moveFlyOff;
    private JMenuItem moveEject;
    private JMenuItem moveUnjam;
    private JMenuItem moveSearchlight;
    private JMenuItem moveClear;
    private JMenuItem moveHullDown;
    private JMenuItem moveGetUp;
    private JMenuItem moveRaise;
    private JMenuItem moveLower;
    private JMenuItem moveReckless;
    private JMenuItem moveEvade;
    private JMenuItem moveBootlegger;
    private JMenuItem moveShutdown;
    private JMenuItem moveStartup;
    private JMenuItem moveSelfDestruct;
    //private JMenuItem moveTraitor;
    private JMenuItem moveAcc;
    private JMenuItem moveDec;
    private JMenuItem moveAccN;
    private JMenuItem moveDecN;
    private JMenuItem moveEvadeAero;
    private JMenuItem moveRoll;
    private JMenuItem moveLaunch;
    private JMenuItem moveRecover;
    private JMenuItem moveJoin;
    private JMenuItem moveDump;
    private JMenuItem moveRam;
    private JMenuItem moveHover;
    private JMenuItem moveManeuver;
    private JMenuItem moveTurnLeft;
    private JMenuItem moveTurnRight;
    private JMenuItem moveThrust;
    private JMenuItem moveYaw;
    private JMenuItem moveEndOver;
    private JMenuItem moveStrafe;
    private JMenuItem moveBomb;
    private JMenuItem fireFire;
    private JMenuItem fireSkip;
    private JMenuItem fireNextTarg;
    private JMenuItem fireNext;
    private JMenuItem fireTwist;
    private JMenuItem fireFlipArms;
    private JMenuItem fireMode;
    private JMenuItem fireCalled;
    private JMenuItem fireFindClub;
    private JMenuItem fireSpot;
    private JMenuItem fireSearchlight;
    private JMenuItem fireClearTurret;
    private JMenuItem fireClearWeaponJam;
    private JMenuItem fireStrafe;
    private JMenuItem fireSaveWeaponOrder;
    private JMenuItem fireCancel;
    private JMenuItem physicalNext;
    private JMenuItem physicalPunch;
    private JMenuItem physicalKick;
    private JMenuItem physicalPush;
    private JMenuItem physicalClub;
    private JMenuItem physicalBrushOff;
    private JMenuItem physicalDodge;
    private JMenuItem physicalThrash;
    private JMenuItem physicalProto;
    private JMenuItem physicalVibro;
    private Client client;
    /**
     * A &lt;code&gt;Vector&lt;/code&gt; containing the &lt;code&gt;ActionListener&lt;/code&gt;s
     * that have registered themselves with this menu bar.
     */
<span class="nc" id="L208">    private final Vector&lt;ActionListener&gt; actionListeners = new Vector&lt;&gt;();</span>

    /**
     * Create a MegaMek menu bar.
     */
    public CommonMenuBar(Client parent) {
<span class="nc" id="L214">        this();</span>
<span class="nc" id="L215">        client = parent;</span>
<span class="nc" id="L216">    }</span>

<span class="nc" id="L218">    public CommonMenuBar() {</span>
        JMenu menu;
        JMenu submenu;
        JMenu aeromenu;
        JMenuItem item;

        // *** Create the File menu.
<span class="nc" id="L225">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.FileMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L226">        menu.setMnemonic(KeyEvent.VK_F);</span>
<span class="nc" id="L227">        add(menu);</span>

        // Create the Game sub-menu.
<span class="nc" id="L230">        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.GameMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L231">        menu.add(submenu);</span>
<span class="nc" id="L232">        fileGameNew = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameNew&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L233">        fileGameNew.addActionListener(this);</span>
<span class="nc" id="L234">        fileGameNew.setActionCommand(ClientGUI.FILE_GAME_NEW);</span>
<span class="nc" id="L235">        fileGameNew.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N,</span>
<span class="nc" id="L236">                                                          getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L237">        submenu.add(fileGameNew);</span>
<span class="nc" id="L238">        fileGameOpen = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameOpen&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L239">        fileGameOpen.addActionListener(this);</span>
<span class="nc" id="L240">        fileGameOpen.setActionCommand(ClientGUI.FILE_GAME_OPEN);</span>
<span class="nc" id="L241">        submenu.add(fileGameOpen);</span>
<span class="nc" id="L242">        fileGameSave = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameSave&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L243">        fileGameSave.addActionListener(this);</span>
<span class="nc" id="L244">        fileGameSave.setActionCommand(ClientGUI.FILE_GAME_SAVE);</span>
<span class="nc" id="L245">        submenu.add(fileGameSave);</span>
<span class="nc" id="L246">        fileGameSaveServer = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameSaveServer&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L247">        fileGameSaveServer.addActionListener(this);</span>
<span class="nc" id="L248">        fileGameSaveServer.setActionCommand(ClientGUI.FILE_GAME_SAVE_SERVER);</span>
<span class="nc" id="L249">        submenu.add(fileGameSaveServer);</span>
<span class="nc" id="L250">        submenu.addSeparator();</span>
<span class="nc" id="L251">        fileGameScenario = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameScenario&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L252">        fileGameScenario.addActionListener(this);</span>
<span class="nc" id="L253">        fileGameScenario.setActionCommand(ClientGUI.FILE_GAME_SCENARIO);</span>
<span class="nc" id="L254">        submenu.add(fileGameScenario);</span>
<span class="nc" id="L255">        submenu.addSeparator();</span>
<span class="nc" id="L256">        fileGameConnectBot = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameConnectBot&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L257">        fileGameConnectBot.addActionListener(this);</span>
<span class="nc" id="L258">        fileGameConnectBot.setActionCommand(ClientGUI.FILE_GAME_CONNECT_BOT);</span>
<span class="nc" id="L259">        submenu.add(fileGameConnectBot);</span>
<span class="nc" id="L260">        fileGameConnect = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameConnect&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L261">        fileGameConnect.addActionListener(this);</span>
<span class="nc" id="L262">        fileGameConnect.setActionCommand(ClientGUI.FILE_GAME_CONNECT);</span>
<span class="nc" id="L263">        submenu.add(fileGameConnect);</span>
<span class="nc" id="L264">        replacePlayer = new JMenuItem(Messages.getString(&quot;CommonMenuBar.replacePlayer&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L265">        replacePlayer.addActionListener(this);</span>
<span class="nc" id="L266">        replacePlayer.setActionCommand(ClientGUI.FILE_GAME_REPLACE_PLAYER);</span>
<span class="nc" id="L267">        submenu.add(replacePlayer);</span>

        // Create the Board sub-menu.
<span class="nc" id="L270">        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.BoardMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L271">        menu.add(submenu);</span>
<span class="nc" id="L272">        fileBoardNew = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardNew&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L273">        fileBoardNew.addActionListener(this);</span>
<span class="nc" id="L274">        fileBoardNew.setActionCommand(ClientGUI.FILE_BOARD_NEW);</span>
<span class="nc" id="L275">        submenu.add(fileBoardNew);</span>
<span class="nc" id="L276">        fileBoardOpen = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardOpen&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L277">        fileBoardOpen.addActionListener(this);</span>
<span class="nc" id="L278">        fileBoardOpen.setActionCommand(ClientGUI.FILE_BOARD_OPEN);</span>
<span class="nc" id="L279">        submenu.add(fileBoardOpen);</span>
<span class="nc" id="L280">        fileBoardSave = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardSave&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L281">        fileBoardSave.addActionListener(this);</span>
<span class="nc" id="L282">        fileBoardSave.setActionCommand(ClientGUI.FILE_BOARD_SAVE);</span>
<span class="nc" id="L283">        submenu.add(fileBoardSave);</span>
<span class="nc" id="L284">        fileBoardSaveAs = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardSaveAs&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L285">        fileBoardSaveAs.addActionListener(this);</span>
<span class="nc" id="L286">        fileBoardSaveAs.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS);</span>
<span class="nc" id="L287">        submenu.add(fileBoardSaveAs);</span>
<span class="nc" id="L288">        fileBoardSaveAsImage = new JMenuItem(Messages</span>
<span class="nc" id="L289">                .getString(&quot;CommonMenuBar.fileBoardSaveAsImage&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L290">        fileBoardSaveAsImage.setToolTipText(Messages</span>
<span class="nc" id="L291">                .getString(&quot;CommonMenuBar.fileBoardSaveAsImage.tooltip&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L292">        fileBoardSaveAsImage.addActionListener(this);</span>
<span class="nc" id="L293">        fileBoardSaveAsImage.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS_IMAGE);</span>
<span class="nc" id="L294">        submenu.add(fileBoardSaveAsImage);</span>
<span class="nc" id="L295">        fileBoardSaveAsImageUnits = new JMenuItem(Messages</span>
<span class="nc" id="L296">                .getString(&quot;CommonMenuBar.fileBoardSaveAsImageUnits&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L297">        fileBoardSaveAsImage.setToolTipText(Messages</span>
<span class="nc" id="L298">                .getString(&quot;CommonMenuBar.fileBoardSaveAsImageUnits.tooltip&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L299">        fileBoardSaveAsImageUnits.addActionListener(this);</span>
<span class="nc" id="L300">        fileBoardSaveAsImageUnits.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS_IMAGE_UNITS);</span>
<span class="nc" id="L301">        submenu.add(fileBoardSaveAsImageUnits);</span>


        // Create the Unit List sub-menu.
<span class="nc" id="L305">        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.UnitListMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L306">        menu.add(submenu);</span>
<span class="nc" id="L307">        fileUnitsReinforce = new JMenuItem(Messages</span>
<span class="nc" id="L308">                .getString(&quot;CommonMenuBar.fileUnitsReinforce&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L309">        fileUnitsReinforce.addActionListener(this);</span>
<span class="nc" id="L310">        fileUnitsReinforce.setActionCommand(ClientGUI.FILE_UNITS_REINFORCE);</span>
<span class="nc" id="L311">        submenu.add(fileUnitsReinforce);</span>
<span class="nc" id="L312">        fileUnitsReinforceRAT = new JMenuItem(Messages</span>
<span class="nc" id="L313">                .getString(&quot;CommonMenuBar.fileUnitsReinforceRAT&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L314">        fileUnitsReinforceRAT.addActionListener(this);</span>
<span class="nc" id="L315">        fileUnitsReinforceRAT.setActionCommand(ClientGUI.FILE_UNITS_REINFORCE_RAT);</span>
<span class="nc" id="L316">        submenu.add(fileUnitsReinforceRAT);</span>
<span class="nc" id="L317">        fileRefreshCache = new JMenuItem(Messages</span>
<span class="nc" id="L318">                .getString(&quot;CommonMenuBar.fileUnitsRefreshUnitCache&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L319">        fileRefreshCache.addActionListener(this);</span>
<span class="nc" id="L320">        fileRefreshCache.setActionCommand(ClientGUI.FILE_REFRESH_CACHE);</span>
<span class="nc" id="L321">        submenu.add(fileRefreshCache);</span>
<span class="nc" id="L322">        fileUnitsOpen = new JMenuItem(Messages</span>
<span class="nc" id="L323">                .getString(&quot;CommonMenuBar.fileUnitsOpen&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L324">        fileUnitsOpen.addActionListener(this);</span>
<span class="nc" id="L325">        fileUnitsOpen.setActionCommand(ClientGUI.FILE_UNITS_OPEN);</span>
<span class="nc" id="L326">        submenu.add(fileUnitsOpen);</span>
<span class="nc" id="L327">        fileUnitsClear = new JMenuItem(Messages</span>
<span class="nc" id="L328">                .getString(&quot;CommonMenuBar.fileUnitsClear&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L329">        fileUnitsClear.addActionListener(this);</span>
<span class="nc" id="L330">        fileUnitsClear.setActionCommand(ClientGUI.FILE_UNITS_CLEAR);</span>
<span class="nc" id="L331">        submenu.add(fileUnitsClear);</span>
<span class="nc" id="L332">        fileUnitsSave = new JMenuItem(Messages</span>
<span class="nc" id="L333">                .getString(&quot;CommonMenuBar.fileUnitsSave&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L334">        fileUnitsSave.addActionListener(this);</span>
<span class="nc" id="L335">        fileUnitsSave.setActionCommand(ClientGUI.FILE_UNITS_SAVE);</span>
<span class="nc" id="L336">        submenu.add(fileUnitsSave);</span>

        // Finish off the File menu.
//        filePrint = new JMenuItem(Messages.getString(&quot;CommonMenuBar.PrintMenu&quot;)); //$NON-NLS-1$
//        filePrint.addActionListener(this);
//        filePrint.setActionCommand(ClientGUI.FILE_PRINT);
//        filePrint.setEnabled(false);
<span class="nc" id="L343">        menu.addSeparator();</span>
//        menu.add(filePrint);

        // *** Create the view menu.
<span class="nc" id="L347">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.ViewMenu&quot;));</span>
<span class="nc" id="L348">        menu.setMnemonic(KeyEvent.VK_V);</span>
<span class="nc" id="L349">        add(menu);</span>
<span class="nc" id="L350">        viewMekDisplay = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewMekDisplay&quot;));</span>
<span class="nc" id="L351">        viewMekDisplay.addActionListener(this);</span>
<span class="nc" id="L352">        viewMekDisplay.setActionCommand(ClientGUI.VIEW_MEK_DISPLAY);</span>
<span class="nc" id="L353">        viewMekDisplay.setMnemonic(KeyEvent.VK_D);</span>
<span class="nc" id="L354">        viewMekDisplay.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_D,</span>
<span class="nc" id="L355">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L356">        menu.add(viewMekDisplay);</span>
        
<span class="nc" id="L358">        viewAccessibilityWindow = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewAccessibilityWindow&quot;));</span>
<span class="nc" id="L359">        viewAccessibilityWindow.setMnemonic(KeyEvent.VK_A);</span>
<span class="nc" id="L360">        viewAccessibilityWindow.addActionListener(this);</span>
<span class="nc" id="L361">        viewAccessibilityWindow.setActionCommand(ClientGUI.VIEW_ACCESSIBILITY_WINDOW);</span>
<span class="nc" id="L362">        menu.add(viewAccessibilityWindow);</span>
        
<span class="nc" id="L364">        viewKeybindsOverlay = new JCheckBoxMenuItem(Messages.getString(&quot;CommonMenuBar.viewKeyboardShortcuts&quot;));</span>
<span class="nc" id="L365">        viewKeybindsOverlay.addActionListener(this);</span>
<span class="nc" id="L366">        viewKeybindsOverlay.setState(GUIPreferences.getInstance().getBoolean(GUIPreferences.SHOW_KEYBINDS_OVERLAY));</span>
<span class="nc" id="L367">        viewKeybindsOverlay.setActionCommand(ClientGUI.VIEW_KEYBINDS_OVERLAY);</span>
<span class="nc" id="L368">        menu.add(viewKeybindsOverlay);</span>
<span class="nc" id="L369">        viewKeybindsOverlay.setEnabled(false);</span>
        
<span class="nc" id="L371">        viewResetWindowPositions = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewResetWindowPos&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L372">        viewResetWindowPositions.addActionListener(this);</span>
<span class="nc" id="L373">        viewResetWindowPositions.setActionCommand(ClientGUI.VIEW_RESET_WINDOW_POSITIONS);</span>
<span class="nc" id="L374">        menu.add(viewResetWindowPositions);</span>
        
<span class="nc" id="L376">        viewMiniMap = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewMiniMap&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L377">        viewMiniMap.addActionListener(this);</span>
<span class="nc" id="L378">        viewMiniMap.setActionCommand(ClientGUI.VIEW_MINI_MAP);</span>
<span class="nc" id="L379">        viewMiniMap.setMnemonic(KeyEvent.VK_M);</span>
<span class="nc" id="L380">        viewMiniMap.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_M,</span>
<span class="nc" id="L381">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L382">        menu.add(viewMiniMap);</span>
<span class="nc" id="L383">        viewUnitOverview = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewUnitOverview&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L384">        viewUnitOverview.addActionListener(this);</span>
<span class="nc" id="L385">        viewUnitOverview.setActionCommand(ClientGUI.VIEW_UNIT_OVERVIEW);</span>
<span class="nc" id="L386">        viewUnitOverview.setMnemonic(KeyEvent.VK_U);</span>
<span class="nc" id="L387">        viewUnitOverview.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_U,</span>
<span class="nc" id="L388">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L389">        menu.add(viewUnitOverview);</span>
<span class="nc" id="L390">        viewZoomIn = new JMenuItem(Messages</span>
<span class="nc" id="L391">                .getString(&quot;CommonMenuBar.viewZoomIn&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L392">        viewZoomIn.addActionListener(this);</span>
<span class="nc" id="L393">        viewZoomIn.setActionCommand(ClientGUI.VIEW_ZOOM_IN);</span>
<span class="nc" id="L394">        menu.add(viewZoomIn);</span>
<span class="nc" id="L395">        viewZoomOut = new JMenuItem(Messages</span>
<span class="nc" id="L396">                .getString(&quot;CommonMenuBar.viewZoomOut&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L397">        viewZoomOut.addActionListener(this);</span>
<span class="nc" id="L398">        viewZoomOut.setActionCommand(ClientGUI.VIEW_ZOOM_OUT);</span>
<span class="nc" id="L399">        menu.add(viewZoomOut);</span>
<span class="nc" id="L400">        menu.addSeparator();</span>
<span class="nc" id="L401">        toggleIsometric = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L402">                .getString(&quot;CommonMenuBar.viewToggleIsometric&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L403">        toggleIsometric.addActionListener(this);</span>
<span class="nc" id="L404">        toggleIsometric.setState(GUIPreferences.getInstance().getBoolean(&quot;UseIsometric&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L405">        toggleIsometric.setActionCommand(ClientGUI.VIEW_TOGGLE_ISOMETRIC);</span>
<span class="nc" id="L406">        menu.add(toggleIsometric);</span>
<span class="nc" id="L407">        toggleFovDarken = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L408">                .getString(&quot;CommonMenuBar.viewToggleFovDarken&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L409">        toggleFovDarken.addActionListener(this);</span>
<span class="nc" id="L410">        toggleFovDarken.setState(GUIPreferences.getInstance().getBoolean(&quot;FovDarken&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L411">        toggleFovDarken.setActionCommand(ClientGUI.VIEW_TOGGLE_FOV_DARKEN);</span>
<span class="nc" id="L412">        toggleFovDarken.setToolTipText(Messages.getString(&quot;CommonMenuBar.viewToggleFovDarkenTooltip&quot;));</span>
<span class="nc" id="L413">        menu.add(toggleFovDarken);</span>
<span class="nc" id="L414">        toggleFovHighlight = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L415">                .getString(&quot;CommonMenuBar.viewToggleFovHighlight&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L416">        toggleFovHighlight.setState(GUIPreferences.getInstance().getBoolean(&quot;FovHighlight&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L417">        toggleFovHighlight.addActionListener(this);</span>
<span class="nc" id="L418">        toggleFovHighlight.setActionCommand(ClientGUI.VIEW_TOGGLE_FOV_HIGHLIGHT);</span>
<span class="nc" id="L419">        menu.add(toggleFovHighlight);</span>
<span class="nc" id="L420">        toggleFieldOfFire = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L421">                .getString(&quot;CommonMenuBar.viewToggleFieldOfFire&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L422">        toggleFieldOfFire.addActionListener(this);</span>
<span class="nc" id="L423">        toggleFieldOfFire.setState(GUIPreferences.getInstance().getShowFieldOfFire());</span>
<span class="nc" id="L424">        toggleFieldOfFire.setActionCommand(ClientGUI.VIEW_TOGGLE_FIELD_OF_FIRE);</span>
<span class="nc" id="L425">        toggleFieldOfFire.setToolTipText(Messages</span>
<span class="nc" id="L426">                .getString(&quot;CommonMenuBar.viewToggleFieldOfFireToolTip&quot;));</span>
<span class="nc" id="L427">        menu.add(toggleFieldOfFire);</span>
<span class="nc" id="L428">        toggleFiringSolutions = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L429">                .getString(&quot;CommonMenuBar.viewToggleFiringSolutions&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L430">        toggleFiringSolutions.setToolTipText(Messages</span>
<span class="nc" id="L431">                .getString(&quot;CommonMenuBar.viewToggleFiringSolutionsToolTip&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L432">        toggleFiringSolutions.setState(GUIPreferences.getInstance().getBoolean(&quot;FiringSolutions&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L433">        toggleFiringSolutions.addActionListener(this);</span>
<span class="nc" id="L434">        toggleFiringSolutions.setActionCommand(ClientGUI.VIEW_TOGGLE_FIRING_SOLUTIONS);</span>
<span class="nc" id="L435">        menu.add(toggleFiringSolutions);</span>
<span class="nc" id="L436">        viewMovementEnvelope = new JCheckBoxMenuItem(Messages</span>
<span class="nc" id="L437">                .getString(&quot;CommonMenuBar.movementEnvelope&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L438">        viewMovementEnvelope.setState(GUIPreferences.getInstance().getBoolean(&quot;MoveEnvelope&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L439">        viewMovementEnvelope.addActionListener(this);</span>
<span class="nc" id="L440">        viewMovementEnvelope.setActionCommand(ClientGUI.VIEW_MOVE_ENV);</span>
<span class="nc" id="L441">        viewMovementEnvelope.setMnemonic(KeyEvent.VK_Q);</span>
<span class="nc" id="L442">        viewMovementEnvelope.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q,</span>
<span class="nc" id="L443">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L444">        menu.add(viewMovementEnvelope);</span>
<span class="nc" id="L445">        viewMovModEnvelope = new JMenuItem(Messages.getString(&quot;CommonMenuBar.movementModEnvelope&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L446">        viewMovModEnvelope.addActionListener(this);</span>
<span class="nc" id="L447">        viewMovModEnvelope.setActionCommand(ClientGUI.VIEW_MOVE_MOD_ENV);</span>
<span class="nc" id="L448">        viewMovModEnvelope.setMnemonic(KeyEvent.VK_W);</span>
<span class="nc" id="L449">        viewMovModEnvelope.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W,</span>
<span class="nc" id="L450">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L451">        menu.add(viewMovModEnvelope);</span>
<span class="nc" id="L452">        viewChangeTheme = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewChangeTheme&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L453">        viewChangeTheme.addActionListener(this);</span>
<span class="nc" id="L454">        viewChangeTheme.setActionCommand(ClientGUI.VIEW_CHANGE_THEME);</span>
<span class="nc" id="L455">        menu.add(viewChangeTheme);</span>
<span class="nc" id="L456">        menu.addSeparator();</span>
<span class="nc" id="L457">        viewRoundReport = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewRoundReport&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L458">        viewRoundReport.addActionListener(this);</span>
<span class="nc" id="L459">        viewRoundReport.setActionCommand(ClientGUI.VIEW_ROUND_REPORT);</span>
<span class="nc" id="L460">        viewRoundReport.setMnemonic(KeyEvent.VK_R);</span>
<span class="nc" id="L461">        viewRoundReport.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_R,</span>
<span class="nc" id="L462">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L463">        menu.add(viewRoundReport);</span>
<span class="nc" id="L464">        menu.addSeparator();</span>
<span class="nc" id="L465">        viewGameOptions = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewGameOptions&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L466">        viewGameOptions.setActionCommand(ClientGUI.VIEW_GAME_OPTIONS);</span>
<span class="nc" id="L467">        viewGameOptions.addActionListener(this);</span>
<span class="nc" id="L468">        menu.add(viewGameOptions);</span>
<span class="nc" id="L469">        viewClientSettings = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewClientSettings&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L470">        viewClientSettings.setActionCommand(ClientGUI.VIEW_CLIENT_SETTINGS);</span>
<span class="nc" id="L471">        viewClientSettings.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, InputEvent.ALT_DOWN_MASK));</span>
<span class="nc" id="L472">        viewClientSettings.addActionListener(this);</span>
<span class="nc" id="L473">        menu.add(viewClientSettings);</span>
<span class="nc" id="L474">        viewLOSSetting = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewLOSSetting&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L475">        viewLOSSetting.addActionListener(this);</span>
<span class="nc" id="L476">        viewLOSSetting.setActionCommand(ClientGUI.VIEW_LOS_SETTING);</span>
<span class="nc" id="L477">        viewLOSSetting.setMnemonic(KeyEvent.VK_L);</span>
<span class="nc" id="L478">        viewLOSSetting.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L,</span>
<span class="nc" id="L479">                getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L480">        menu.add(viewLOSSetting);</span>
<span class="nc" id="L481">        viewPlayerSettings = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewPlayerSettings&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L482">        viewPlayerSettings.setActionCommand(ClientGUI.VIEW_PLAYER_SETTINGS);</span>
<span class="nc" id="L483">        viewPlayerSettings.addActionListener(this);</span>
<span class="nc" id="L484">        menu.add(viewPlayerSettings);</span>
<span class="nc" id="L485">        menu.addSeparator();</span>
<span class="nc" id="L486">        viewPlayerList = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewPlayerList&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L487">        viewPlayerList.setActionCommand(ClientGUI.VIEW_PLAYER_LIST);</span>
<span class="nc" id="L488">        viewPlayerList.addActionListener(this);</span>
<span class="nc" id="L489">        menu.add(viewPlayerList);</span>

        // *** Create the deploy menu.
<span class="nc" id="L492">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.DeployMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L493">        menu.setMnemonic(KeyEvent.VK_D);</span>
<span class="nc" id="L494">        add(menu);</span>

        // Create the Mines sub-menu.
<span class="nc" id="L497">        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.DeployMinesMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L498">        deployMinesConventional = createMenuItem(</span>
                submenu,
<span class="nc" id="L500">                Messages.getString(&quot;CommonMenuBar.deployMinesConventional&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_CONV.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L501">        deployMinesCommand = createMenuItem(</span>
                submenu,
<span class="nc" id="L503">                Messages.getString(&quot;CommonMenuBar.deployMinesCommand&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_COM.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L504">        deployMinesVibrabomb = createMenuItem(</span>
                submenu,
<span class="nc" id="L506">                Messages.getString(&quot;CommonMenuBar.deployMinesVibrabomb&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_VIBRA.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L507">        deployMinesActive = createMenuItem(</span>
                submenu,
<span class="nc" id="L509">                Messages.getString(&quot;CommonMenuBar.deployMinesActive&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_ACTIVE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L510">        deployMinesInferno = createMenuItem(</span>
                submenu,
<span class="nc" id="L512">                Messages.getString(&quot;CommonMenuBar.deployMinesInferno&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_INFERNO.getCmd()); //$NON-NLS-1$</span>

        // Finish off the deploy menu.
<span class="nc" id="L515">        deployNext = createMenuItem(</span>
                menu,
<span class="nc" id="L517">                Messages.getString(&quot;CommonMenuBar.deployNext&quot;), DeploymentDisplay.DeployCommand.DEPLOY_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</span>
<span class="nc" id="L518">        deployTurn = createMenuItem(</span>
                menu,
<span class="nc" id="L520">                Messages.getString(&quot;CommonMenuBar.deployTurn&quot;), DeploymentDisplay.DeployCommand.DEPLOY_TURN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L521">        deployLoad = createMenuItem(</span>
                menu,
<span class="nc" id="L523">                Messages.getString(&quot;CommonMenuBar.deployLoad&quot;), DeploymentDisplay.DeployCommand.DEPLOY_LOAD.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L524">        deployUnload = createMenuItem(</span>
                menu,
<span class="nc" id="L526">                Messages.getString(&quot;CommonMenuBar.deployUnload&quot;), DeploymentDisplay.DeployCommand.DEPLOY_UNLOAD.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L527">        deployRemove = createMenuItem(</span>
                menu,
<span class="nc" id="L529">                Messages.getString(&quot;CommonMenuBar.deployRemove&quot;), DeploymentDisplay.DeployCommand.DEPLOY_REMOVE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L530">        deployAssaultDrop = createMenuItem(</span>
                menu,
<span class="nc" id="L532">                Messages.getString(&quot;CommonMenuBar.deployAssaultDrop&quot;), DeploymentDisplay.DeployCommand.DEPLOY_ASSAULTDROP.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L533">        menu.addSeparator();</span>
<span class="nc" id="L534">        menu.add(submenu);</span>

        // *** Create the move menu.
<span class="nc" id="L537">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.MoveMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L538">        menu.setMnemonic(KeyEvent.VK_M);</span>
<span class="nc" id="L539">        add(menu);</span>
<span class="nc" id="L540">        moveWalk = createMenuItem(</span>
                menu,
<span class="nc" id="L542">                Messages.getString(&quot;CommonMenuBar.moveWalk&quot;), MovementDisplay.MoveCommand.MOVE_WALK.getCmd(), KeyEvent.VK_W); //$NON-NLS-1$</span>
<span class="nc" id="L543">        moveJump = createMenuItem(</span>
                menu,
<span class="nc" id="L545">                Messages.getString(&quot;CommonMenuBar.moveJump&quot;), MovementDisplay.MoveCommand.MOVE_JUMP.getCmd(), KeyEvent.VK_J); //$NON-NLS-1$</span>
<span class="nc" id="L546">        moveSwim = createMenuItem(</span>
                menu,
<span class="nc" id="L548">                Messages.getString(&quot;CommonMenuBar.moveSwim&quot;), MovementDisplay.MoveCommand.MOVE_SWIM.getCmd(), KeyEvent.VK_S); //$NON-NLS-1$</span>
<span class="nc" id="L549">        moveModeConvert = createMenuItem(</span>
                menu,
<span class="nc" id="L551">                Messages.getString(&quot;CommonMenuBar.moveModeConvert&quot;), MovementDisplay.MoveCommand.MOVE_MODE_CONVERT.getCmd(), KeyEvent.VK_C); //$NON-NLS-1$</span>
<span class="nc" id="L552">        moveBackUp = createMenuItem(</span>
                menu,
<span class="nc" id="L554">                Messages.getString(&quot;CommonMenuBar.moveBackUp&quot;), MovementDisplay.MoveCommand.MOVE_BACK_UP.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L555">        moveGetUp = createMenuItem(</span>
                menu,
<span class="nc" id="L557">                Messages.getString(&quot;CommonMenuBar.moveGetUp&quot;), MovementDisplay.MoveCommand.MOVE_GET_UP.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L558">        moveGoProne = createMenuItem(</span>
                menu,
<span class="nc" id="L560">                Messages.getString(&quot;CommonMenuBar.moveGoProne&quot;), MovementDisplay.MoveCommand.MOVE_GO_PRONE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L561">        moveTurn = createMenuItem(menu, Messages</span>
<span class="nc" id="L562">                .getString(&quot;CommonMenuBar.moveTurn&quot;), MovementDisplay.MoveCommand.MOVE_TURN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L563">        moveNext = createMenuItem(</span>
                menu,
<span class="nc" id="L565">                Messages.getString(&quot;CommonMenuBar.moveNext&quot;), MovementDisplay.MoveCommand.MOVE_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</span>
<span class="nc" id="L566">        moveForwardIni = createMenuItem(</span>
                menu,
<span class="nc" id="L568">                Messages.getString(&quot;CommonMenuBar.moveForwardIni&quot;), MovementDisplay.MoveCommand.MOVE_FORWARD_INI.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L569">        moveRaise = createMenuItem(</span>
                menu,
<span class="nc" id="L571">                Messages.getString(&quot;CommonMenuBar.moveRaise&quot;), MovementDisplay.MoveCommand.MOVE_RAISE_ELEVATION.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L572">        moveLower = createMenuItem(</span>
                menu,
<span class="nc" id="L574">                Messages.getString(&quot;CommonMenuBar.moveLower&quot;), MovementDisplay.MoveCommand.MOVE_LOWER_ELEVATION.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L575">        moveReckless = createMenuItem(</span>
                menu,
<span class="nc" id="L577">                Messages.getString(&quot;CommonMenuBar.moveReckless&quot;), MovementDisplay.MoveCommand.MOVE_RECKLESS.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L578">        moveEvade = createMenuItem(</span>
                menu,
<span class="nc" id="L580">                Messages.getString(&quot;CommonMenuBar.moveEvade&quot;), MovementDisplay.MoveCommand.MOVE_EVADE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L581">        moveBootlegger = createMenuItem(</span>
                menu,
<span class="nc" id="L583">                Messages.getString(&quot;CommonMenuBar.moveBootlegger&quot;), MovementDisplay.MoveCommand.MOVE_BOOTLEGGER.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L584">        moveShutdown = createMenuItem(</span>
                menu,
<span class="nc" id="L586">                Messages.getString(&quot;CommonMenuBar.moveShutdown&quot;), MovementDisplay.MoveCommand.MOVE_SHUTDOWN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L587">        moveStartup = createMenuItem(</span>
                menu,
<span class="nc" id="L589">                Messages.getString(&quot;CommonMenuBar.moveStartup&quot;), MovementDisplay.MoveCommand.MOVE_STARTUP.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L590">        moveSelfDestruct = createMenuItem(</span>
                menu,
<span class="nc" id="L592">                Messages.getString(&quot;CommonMenuBar.moveSelfDestruct&quot;), MovementDisplay.MoveCommand.MOVE_SELF_DESTRUCT.getCmd()); //$NON-NLS-1$</span>
        /* TODO: moveTraitor = createMenuItem(
                menu,
                Messages.getString(&quot;CommonMenuBar.moveTraitor&quot;), MovementDisplay.MOVE_TRAITOR); //$NON-NLS-1$ */

        //create aero movement sub-menu
<span class="nc" id="L598">        aeromenu = new JMenu(Messages.getString(&quot;CommonMenuBar.AeroMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L599">        moveAcc = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveAcc&quot;), MovementDisplay.MoveCommand.MOVE_ACC.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L600">        moveDec = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveDec&quot;), MovementDisplay.MoveCommand.MOVE_DEC.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L601">        moveAccN = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveAccN&quot;), MovementDisplay.MoveCommand.MOVE_ACCN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L602">        moveDecN = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveDecN&quot;), MovementDisplay.MoveCommand.MOVE_DECN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L603">        moveEvadeAero = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveEvadeAero&quot;), MovementDisplay.MoveCommand.MOVE_EVADE_AERO.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L604">        moveRoll = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveRoll&quot;), MovementDisplay.MoveCommand.MOVE_ROLL.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L605">        aeromenu.addSeparator();</span>
<span class="nc" id="L606">        moveHover = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveHover&quot;), MovementDisplay.MoveCommand.MOVE_HOVER.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L607">        moveManeuver = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveManeuver&quot;), MovementDisplay.MoveCommand.MOVE_MANEUVER.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L608">        moveTurnLeft = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveTurnLeft&quot;), MovementDisplay.MoveCommand.MOVE_TURN_LEFT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L609">        moveTurnRight = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveTurnRight&quot;), MovementDisplay.MoveCommand.MOVE_TURN_RIGHT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L610">        moveThrust = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveThrust&quot;), MovementDisplay.MoveCommand.MOVE_THRUST.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L611">        moveYaw = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveYaw&quot;), MovementDisplay.MoveCommand.MOVE_YAW.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L612">        moveEndOver = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveEndOver&quot;), MovementDisplay.MoveCommand.MOVE_END_OVER.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L613">        moveStrafe = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveStrafe&quot;), MovementDisplay.MoveCommand.MOVE_STRAFE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L614">        moveBomb = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveBomb&quot;), MovementDisplay.MoveCommand.MOVE_BOMB.getCmd()); //$NON-NLS-1$</span>

<span class="nc" id="L616">        menu.addSeparator();</span>
<span class="nc" id="L617">        menu.add(aeromenu);</span>

        // Create the Special sub-menu.
<span class="nc" id="L620">        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.SpecialMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L621">        moveLoad = createMenuItem(submenu, Messages</span>
<span class="nc" id="L622">                .getString(&quot;CommonMenuBar.MoveLoad&quot;), MovementDisplay.MoveCommand.MOVE_LOAD.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L623">        moveUnload = createMenuItem(</span>
                submenu,
<span class="nc" id="L625">                Messages.getString(&quot;CommonMenuBar.MoveUnload&quot;), MovementDisplay.MoveCommand.MOVE_UNLOAD.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L626">        moveTow = createMenuItem(submenu, Messages</span>
<span class="nc" id="L627">                .getString(&quot;CommonMenuBar.moveTow&quot;), MovementDisplay.MoveCommand.MOVE_TOW.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L628">        moveDisconnect = createMenuItem(</span>
                submenu,
<span class="nc" id="L630">                Messages.getString(&quot;CommonMenuBar.moveDisconnect&quot;), MovementDisplay.MoveCommand.MOVE_DISCONNECT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L631">        moveLaunch = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveLaunch&quot;), MovementDisplay.MoveCommand.MOVE_LAUNCH.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L632">        moveRecover = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveRecover&quot;), MovementDisplay.MoveCommand.MOVE_RECOVER.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L633">        moveJoin = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveJoin&quot;), MovementDisplay.MoveCommand.MOVE_JOIN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L634">        submenu.addSeparator();</span>
<span class="nc" id="L635">        moveCharge = createMenuItem(</span>
                submenu,
<span class="nc" id="L637">                Messages.getString(&quot;CommonMenuBar.MoveCharge&quot;), MovementDisplay.MoveCommand.MOVE_CHARGE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L638">        moveDFA = createMenuItem(submenu, Messages</span>
<span class="nc" id="L639">                .getString(&quot;CommonMenuBar.MoveDeth&quot;), MovementDisplay.MoveCommand.MOVE_DFA.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L640">        moveRam = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveRam&quot;), MovementDisplay.MoveCommand.MOVE_RAM.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L641">        submenu.addSeparator();</span>
<span class="nc" id="L642">        moveFlee = createMenuItem(submenu, Messages</span>
<span class="nc" id="L643">                .getString(&quot;CommonMenuBar.MoveFlee&quot;), MovementDisplay.MoveCommand.MOVE_FLEE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L644">        moveFlyOff = createMenuItem(submenu, Messages</span>
<span class="nc" id="L645">                .getString(&quot;CommonMenuBar.MoveFlyOff&quot;), MovementDisplay.MoveCommand.MOVE_FLY_OFF.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L646">        moveEject = createMenuItem(</span>
                submenu,
<span class="nc" id="L648">                Messages.getString(&quot;CommonMenuBar.MoveEject&quot;), MovementDisplay.MoveCommand.MOVE_EJECT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L649">        submenu.addSeparator();</span>
<span class="nc" id="L650">        moveUnjam = createMenuItem(</span>
                submenu,
<span class="nc" id="L652">                Messages.getString(&quot;CommonMenuBar.moveUnjam&quot;), MovementDisplay.MoveCommand.MOVE_UNJAM.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L653">        moveSearchlight = createMenuItem(</span>
                submenu,
<span class="nc" id="L655">                Messages.getString(&quot;CommonMenuBar.moveSearchlight&quot;), MovementDisplay.MoveCommand.MOVE_SEARCHLIGHT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L656">        moveClear = createMenuItem(</span>
                submenu,
<span class="nc" id="L658">                Messages.getString(&quot;CommonMenuBar.moveClear&quot;), MovementDisplay.MoveCommand.MOVE_CLEAR.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L659">        moveHullDown = createMenuItem(</span>
                submenu,
<span class="nc" id="L661">                Messages.getString(&quot;CommonMenuBar.moveHullDown&quot;), MovementDisplay.MoveCommand.MOVE_HULL_DOWN.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L662">        moveLayMine = createMenuItem(</span>
                submenu,
<span class="nc" id="L664">                Messages.getString(&quot;CommonMenuBar.moveLayMine&quot;), MovementDisplay.MoveCommand.MOVE_LAY_MINE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L665">        moveDump = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveDump&quot;), MovementDisplay.MoveCommand.MOVE_DUMP.getCmd()); //$NON-NLS-1$</span>

<span class="nc" id="L667">        menu.addSeparator();</span>
<span class="nc" id="L668">        menu.add(submenu);</span>

        // Add the cancel button.
<span class="nc" id="L671">        menu.addSeparator();</span>
<span class="nc" id="L672">        moveNext = createMenuItem(</span>
                menu,
<span class="nc" id="L674">                Messages.getString(&quot;CommonMenuBar.moveCancel&quot;), MovementDisplay.MoveCommand.MOVE_CANCEL.getCmd(), KeyEvent.VK_ESCAPE); //$NON-NLS-1$</span>

        // *** Create the fire menu.
<span class="nc" id="L677">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.FireMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L678">        menu.setMnemonic(KeyEvent.VK_I);</span>
<span class="nc" id="L679">        add(menu);</span>
<span class="nc" id="L680">        fireFire = createMenuItem(</span>
                menu,
<span class="nc" id="L682">                Messages.getString(&quot;CommonMenuBar.fireFire&quot;), FiringDisplay.FiringCommand.FIRE_FIRE.getCmd(), KeyEvent.VK_F); //$NON-NLS-1$</span>
<span class="nc" id="L683">        fireSkip = createMenuItem(</span>
                menu,
<span class="nc" id="L685">                Messages.getString(&quot;CommonMenuBar.fireSkip&quot;), FiringDisplay.FiringCommand.FIRE_SKIP.getCmd(), KeyEvent.VK_S); //$NON-NLS-1$</span>
<span class="nc" id="L686">        fireNextTarg = createMenuItem(</span>
                menu,
<span class="nc" id="L688">                Messages.getString(&quot;CommonMenuBar.fireNextTarg&quot;), FiringDisplay.FiringCommand.FIRE_NEXT_TARG.getCmd(), KeyEvent.VK_T); //$NON-NLS-1$</span>
<span class="nc" id="L689">        fireNext = createMenuItem(</span>
                menu,
<span class="nc" id="L691">                Messages.getString(&quot;CommonMenuBar.fireNext&quot;), FiringDisplay.FiringCommand.FIRE_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</span>
<span class="nc" id="L692">        menu.addSeparator();</span>
<span class="nc" id="L693">        fireTwist = createMenuItem(menu, Messages</span>
<span class="nc" id="L694">                .getString(&quot;CommonMenuBar.fireTwist&quot;), FiringDisplay.FiringCommand.FIRE_TWIST.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L695">        fireFlipArms = createMenuItem(</span>
                menu,
<span class="nc" id="L697">                Messages.getString(&quot;CommonMenuBar.fireFlipArms&quot;), FiringDisplay.FiringCommand.FIRE_FLIP_ARMS.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L698">        menu.addSeparator();</span>
<span class="nc" id="L699">        fireMode = createMenuItem(</span>
                menu,
<span class="nc" id="L701">                Messages.getString(&quot;CommonMenuBar.fireMode&quot;), FiringDisplay.FiringCommand.FIRE_MODE.getCmd(), KeyEvent.VK_O); //$NON-NLS-1$</span>
<span class="nc" id="L702">        fireCalled = createMenuItem(</span>
                menu,
<span class="nc" id="L704">                Messages.getString(&quot;CommonMenuBar.fireCalled&quot;), FiringDisplay.FiringCommand.FIRE_CALLED.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L705">        menu.addSeparator();</span>
<span class="nc" id="L706">        fireFindClub = createMenuItem(</span>
                menu,
<span class="nc" id="L708">                Messages.getString(&quot;CommonMenuBar.fireFindClub&quot;), FiringDisplay.FiringCommand.FIRE_FIND_CLUB.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L709">        fireSpot = createMenuItem(menu, Messages</span>
<span class="nc" id="L710">                .getString(&quot;CommonMenuBar.fireSpot&quot;), FiringDisplay.FiringCommand.FIRE_SPOT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L711">        fireSearchlight = createMenuItem(</span>
                menu,
<span class="nc" id="L713">                Messages.getString(&quot;CommonMenuBar.fireSearchlight&quot;), FiringDisplay.FiringCommand.FIRE_SEARCHLIGHT.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L714">        fireClearTurret = createMenuItem(</span>
                menu,
<span class="nc" id="L716">                Messages.getString(&quot;CommonMenuBar.fireClearTurret&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_TURRET.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L717">        fireClearWeaponJam = createMenuItem(</span>
                menu,
<span class="nc" id="L719">                Messages.getString(&quot;CommonMenuBar.fireClearWeaponJam&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_WEAPON.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L720">        menu.addSeparator();</span>
<span class="nc" id="L721">        fireStrafe = createMenuItem(</span>
                menu,
<span class="nc" id="L723">                Messages.getString(&quot;CommonMenuBar.fireStrafe&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_WEAPON.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L724">        menu.addSeparator();</span>
<span class="nc" id="L725">        fireCancel = createMenuItem(</span>
                menu,
<span class="nc" id="L727">                Messages.getString(&quot;CommonMenuBar.fireCancel&quot;), FiringDisplay.FiringCommand.FIRE_CANCEL.getCmd(), KeyEvent.VK_ESCAPE); //$NON-NLS-1$</span>
<span class="nc" id="L728">        menu.addSeparator();</span>
<span class="nc" id="L729">        fireSaveWeaponOrder = createMenuItem(</span>
                menu,
<span class="nc" id="L731">                Messages.getString(&quot;CommonMenuBar.fireSaveWeaponOrder&quot;), ClientGUI.FIRE_SAVE_WEAPON_ORDER); //$NON-NLS-1$</span>

        // *** Create the physical menu.
<span class="nc" id="L734">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.PhysicalMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L735">        menu.setMnemonic(KeyEvent.VK_P);</span>
<span class="nc" id="L736">        add(menu);</span>
<span class="nc" id="L737">        physicalPunch = createMenuItem(</span>
                menu,
<span class="nc" id="L739">                Messages.getString(&quot;CommonMenuBar.physicalPunch&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PUNCH.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L740">        physicalKick = createMenuItem(</span>
                menu,
<span class="nc" id="L742">                Messages.getString(&quot;CommonMenuBar.physicalKick&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_KICK.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L743">        physicalPush = createMenuItem(</span>
                menu,
<span class="nc" id="L745">                Messages.getString(&quot;CommonMenuBar.physicalPush&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PUSH.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L746">        physicalClub = createMenuItem(</span>
                menu,
<span class="nc" id="L748">                Messages.getString(&quot;CommonMenuBar.physicalClub&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_CLUB.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L749">        physicalBrushOff = createMenuItem(</span>
                menu,
<span class="nc" id="L751">                Messages.getString(&quot;CommonMenuBar.physicalBrushOff&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_BRUSH_OFF.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L752">        physicalThrash = createMenuItem(</span>
                menu,
<span class="nc" id="L754">                Messages.getString(&quot;CommonMenuBar.physicalThrash&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_THRASH.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L755">        physicalProto = createMenuItem(</span>
                menu,
<span class="nc" id="L757">                Messages.getString(&quot;CommonMenuBar.physicalProto&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PROTO.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L758">        physicalDodge = createMenuItem(</span>
                menu,
<span class="nc" id="L760">                Messages.getString(&quot;CommonMenuBar.physicalDodge&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_DODGE.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L761">        physicalVibro = createMenuItem(</span>
                menu,
<span class="nc" id="L763">                Messages.getString(&quot;CommonMenuBar.physicalVibro&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_VIBRO.getCmd()); //$NON-NLS-1$</span>
<span class="nc" id="L764">        physicalNext = createMenuItem(</span>
                menu,
<span class="nc" id="L766">                Messages.getString(&quot;CommonMenuBar.physicalNext&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</span>

        // *** Create the help menu.
<span class="nc" id="L769">        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.HelpMenu&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L770">        menu.setMnemonic(KeyEvent.VK_H);</span>
<span class="nc" id="L771">        add(menu);</span>
<span class="nc" id="L772">        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpContents&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L773">        item.addActionListener(this);</span>
<span class="nc" id="L774">        item.setActionCommand(ClientGUI.HELP_CONTENTS);</span>
<span class="nc" id="L775">        menu.add(item);</span>
<span class="nc" id="L776">        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpSkinning&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L777">        item.addActionListener(this);</span>
<span class="nc" id="L778">        item.setActionCommand(ClientGUI.HELP_SKINNING);</span>
<span class="nc" id="L779">        menu.add(item);</span>
<span class="nc" id="L780">        menu.addSeparator();</span>
<span class="nc" id="L781">        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpAbout&quot;)); //$NON-NLS-1$</span>
<span class="nc" id="L782">        item.setActionCommand(ClientGUI.HELP_ABOUT);</span>
<span class="nc" id="L783">        item.addActionListener(this);</span>
<span class="nc" id="L784">        menu.add(item);</span>

        // Now manage the menu items.
<span class="nc" id="L787">        manageMenu();</span>
        
<span class="nc" id="L789">        GUIPreferences.getInstance().addPreferenceChangeListener(this);</span>
<span class="nc" id="L790">    }</span>

    private JMenuItem createMenuItem(JMenu m, String label, String command, int shortcut) {
<span class="nc" id="L793">        JMenuItem mi = createMenuItem(m, label, command);</span>
<span class="nc" id="L794">        mi.setMnemonic(shortcut);</span>
<span class="nc" id="L795">        mi.setAccelerator(KeyStroke.getKeyStroke(shortcut, getToolkit().getMenuShortcutKeyMask()));</span>
<span class="nc" id="L796">        return mi;</span>
    }

    private JMenuItem createMenuItem(JMenu m, String label, String command) {
<span class="nc" id="L800">        JMenuItem mi = new JMenuItem(label);</span>
<span class="nc" id="L801">        mi.addActionListener(this);</span>
<span class="nc" id="L802">        mi.setActionCommand(command);</span>
<span class="nc" id="L803">        mi.setEnabled(false);</span>
<span class="nc" id="L804">        m.add(mi);</span>
<span class="nc" id="L805">        return mi;</span>
    }

    /**
     * Implement the &lt;code&gt;ActionListener&lt;/code&gt; interface.
     *
     * @param event - the &lt;code&gt;ActionEvent&lt;/code&gt; that spawned this call.
     */
    public void actionPerformed(ActionEvent event) {
        // Pass the action on to each of our listeners.
<span class="nc" id="L815">        Enumeration&lt;ActionListener&gt; iter = actionListeners.elements();</span>
<span class="nc bnc" id="L816" title="All 2 branches missed.">        while (iter.hasMoreElements()) {</span>
<span class="nc" id="L817">            ActionListener listener = iter.nextElement();</span>
<span class="nc" id="L818">            listener.actionPerformed(event);</span>
<span class="nc" id="L819">        }</span>
<span class="nc" id="L820">    }</span>

    /**
     * Register an object that wishes to be alerted when an item on this menu
     * bar has been selected. &lt;p/&gt; Please note, the ActionCommand property of
     * the action event will inform the listener as to which menu item that has
     * been selected. Not all listeners will be interested in all menu items.
     *
     * @param listener - the &lt;code&gt;ActionListener&lt;/code&gt; that wants to
     *            register itself.
     */
    public synchronized void addActionListener(ActionListener listener) {
<span class="nc" id="L832">        actionListeners.addElement(listener);</span>
<span class="nc" id="L833">    }</span>

    /**
     * Remove an object that was being alerted when an item on this menu bar was
     * selected.
     *
     * @param listener - the &lt;code&gt;ActionListener&lt;/code&gt; that wants to be
     *            removed.
     */
    public synchronized void removeActionListener(ActionListener listener) {
<span class="nc" id="L843">        actionListeners.removeElement(listener);</span>
<span class="nc" id="L844">    }</span>

    /**
     * A helper function that will manage the enabled states of the items in
     * this menu, based upon the object's current state.
     */
    private synchronized void manageMenu() {
        // If we have a game, we can't join a new one, but we can save it.
        // Also, no Game menu in the editor (where (this.hasBoard &amp;&amp;
        // null==this.client)).
<span class="nc bnc" id="L854" title="All 6 branches missed.">        if ((game != null) || (hasBoard &amp;&amp; (null == client))) {</span>
<span class="nc" id="L855">            fileGameNew.setEnabled(false);</span>
<span class="nc" id="L856">            fileGameOpen.setEnabled(false);</span>
<span class="nc" id="L857">            fileGameScenario.setEnabled(false);</span>
<span class="nc" id="L858">            fileGameConnectBot.setEnabled(false);</span>
<span class="nc" id="L859">            fileGameConnect.setEnabled(false);</span>
<span class="nc" id="L860">            replacePlayer.setEnabled(false);</span>
            // We can only save in certain phases of the game.
<span class="nc bnc" id="L862" title="All 10 branches missed.">            if ((phase != IGame.Phase.PHASE_UNKNOWN)</span>
                    &amp;&amp; (phase != IGame.Phase.PHASE_SELECTION)
                    &amp;&amp; (phase != IGame.Phase.PHASE_EXCHANGE)
                    &amp;&amp; (phase != IGame.Phase.PHASE_VICTORY)
                    &amp;&amp; (phase != IGame.Phase.PHASE_STARTING_SCENARIO)) {
<span class="nc" id="L867">                fileGameSave.setEnabled(true);</span>
<span class="nc" id="L868">                fileGameSaveServer.setEnabled(true);</span>
<span class="nc" id="L869">                replacePlayer.setEnabled(true);</span>
            } else {
<span class="nc" id="L871">                fileGameSave.setEnabled(false);</span>
<span class="nc" id="L872">                fileGameSaveServer.setEnabled(false);</span>
<span class="nc" id="L873">                replacePlayer.setEnabled(false);</span>
            }
        }
        // If we have no game, we can't save, but we can create or join one.
        else {
<span class="nc" id="L878">            fileGameNew.setEnabled(true);</span>
<span class="nc" id="L879">            fileGameOpen.setEnabled(true);</span>
<span class="nc" id="L880">            fileGameSave.setEnabled(false);</span>
<span class="nc" id="L881">            fileGameSaveServer.setEnabled(false);</span>
<span class="nc" id="L882">            fileGameScenario.setEnabled(true);</span>
<span class="nc" id="L883">            fileGameConnectBot.setEnabled(true);</span>
<span class="nc" id="L884">            fileGameConnect.setEnabled(true);</span>
<span class="nc" id="L885">            replacePlayer.setEnabled(true);</span>
        }

        // can view Game Opts if we have a game
<span class="nc bnc" id="L889" title="All 2 branches missed.">        if (game != null) {</span>
<span class="nc" id="L890">            viewGameOptions.setEnabled(true);</span>
<span class="nc" id="L891">            viewPlayerSettings.setEnabled(true);</span>
        } else {
<span class="nc" id="L893">            viewGameOptions.setEnabled(false);</span>
<span class="nc" id="L894">            viewPlayerSettings.setEnabled(false);</span>
        }

        // As of 2003-09-04, we can't ever print.
//        filePrint.setEnabled(false);

        // the Client doesn't have any board actions
<span class="nc bnc" id="L901" title="All 2 branches missed.">        if (client != null) {</span>
<span class="nc" id="L902">            fileBoardNew.setEnabled(false);</span>
<span class="nc" id="L903">            fileBoardOpen.setEnabled(false);</span>
<span class="nc" id="L904">            fileBoardSave.setEnabled(false);</span>
<span class="nc" id="L905">            fileBoardSaveAs.setEnabled(false);</span>
<span class="nc" id="L906">            fileBoardSaveAsImage.setEnabled(false);</span>
<span class="nc" id="L907">            fileBoardSaveAsImageUnits.setEnabled(false);</span>
            // but the main window and map editor do
        } else {
<span class="nc" id="L910">            fileBoardNew.setEnabled(true);</span>
<span class="nc" id="L911">            fileBoardOpen.setEnabled(true);</span>
<span class="nc" id="L912">            fileBoardSave.setEnabled(false);</span>
<span class="nc" id="L913">            fileBoardSaveAs.setEnabled(false);</span>
<span class="nc" id="L914">            fileBoardSaveAsImage.setEnabled(false);</span>
        }

        // If we have a board, we can perform board actions and view the mini
        // map.
<span class="nc bnc" id="L919" title="All 2 branches missed.">        if (hasBoard) {</span>
<span class="nc" id="L920">            fileBoardSave.setEnabled(true);</span>
<span class="nc" id="L921">            fileBoardSaveAs.setEnabled(true);</span>
<span class="nc" id="L922">            fileBoardSaveAsImage.setEnabled(true);</span>
<span class="nc" id="L923">            fileBoardSaveAsImageUnits.setEnabled(true);</span>
<span class="nc" id="L924">            viewMiniMap.setEnabled(true);</span>
<span class="nc" id="L925">            viewZoomIn.setEnabled(true);</span>
<span class="nc" id="L926">            viewZoomOut.setEnabled(true);</span>
<span class="nc" id="L927">            viewKeybindsOverlay.setEnabled(true);</span>
        }
        // If we don't have a board we can't view the mini map.
        else {
<span class="nc" id="L931">            fileBoardSave.setEnabled(false);</span>
<span class="nc" id="L932">            fileBoardSaveAs.setEnabled(false);</span>
<span class="nc" id="L933">            fileBoardSaveAsImage.setEnabled(false);</span>
<span class="nc" id="L934">            fileBoardSaveAsImageUnits.setEnabled(false);</span>
<span class="nc" id="L935">            viewMiniMap.setEnabled(false);</span>
<span class="nc" id="L936">            viewZoomIn.setEnabled(false);</span>
<span class="nc" id="L937">            viewZoomOut.setEnabled(false);</span>
<span class="nc" id="L938">            viewKeybindsOverlay.setEnabled(false);</span>
        }

        // If we have a unit list, and if we are in the lounge,
        // then we can still perform all unit list actions.
<span class="nc bnc" id="L943" title="All 2 branches missed.">        if (hasUnitList) {</span>
<span class="nc bnc" id="L944" title="All 2 branches missed.">            fileUnitsOpen.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</span>
<span class="nc bnc" id="L945" title="All 2 branches missed.">            fileUnitsClear.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</span>
          //  fileUnitsSave.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);
        }
        // If we don't have a unit list, but we are in the lounge,
        // then we can open a unit list.
        else {
<span class="nc bnc" id="L951" title="All 2 branches missed.">            fileUnitsOpen.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</span>
<span class="nc" id="L952">            fileUnitsClear.setEnabled(false);</span>
          //  fileUnitsSave.setEnabled(false);
        }
        // Reinforcements cannot be added in the lounge!
<span class="nc bnc" id="L956" title="All 2 branches missed.">        fileUnitsReinforce.setEnabled(phase != IGame.Phase.PHASE_LOUNGE);</span>
<span class="nc bnc" id="L957" title="All 2 branches missed.">        fileUnitsReinforceRAT.setEnabled(phase != IGame.Phase.PHASE_LOUNGE);</span>

        // If an entity has been selected, we can view it.
<span class="nc bnc" id="L960" title="All 2 branches missed.">        if (entity != null) {</span>
<span class="nc" id="L961">            viewMekDisplay.setEnabled(true);</span>
        }
        // If we haven't selected an entity, we can't view it.
        else {
<span class="nc" id="L965">            viewMekDisplay.setEnabled(false);</span>
        }

        // We can only view the LOS/Range tool setting and
        // the mini map in certain phases of the game. Also
        // the board editor has no LOS/Units/Player stuff
<span class="nc bnc" id="L971" title="All 4 branches missed.">        if ((client == null) &amp;&amp; hasBoard) {</span>
<span class="nc" id="L972">            viewLOSSetting.setEnabled(false);</span>
<span class="nc" id="L973">            viewUnitOverview.setEnabled(false);</span>
<span class="nc" id="L974">            viewPlayerList.setEnabled(false);</span>
<span class="nc" id="L975">            viewChangeTheme.setEnabled(true);</span>
        }
        // We're in-game.
<span class="nc bnc" id="L978" title="All 16 branches missed.">        else if ((phase == IGame.Phase.PHASE_SET_ARTYAUTOHITHEXES)</span>
                || (phase == IGame.Phase.PHASE_DEPLOY_MINEFIELDS)
                || (phase == IGame.Phase.PHASE_MOVEMENT)
                || (phase == IGame.Phase.PHASE_FIRING)
                || (phase == IGame.Phase.PHASE_PHYSICAL)
                || (phase == IGame.Phase.PHASE_OFFBOARD)
                || (phase == IGame.Phase.PHASE_TARGETING)
                || (phase == IGame.Phase.PHASE_DEPLOYMENT)) {
<span class="nc" id="L986">            viewLOSSetting.setEnabled(true);</span>
<span class="nc" id="L987">            viewMiniMap.setEnabled(true);</span>
<span class="nc" id="L988">            viewZoomIn.setEnabled(true);</span>
<span class="nc" id="L989">            viewZoomOut.setEnabled(true);</span>
<span class="nc" id="L990">            viewUnitOverview.setEnabled(true);</span>
<span class="nc" id="L991">            viewPlayerList.setEnabled(true);</span>
<span class="nc" id="L992">            viewChangeTheme.setEnabled(false);</span>
        }
        // We're in-game, but not in a phase with map functions.
        else {
<span class="nc" id="L996">            viewLOSSetting.setEnabled(false);</span>
<span class="nc" id="L997">            viewMiniMap.setEnabled(false);</span>
<span class="nc" id="L998">            viewZoomIn.setEnabled(false);</span>
<span class="nc" id="L999">            viewZoomOut.setEnabled(false);</span>
<span class="nc" id="L1000">            viewUnitOverview.setEnabled(false);</span>
<span class="nc" id="L1001">            viewPlayerList.setEnabled(false);</span>
<span class="nc" id="L1002">            viewChangeTheme.setEnabled(false);</span>
        }

        // We can only view the round report in certain phases.
<span class="nc bnc" id="L1006" title="All 16 branches missed.">        if ((phase == IGame.Phase.PHASE_INITIATIVE)</span>
                || (phase == IGame.Phase.PHASE_MOVEMENT)
                || (phase == IGame.Phase.PHASE_FIRING)
                || (phase == IGame.Phase.PHASE_PHYSICAL)
                || (phase == IGame.Phase.PHASE_OFFBOARD)
                || (phase == IGame.Phase.PHASE_TARGETING)
                || (phase == IGame.Phase.PHASE_END)
                || (phase == IGame.Phase.PHASE_DEPLOYMENT)) {
<span class="nc" id="L1014">            viewRoundReport.setEnabled(true);</span>
        } else {
<span class="nc" id="L1016">            viewRoundReport.setEnabled(false);</span>
        }

        // As of 2003-09-04, we can always at least look at the client settings.
<span class="nc" id="L1020">        viewClientSettings.setEnabled(true);</span>
<span class="nc bnc" id="L1021" title="All 4 branches missed.">        if ((phase != IGame.Phase.PHASE_FIRING) || (entity == null)) {</span>
<span class="nc" id="L1022">            fireCancel.setEnabled(false);</span>
        } else {
<span class="nc" id="L1024">            fireCancel.setEnabled(true);</span>
        }

<span class="nc" id="L1027">        updateSaveWeaponOrderMenuItem();</span>
<span class="nc" id="L1028">    }</span>

    public synchronized void updateSaveWeaponOrderMenuItem() {
<span class="nc bnc" id="L1031" title="All 2 branches missed.">        if ((entity != null)) {</span>
<span class="nc" id="L1032">            WeaponOrderHandler.WeaponOrder storedWeapOrder = WeaponOrderHandler</span>
<span class="nc" id="L1033">                    .getWeaponOrder(entity.getChassis(), entity.getModel());</span>
<span class="nc" id="L1034">            WeaponOrderHandler.WeaponOrder newWeapOrder =</span>
                    new WeaponOrderHandler.WeaponOrder();
<span class="nc" id="L1036">            newWeapOrder.orderType = entity.getWeaponSortOrder();</span>
<span class="nc" id="L1037">            newWeapOrder.customWeaponOrderMap = entity.getCustomWeaponOrder();</span>

<span class="nc bnc" id="L1039" title="All 4 branches missed.">            boolean isDefault = (storedWeapOrder == null)</span>
                    &amp;&amp; (newWeapOrder.orderType == WeaponSortOrder.DEFAULT);

<span class="nc bnc" id="L1042" title="All 4 branches missed.">            if (!newWeapOrder.equals(storedWeapOrder) &amp;&amp; !isDefault) {</span>
<span class="nc" id="L1043">                fireSaveWeaponOrder.setEnabled(true);</span>
            } else {
<span class="nc" id="L1045">                fireSaveWeaponOrder.setEnabled(false);</span>
            }
<span class="nc" id="L1047">        } else {</span>
<span class="nc" id="L1048">            fireSaveWeaponOrder.setEnabled(false);</span>
        }
<span class="nc" id="L1050">    }</span>

    /**
     * Identify to the menu bar that a &lt;code&gt;IGame&lt;/code&gt; is available to the
     * parent.
     *
     * @param selected - The &lt;code&gt;IGame&lt;/code&gt; that is currently selected.
     *            When there is no selection, set this to &lt;code&gt;null&lt;/code&gt;.
     */
    public synchronized void setGame(IGame selected) {
<span class="nc" id="L1060">        game = selected;</span>
<span class="nc" id="L1061">        manageMenu();</span>
<span class="nc" id="L1062">    }</span>

    /**
     * Identify to the menu bar that a &lt;code&gt;Board&lt;/code&gt; is available to the
     * parent.
     *
     * @param available - &lt;code&gt;true&lt;/code&gt; when a &lt;code&gt;Board&lt;/code&gt; is
     *            available. Set this value to &lt;code&gt;false&lt;/code&gt; after the
     *            &lt;code&gt;Board&lt;/code&gt; is cleared.
     */
    public synchronized void setBoard(boolean available) {
<span class="nc" id="L1073">        hasBoard = available;</span>
<span class="nc" id="L1074">        manageMenu();</span>
<span class="nc" id="L1075">    }</span>

    /**
     * Identify to the menu bar that a unit list is available to the parent.
     *
     * @param available - &lt;code&gt;true&lt;/code&gt; when a unit list is available. Set
     *            this value to &lt;code&gt;false&lt;/code&gt; after the unit list is
     *            cleared.
     */
    public synchronized void setUnitList(boolean available) {
<span class="nc" id="L1085">        hasUnitList = available;</span>
<span class="nc" id="L1086">        manageMenu();</span>
<span class="nc" id="L1087">    }</span>

    /**
     * Identify to the menu bar that a &lt;code&gt;Entity&lt;/code&gt; is available to the
     * parent.
     *
     * @param selected - The &lt;code&gt;Entity&lt;/code&gt; that is currently selected.
     *            When there is no selection, set this to &lt;code&gt;null&lt;/code&gt;.
     */
    public synchronized void setEntity(Entity selected) {
<span class="nc" id="L1097">        entity = selected;</span>
<span class="nc" id="L1098">        manageMenu();</span>
<span class="nc" id="L1099">    }</span>

    /**
     * Identify to the menu bar which phase is currently in progress
     *
     * @param current - the &lt;code&gt;int&lt;/code&gt; value of the current phase (the
     *            valid values for this argument are defined as constants in the
     *            &lt;code&gt;Game&lt;/code&gt; class).
     */
    public synchronized void setPhase(IGame.Phase current) {
<span class="nc" id="L1109">        entity = null;</span>
<span class="nc" id="L1110">        phase = current;</span>
        // There are certain phases where we shouldn't allow the board to be
        //  saved, however the vast majority of phases should allow it
<span class="nc bnc" id="L1113" title="All 2 branches missed.">        switch (current) {</span>
            case PHASE_STARTING_SCENARIO:
            case PHASE_UNKNOWN:
            case PHASE_LOUNGE:
            case PHASE_SELECTION:
            case PHASE_EXCHANGE:
<span class="nc" id="L1119">                setBoard(false);</span>
<span class="nc" id="L1120">                break;</span>
            default:
<span class="nc" id="L1122">                setBoard(true);</span>
                break;
        }
<span class="nc" id="L1125">        manageMenu();</span>
<span class="nc" id="L1126">    }</span>

    // Manages the movement menu items...
    public synchronized void setMoveWalkEnabled(boolean enabled) {
<span class="nc" id="L1130">        moveWalk.setEnabled(enabled);</span>
<span class="nc" id="L1131">    }</span>

    public synchronized void setMoveTurnEnabled(boolean enabled) {
<span class="nc" id="L1134">        moveTurn.setEnabled(enabled);</span>
<span class="nc" id="L1135">    }</span>

    public synchronized void setMoveNextEnabled(boolean enabled) {
<span class="nc" id="L1138">        moveNext.setEnabled(enabled);</span>
<span class="nc" id="L1139">    }</span>
    public synchronized void setMoveForwardIniEnabled(boolean enabled) {
<span class="nc" id="L1141">        moveForwardIni.setEnabled(enabled);</span>
<span class="nc" id="L1142">    }</span>

    public synchronized void setMoveLoadEnabled(boolean enabled) {
<span class="nc" id="L1145">        moveLoad.setEnabled(enabled);</span>
<span class="nc" id="L1146">    }</span>

    public synchronized void setMoveUnloadEnabled(boolean enabled) {
<span class="nc" id="L1149">        moveUnload.setEnabled(enabled);</span>
<span class="nc" id="L1150">    }</span>
    
    public synchronized void setMoveTowEnabled(boolean enabled) {
<span class="nc" id="L1153">        moveTow.setEnabled(enabled);</span>
<span class="nc" id="L1154">    }</span>

    public synchronized void setMoveDisconnectEnabled(boolean enabled) {
<span class="nc" id="L1157">        moveDisconnect.setEnabled(enabled);</span>
<span class="nc" id="L1158">    }</span>

    public synchronized void setMoveJumpEnabled(boolean enabled) {
<span class="nc" id="L1161">        moveJump.setEnabled(enabled);</span>
<span class="nc" id="L1162">    }</span>

    public synchronized void setMoveSwimEnabled(boolean enabled) {
<span class="nc" id="L1165">        moveSwim.setEnabled(enabled);</span>
<span class="nc" id="L1166">    }</span>
    
    public synchronized void setMoveModeConvertEnabled(boolean enabled) {
<span class="nc" id="L1169">        moveModeConvert.setEnabled(enabled);</span>
<span class="nc" id="L1170">    }</span>

    public synchronized void setMoveLayMineEnabled(boolean enabled) {
<span class="nc" id="L1173">        moveLayMine.setEnabled(enabled);</span>
<span class="nc" id="L1174">    }</span>

    public synchronized void setMoveBackUpEnabled(boolean enabled) {
<span class="nc" id="L1177">        moveBackUp.setEnabled(enabled);</span>
<span class="nc" id="L1178">    }</span>

    public synchronized void setMoveChargeEnabled(boolean enabled) {
<span class="nc" id="L1181">        moveCharge.setEnabled(enabled);</span>
<span class="nc" id="L1182">    }</span>

    public synchronized void setMoveDFAEnabled(boolean enabled) {
<span class="nc" id="L1185">        moveDFA.setEnabled(enabled);</span>
<span class="nc" id="L1186">    }</span>

    public synchronized void setMoveGoProneEnabled(boolean enabled) {
<span class="nc" id="L1189">        moveGoProne.setEnabled(enabled);</span>
<span class="nc" id="L1190">    }</span>

    public synchronized void setMoveFleeEnabled(boolean enabled) {
<span class="nc" id="L1193">        moveFlee.setEnabled(enabled);</span>
<span class="nc" id="L1194">    }</span>

    public synchronized void setMoveFlyOffEnabled(boolean enabled) {
<span class="nc" id="L1197">        moveFlyOff.setEnabled(enabled);</span>
<span class="nc" id="L1198">    }</span>

    public synchronized void setMoveEjectEnabled(boolean enabled) {
<span class="nc" id="L1201">        moveEject.setEnabled(enabled);</span>
<span class="nc" id="L1202">    }</span>

    public synchronized void setMoveUnjamEnabled(boolean enabled) {
<span class="nc" id="L1205">        moveUnjam.setEnabled(enabled);</span>
<span class="nc" id="L1206">    }</span>

    public synchronized void setMoveSearchlightEnabled(boolean enabled) {
<span class="nc" id="L1209">        moveSearchlight.setEnabled(enabled);</span>
<span class="nc" id="L1210">    }</span>

    public synchronized void setMoveHullDownEnabled(boolean enabled) {
<span class="nc" id="L1213">        moveHullDown.setEnabled(enabled);</span>
<span class="nc" id="L1214">    }</span>

    public synchronized void setMoveClearEnabled(boolean enabled) {
<span class="nc" id="L1217">        moveClear.setEnabled(enabled);</span>
<span class="nc" id="L1218">    }</span>

    public synchronized void setMoveGetUpEnabled(boolean enabled) {
<span class="nc" id="L1221">        moveGetUp.setEnabled(enabled);</span>
<span class="nc" id="L1222">    }</span>

    public synchronized void setMoveRaiseEnabled(boolean enabled) {
<span class="nc" id="L1225">        moveRaise.setEnabled(enabled);</span>
<span class="nc" id="L1226">    }</span>

    public synchronized void setMoveLowerEnabled(boolean enabled) {
<span class="nc" id="L1229">        moveLower.setEnabled(enabled);</span>
<span class="nc" id="L1230">    }</span>
    public synchronized void setMoveRecklessEnabled(boolean enabled) {
<span class="nc" id="L1232">        moveReckless.setEnabled(enabled);</span>
<span class="nc" id="L1233">    }</span>
    public synchronized void setMoveAccEnabled(boolean enabled) {
<span class="nc" id="L1235">        moveAcc.setEnabled(enabled);</span>
<span class="nc" id="L1236">    }</span>
    public synchronized void setMoveDecEnabled(boolean enabled) {
<span class="nc" id="L1238">        moveDec.setEnabled(enabled);</span>
<span class="nc" id="L1239">    }</span>
    public synchronized void setMoveAccNEnabled(boolean enabled) {
<span class="nc" id="L1241">        moveAccN.setEnabled(enabled);</span>
<span class="nc" id="L1242">    }</span>
    public synchronized void setMoveDecNEnabled(boolean enabled) {
<span class="nc" id="L1244">        moveDecN.setEnabled(enabled);</span>
<span class="nc" id="L1245">    }</span>
    public synchronized void setMoveEvadeEnabled(boolean enabled) {
<span class="nc" id="L1247">        moveEvade.setEnabled(enabled);</span>
<span class="nc" id="L1248">    }</span>
    public synchronized void setMoveBootleggerEnabled(boolean enabled) {
<span class="nc" id="L1250">        moveBootlegger.setEnabled(enabled);</span>
<span class="nc" id="L1251">    }</span>
    public synchronized void setMoveShutdownEnabled(boolean enabled) {
<span class="nc" id="L1253">        moveShutdown.setEnabled(enabled);</span>
<span class="nc" id="L1254">    }</span>
    public synchronized void setMoveStartupEnabled(boolean enabled) {
<span class="nc" id="L1256">        moveStartup.setEnabled(enabled);</span>
<span class="nc" id="L1257">    }</span>
    public synchronized void setMoveSelfDestructEnabled(boolean enabled) {
<span class="nc" id="L1259">        moveSelfDestruct.setEnabled(enabled);</span>
<span class="nc" id="L1260">    }</span>
    public synchronized void setMoveTraitorEnabled(boolean enabled) {
        //TODO: moveTraitor.setEnabled(enabled);
<span class="nc" id="L1263">    }</span>
    public synchronized void setMoveEvadeAeroEnabled(boolean enabled) {
<span class="nc" id="L1265">        moveEvadeAero.setEnabled(enabled);</span>
<span class="nc" id="L1266">    }</span>
    public synchronized void setMoveRollEnabled(boolean enabled) {
<span class="nc" id="L1268">        moveRoll.setEnabled(enabled);</span>
<span class="nc" id="L1269">    }</span>
    public synchronized void setMoveLaunchEnabled(boolean enabled) {
<span class="nc" id="L1271">        moveLaunch.setEnabled(enabled);</span>
<span class="nc" id="L1272">    }</span>
    public synchronized void setMoveRecoverEnabled(boolean enabled) {
<span class="nc" id="L1274">        moveRecover.setEnabled(enabled);</span>
<span class="nc" id="L1275">    }</span>
    public synchronized void setMoveJoinEnabled(boolean enabled) {
<span class="nc" id="L1277">        moveJoin.setEnabled(enabled);</span>
<span class="nc" id="L1278">    }</span>
    public synchronized void setMoveDumpEnabled(boolean enabled) {
<span class="nc" id="L1280">        moveDump.setEnabled(enabled);</span>
<span class="nc" id="L1281">    }</span>
    public synchronized void setMoveRamEnabled(boolean enabled) {
<span class="nc" id="L1283">        moveRam.setEnabled(enabled);</span>
<span class="nc" id="L1284">    }</span>
    public synchronized void setMoveHoverEnabled(boolean enabled) {
<span class="nc" id="L1286">        moveHover.setEnabled(enabled);</span>
<span class="nc" id="L1287">    }</span>
    public synchronized void setMoveManeuverEnabled(boolean enabled) {
<span class="nc" id="L1289">        moveManeuver.setEnabled(enabled);</span>
<span class="nc" id="L1290">    }</span>
    public synchronized void setMoveTurnLeftEnabled(boolean enabled) {
<span class="nc" id="L1292">        moveTurnLeft.setEnabled(enabled);</span>
<span class="nc" id="L1293">    }</span>
    public synchronized void setMoveTurnRightEnabled(boolean enabled) {
<span class="nc" id="L1295">        moveTurnRight.setEnabled(enabled);</span>
<span class="nc" id="L1296">    }</span>
    public synchronized void setMoveThrustEnabled(boolean enabled) {
<span class="nc" id="L1298">        moveThrust.setEnabled(enabled);</span>
<span class="nc" id="L1299">    }</span>
    public synchronized void setMoveYawEnabled(boolean enabled) {
<span class="nc" id="L1301">        moveYaw.setEnabled(enabled);</span>
<span class="nc" id="L1302">    }</span>
    public synchronized void setMoveEndOverEnabled(boolean enabled) {
<span class="nc" id="L1304">        moveEndOver.setEnabled(enabled);</span>
<span class="nc" id="L1305">    }</span>
    public synchronized void setMoveStrafeEnabled(boolean enabled) {
<span class="nc" id="L1307">        moveStrafe.setEnabled(enabled);</span>
<span class="nc" id="L1308">    }</span>
    public synchronized void setMoveBombEnabled(boolean enabled) {
<span class="nc" id="L1310">        moveBomb.setEnabled(enabled);</span>
<span class="nc" id="L1311">    }</span>

    // Manages deploy menu items...
    public synchronized void setDeployNextEnabled(boolean enabled) {
<span class="nc" id="L1315">        deployNext.setEnabled(enabled);</span>
<span class="nc" id="L1316">    }</span>

    public synchronized void setDeployTurnEnabled(boolean enabled) {
<span class="nc" id="L1319">        deployTurn.setEnabled(enabled);</span>
<span class="nc" id="L1320">    }</span>

    public synchronized void setDeployLoadEnabled(boolean enabled) {
<span class="nc" id="L1323">        deployLoad.setEnabled(enabled);</span>
<span class="nc" id="L1324">    }</span>

    public synchronized void setDeployUnloadEnabled(boolean enabled) {
<span class="nc" id="L1327">        deployUnload.setEnabled(enabled);</span>
<span class="nc" id="L1328">    }</span>

    public synchronized void setDeployRemoveEnabled(boolean enabled) {
<span class="nc" id="L1331">        deployRemove.setEnabled(enabled);</span>
<span class="nc" id="L1332">    }</span>

    public synchronized void setDeployAssaultDropEnabled(boolean enabled) {
<span class="nc" id="L1335">        deployAssaultDrop.setEnabled(enabled);</span>
<span class="nc" id="L1336">    }</span>

    // Manages deploy minefield items...
    public synchronized void setDeployConventionalEnabled(int nbr) {
<span class="nc" id="L1340">        deployMinesConventional.setText(Messages.getString(</span>
<span class="nc" id="L1341">                &quot;CommonMenuBar.Minefield&quot;, new Object[]{nbr})); //$NON-NLS-1$</span>
<span class="nc bnc" id="L1342" title="All 2 branches missed.">        deployMinesConventional.setEnabled(nbr &gt; 0);</span>
<span class="nc" id="L1343">    }</span>

    public synchronized void setDeployCommandEnabled(int nbr) {
<span class="nc" id="L1346">        deployMinesCommand.setText(Messages.getString(</span>
<span class="nc" id="L1347">                &quot;CommonMenuBar.Command&quot;, new Object[]{nbr})); //$NON-NLS-1$</span>
        // Cannot ever deploy command mines...
<span class="nc" id="L1349">        deployMinesCommand.setEnabled(false);</span>
<span class="nc" id="L1350">    }</span>

    public synchronized void setDeployVibrabombEnabled(int nbr) {
<span class="nc" id="L1353">        deployMinesVibrabomb.setText(Messages.getString(</span>
<span class="nc" id="L1354">                &quot;CommonMenuBar.Vibrabomb&quot;, new Object[]{nbr})); //$NON-NLS-1$</span>
<span class="nc bnc" id="L1355" title="All 2 branches missed.">        deployMinesVibrabomb.setEnabled(nbr &gt; 0);</span>
<span class="nc" id="L1356">    }</span>

    public synchronized void setDeployActiveEnabled(int nbr) {
<span class="nc" id="L1359">        deployMinesActive.setText(Messages.getString(</span>
<span class="nc" id="L1360">                &quot;CommonMenuBar.Active&quot;, new Object[]{nbr})); //$NON-NLS-1$</span>
<span class="nc bnc" id="L1361" title="All 2 branches missed.">        deployMinesActive.setEnabled(nbr &gt; 0);</span>
<span class="nc" id="L1362">    }</span>

    public synchronized void setDeployInfernoEnabled(int nbr) {
<span class="nc" id="L1365">        deployMinesInferno.setText(Messages.getString(</span>
<span class="nc" id="L1366">                &quot;CommonMenuBar.Inferno&quot;, new Object[]{nbr})); //$NON-NLS-1$</span>
<span class="nc bnc" id="L1367" title="All 2 branches missed.">        deployMinesInferno.setEnabled(nbr &gt; 0);</span>
<span class="nc" id="L1368">    }</span>

    // Manages physical menu items...
    public synchronized void setPhysicalNextEnabled(boolean enabled) {
<span class="nc" id="L1372">        physicalNext.setEnabled(enabled);</span>
<span class="nc" id="L1373">    }</span>

    public synchronized void setPhysicalPunchEnabled(boolean enabled) {
<span class="nc" id="L1376">        physicalPunch.setEnabled(enabled);</span>
<span class="nc" id="L1377">    }</span>

    public synchronized void setPhysicalKickEnabled(boolean enabled) {
<span class="nc" id="L1380">        physicalKick.setEnabled(enabled);</span>
<span class="nc" id="L1381">    }</span>

    public synchronized void setPhysicalPushEnabled(boolean enabled) {
<span class="nc" id="L1384">        physicalPush.setEnabled(enabled);</span>
<span class="nc" id="L1385">    }</span>

    public synchronized void setPhysicalClubEnabled(boolean enabled) {
<span class="nc" id="L1388">        physicalClub.setEnabled(enabled);</span>
<span class="nc" id="L1389">    }</span>

    public synchronized void setPhysicalBrushOffEnabled(boolean enabled) {
<span class="nc" id="L1392">        physicalBrushOff.setEnabled(enabled);</span>
<span class="nc" id="L1393">    }</span>

    public synchronized void setPhysicalDodgeEnabled(boolean enabled) {
<span class="nc" id="L1396">        physicalDodge.setEnabled(enabled);</span>
<span class="nc" id="L1397">    }</span>

    public synchronized void setPhysicalThrashEnabled(boolean enabled) {
<span class="nc" id="L1400">        physicalThrash.setEnabled(enabled);</span>
<span class="nc" id="L1401">    }</span>

    public synchronized void setPhysicalProtoEnabled(boolean enabled) {
<span class="nc" id="L1404">        physicalProto.setEnabled(enabled);</span>
<span class="nc" id="L1405">    }</span>

    public synchronized void setPhysicalVibroEnabled(boolean enabled) {
<span class="nc" id="L1408">        physicalVibro.setEnabled(enabled);</span>
<span class="nc" id="L1409">    }</span>

    // Manages fire menu items...

    public synchronized void setFireFireEnabled(boolean enabled) {
<span class="nc" id="L1414">        fireFire.setEnabled(enabled);</span>
<span class="nc" id="L1415">    }</span>

    public synchronized void setFireSkipEnabled(boolean enabled) {
<span class="nc" id="L1418">        fireSkip.setEnabled(enabled);</span>
<span class="nc" id="L1419">    }</span>

    public synchronized void setFireNextTargetEnabled(boolean enabled) {
<span class="nc" id="L1422">        fireNextTarg.setEnabled(enabled);</span>
<span class="nc" id="L1423">    }</span>

    public synchronized void setFireNextEnabled(boolean enabled) {
<span class="nc" id="L1426">        fireNext.setEnabled(enabled);</span>
<span class="nc" id="L1427">    }</span>

    public synchronized void setFireTwistEnabled(boolean enabled) {
<span class="nc" id="L1430">        fireTwist.setEnabled(enabled);</span>
<span class="nc" id="L1431">    }</span>

    public synchronized void setFireFlipArmsEnabled(boolean enabled) {
<span class="nc" id="L1434">        fireFlipArms.setEnabled(enabled);</span>
<span class="nc" id="L1435">    }</span>

    public synchronized void setFireModeEnabled(boolean enabled) {
<span class="nc" id="L1438">        fireMode.setEnabled(enabled);</span>
<span class="nc" id="L1439">    }</span>

    public synchronized void setFireCalledEnabled(boolean enabled) {
<span class="nc" id="L1442">        fireCalled.setEnabled(enabled);</span>
<span class="nc" id="L1443">    }</span>

    public synchronized void setFireFindClubEnabled(boolean enabled) {
<span class="nc" id="L1446">        fireFindClub.setEnabled(enabled);</span>
<span class="nc" id="L1447">    }</span>

    public synchronized void setFireSpotEnabled(boolean enabled) {
<span class="nc" id="L1450">        fireSpot.setEnabled(enabled);</span>
<span class="nc" id="L1451">    }</span>

    public synchronized void setFireSearchlightEnabled(boolean enabled) {
<span class="nc" id="L1454">        fireSearchlight.setEnabled(enabled);</span>
<span class="nc" id="L1455">    }</span>

    public synchronized void setFireClearTurretEnabled(boolean enabled) {
<span class="nc" id="L1458">        fireClearTurret.setEnabled(enabled);</span>
<span class="nc" id="L1459">    }</span>

    public synchronized void setFireClearWeaponJamEnabled(boolean enabled) {
<span class="nc" id="L1462">        fireClearWeaponJam.setEnabled(enabled);</span>
<span class="nc" id="L1463">    }</span>

    public synchronized void setStrafeEnabled(boolean enabled) {
<span class="nc" id="L1466">        fireStrafe.setEnabled(enabled);</span>
<span class="nc" id="L1467">    }</span>

    @Override
    public void preferenceChange(PreferenceChangeEvent e) {
<span class="nc bnc" id="L1471" title="All 2 branches missed.">        if (e.getName().equals(GUIPreferences.USE_ISOMETRIC)) {</span>
<span class="nc" id="L1472">            toggleIsometric.setSelected((Boolean)e.getNewValue());</span>
<span class="nc bnc" id="L1473" title="All 2 branches missed.">        } else if (e.getName().equals(GUIPreferences.SHOW_FIELD_OF_FIRE)) {</span>
<span class="nc" id="L1474">            toggleFieldOfFire.setSelected((Boolean)e.getNewValue());</span>
<span class="nc bnc" id="L1475" title="All 2 branches missed.">        } else if (e.getName().equals(GUIPreferences.SHOW_KEYBINDS_OVERLAY)) {</span>
<span class="nc" id="L1476">            viewKeybindsOverlay.setSelected((Boolean)e.getNewValue());</span>
        }
<span class="nc" id="L1478">    }</span>

    public void die() {
<span class="nc" id="L1481">        GUIPreferences.getInstance().removePreferenceChangeListener(this);        </span>
<span class="nc" id="L1482">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>