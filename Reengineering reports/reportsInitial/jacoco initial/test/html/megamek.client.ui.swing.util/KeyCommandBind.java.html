<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>KeyCommandBind.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.client.ui.swing.util</a> &gt; <span class="el_source">KeyCommandBind.java</span></div><h1>KeyCommandBind.java</h1><pre class="source lang-java linenums">/*
 * MegaMek - Copyright (C) 2000-2002 Ben Mazur (bmazur@sev.org)
 * Copyright Â© 2013 Nicholas Walczak (walczak@cs.umn.edu)
 *
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License as published by the Free
 *  Software Foundation; either version 2 of the License, or (at your option)
 *  any later version.
 *
 *  This program is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
 *  for more details.
 */

package megamek.client.ui.swing.util;

import java.awt.event.InputEvent;
import java.awt.event.KeyEvent;
import java.util.ArrayList;

/**
 * This enum is a collection of commands that can be bound to a particular key.
 * 
 * @author arlith
 *
 */
<span class="nc" id="L28">public enum KeyCommandBind {</span>
<span class="nc" id="L29">    SCROLL_NORTH(&quot;scrollN&quot;,true, KeyEvent.VK_W, 0), // Default: W</span>
<span class="nc" id="L30">    SCROLL_SOUTH(&quot;scrollS&quot;,true, KeyEvent.VK_S, 0), // Default: S</span>
<span class="nc" id="L31">    SCROLL_EAST(&quot;scrollE&quot;,true, KeyEvent.VK_D, 0),  // Default: D</span>
<span class="nc" id="L32">    SCROLL_WEST(&quot;scrollW&quot;,true, KeyEvent.VK_A, 0),  // Default: A</span>
    // Toggles isometric view on/off
<span class="nc" id="L34">    TOGGLE_ISO(&quot;toggleIso&quot;,false, KeyEvent.VK_T, 0),// Default: T</span>
    // Activates chat box
<span class="nc" id="L36">    TOGGLE_CHAT(&quot;toggleChat&quot;,false, KeyEvent.VK_BACK_QUOTE, 0), // Default: ` (back quote/grave)</span>
    // Activates chat box and adds the command character (/)
<span class="nc" id="L38">    TOGGLE_CHAT_CMD(&quot;toggleChatCmd&quot;, false, KeyEvent.VK_SLASH, 0), // Default: /</span>
    // Change facing one hexside to the left
<span class="nc" id="L40">    TURN_LEFT(&quot;turnLeft&quot;,false, KeyEvent.VK_A, InputEvent.SHIFT_MASK), // Default: Shift-A</span>
    // Change facing one hexside to the right
<span class="nc" id="L42">    TURN_RIGHT(&quot;turnRight&quot;,false, KeyEvent.VK_D, InputEvent.SHIFT_MASK), // Default: Shift-D</span>
    // Change facing one hexside to the left
<span class="nc" id="L44">    TWIST_LEFT(&quot;twistLeft&quot;,false, KeyEvent.VK_A, InputEvent.SHIFT_MASK), // Default: Shift-A</span>
    // Change facing one hexside to the right
<span class="nc" id="L46">    TWIST_RIGHT(&quot;twistRight&quot;,false, KeyEvent.VK_D, InputEvent.SHIFT_MASK), // Default: Shift-D</span>
    // Fire the currently selected weapon
<span class="nc" id="L48">    FIRE(&quot;fire&quot;, false, KeyEvent.VK_F, 0), // Default: F</span>
<span class="nc" id="L49">    NEXT_WEAPON(&quot;nextWeapon&quot;, false, KeyEvent.VK_E, 0), // Default: E</span>
<span class="nc" id="L50">    PREV_WEAPON(&quot;prevWeapon&quot;, false, KeyEvent.VK_Q, 0), // Default: Q</span>
<span class="nc" id="L51">    NEXT_UNIT(&quot;nextUnit&quot;, false, KeyEvent.VK_E, InputEvent.SHIFT_MASK), // Default: Shift-E</span>
<span class="nc" id="L52">    PREV_UNIT(&quot;prevUnit&quot;, false, KeyEvent.VK_Q, InputEvent.SHIFT_MASK), // Default: Shift-Q</span>
<span class="nc" id="L53">    NEXT_TARGET(&quot;nextTarget&quot;, false, KeyEvent.VK_C, 0), // Default: C</span>
<span class="nc" id="L54">    PREV_TARGET(&quot;prevTarget&quot;, false, KeyEvent.VK_Z, 0), // Default: Z</span>
<span class="nc" id="L55">    NEXT_TARGET_VALID(&quot;nextTargetValid&quot;, false, KeyEvent.VK_C, InputEvent.SHIFT_MASK), // Default: Shift-C</span>
<span class="nc" id="L56">    PREV_TARGET_VALID(&quot;prevTargetValid&quot;, false, KeyEvent.VK_Z, InputEvent.SHIFT_MASK), // Default: Shift-Z</span>
<span class="nc" id="L57">    NEXT_TARGET_NOALLIES(&quot;nextTargetNoAllies&quot;, false, KeyEvent.VK_C, InputEvent.CTRL_MASK), // Default: Ctrl-C</span>
<span class="nc" id="L58">    PREV_TARGET_NOALLIES(&quot;prevTargetNoAllies&quot;, false, KeyEvent.VK_Z, InputEvent.CTRL_MASK), // Default: Ctrl-Z</span>
<span class="nc" id="L59">    NEXT_TARGET_VALID_NO_ALLIES(&quot;nextTargetValidNoAllies&quot;, false, KeyEvent.VK_C, InputEvent.CTRL_MASK &amp; InputEvent.SHIFT_MASK), // Default: Ctrl-Shift-C</span>
<span class="nc" id="L60">    PREV_TARGET_VALID_NO_ALLIES(&quot;prevTargetValidNoAllies&quot;, false, KeyEvent.VK_Z, InputEvent.CTRL_MASK &amp; InputEvent.SHIFT_MASK), // Default: Ctrl-Shift-Z</span>
    // Undo an action, such as a move step in the movement phase
<span class="nc" id="L62">    UNDO(&quot;undo&quot;,false, KeyEvent.VK_BACK_SPACE, 0), // Default: Backspace</span>
<span class="nc" id="L63">    MOVE_ENVELOPE(&quot;movementEnvelope&quot;,false, KeyEvent.VK_R, 0), // Default: R</span>
<span class="nc" id="L64">    CENTER_ON_SELECTED(&quot;centerOnSelected&quot;,false, KeyEvent.VK_SPACE, 0), // Default: Space</span>
<span class="nc" id="L65">    AUTO_ARTY_DEPLOYMENT_ZONE(&quot;autoArtyDeployZone&quot;,false, KeyEvent.VK_Z, InputEvent.SHIFT_MASK), // Default: Shift-Z</span>
<span class="nc" id="L66">    FIELD_FIRE(&quot;fieldOfFire&quot;,false, KeyEvent.VK_R, InputEvent.SHIFT_MASK), // Default: Shift-R</span>
    // Used to cancel moves/fires/chatterbox
<span class="nc" id="L68">    CANCEL(&quot;cancel&quot;, false, KeyEvent.VK_ESCAPE, 0, true), // Default: Escape</span>
<span class="nc" id="L69">    DONE(&quot;done&quot;, false, KeyEvent.VK_ENTER, InputEvent.CTRL_MASK, true), // Default: Ctrl-Enter</span>
    // Used to select the tab in the unit display
<span class="nc" id="L71">    UD_GENERAL(&quot;udGeneral&quot;, false, KeyEvent.VK_F1, 0), // Default: F1</span>
<span class="nc" id="L72">    UD_PILOT(&quot;udPilot&quot;, false, KeyEvent.VK_F2, 0), // Default: F2</span>
<span class="nc" id="L73">    UD_ARMOR(&quot;udArmor&quot;, false, KeyEvent.VK_F3, 0), // Default: F3</span>
<span class="nc" id="L74">    UD_SYSTEMS(&quot;udSystems&quot;, false, KeyEvent.VK_F4, 0), // Default: F4</span>
<span class="nc" id="L75">    UD_WEAPONS(&quot;udWeapons&quot;, false, KeyEvent.VK_F5, 0), // Default: F5</span>
<span class="nc" id="L76">    UD_EXTRAS(&quot;udExtras&quot;, false, KeyEvent.VK_F6, 0), // Default: F6</span>
    /** Toggles between Jumping and Walk/Run, also acts as a reset when a unit cannot jump */
<span class="nc" id="L78">    TOGGLE_MOVEMODE(&quot;toggleJump&quot;, false, KeyEvent.VK_J, 0), // Default: J</span>
<span class="nc" id="L79">    TOGGLE_CONVERSIONMODE(&quot;toggleConversion&quot;, false, KeyEvent.VK_M, 0), // Default: M</span>
<span class="nc" id="L80">    PREV_MODE(&quot;prevMode&quot;, false, KeyEvent.VK_TAB, InputEvent.CTRL_MASK), // Default: Tab</span>
<span class="nc" id="L81">    NEXT_MODE(&quot;nextMode&quot;, false, KeyEvent.VK_TAB, 0), // Default: Tab</span>
<span class="nc" id="L82">    TOGGLE_DRAW_LABELS(&quot;toggleDrawLabels&quot;, false, KeyEvent.VK_Y, 0), // Default: Y</span>
<span class="nc" id="L83">    TOGGLE_KEYBIND_DISPLAY(&quot;toggleKeyBindDisplay&quot;, false, KeyEvent.VK_K, InputEvent.CTRL_MASK), // Default: Ctrl-K</span>
<span class="nc" id="L84">    TOGGLE_HEX_COORDS(&quot;toggleHexCoords&quot;, false, KeyEvent.VK_G, InputEvent.CTRL_MASK); // Default: Ctrl-G</span>


    /**
     * The command associated with this binding.
     */
    public String cmd;
    
    /**
     * Defines the keycode for the command. This should correspond to defines in
     * &lt;code&gt;KeyEvent&lt;/code&gt;.
     */
    public int key;
    
    /**
     * Defines any modifiers to the key code, such as whether control or alt 
     * are pressed.  This should correspond to the modifiers defined in 
     * &lt;code&gt;KeyEvent&lt;/code&gt;.
     */
    public int modifiers;
    
    /**
     * Defines if an action is exclusive, which means that only one
     * CommandAction will be performed for each key press.  The CommandAction
     * that is performed will be the first one encountered.
     */
<span class="nc" id="L110">    public boolean isExclusive = false;</span>

    /**
     * A flag that determines whether this binding is repeatable.  If a bind is
     * repeatable then when the key is pressed the action will be added to a 
     * timer and will be repeated until the key is released.
     */
    public boolean isRepeatable;
    
<span class="nc" id="L119">    private KeyCommandBind(String c, boolean r, int k, int m){</span>
<span class="nc" id="L120">        cmd = c;</span>
<span class="nc" id="L121">        key = k;</span>
<span class="nc" id="L122">        modifiers = m;</span>
<span class="nc" id="L123">        isRepeatable = r;</span>
<span class="nc" id="L124">    }</span>
    
<span class="nc" id="L126">    private KeyCommandBind(String c, boolean r, int k, int m, boolean e){</span>
<span class="nc" id="L127">        cmd = c;</span>
<span class="nc" id="L128">        key = k;</span>
<span class="nc" id="L129">        modifiers = m;</span>
<span class="nc" id="L130">        isRepeatable = r;</span>
<span class="nc" id="L131">        isExclusive = e;</span>
<span class="nc" id="L132">    }</span>

    public static ArrayList&lt;KeyCommandBind&gt; getBindByKey(int keycode, int modifiers){
<span class="nc" id="L135">        ArrayList&lt;KeyCommandBind&gt; binds = new ArrayList&lt;KeyCommandBind&gt;();</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">        for (KeyCommandBind bind : values()){</span>
<span class="nc bnc" id="L137" title="All 4 branches missed.">            if (bind.key == keycode &amp;&amp; bind.modifiers == modifiers){</span>
<span class="nc" id="L138">                binds.add(bind);</span>
            }
        }
<span class="nc" id="L141">        return binds;</span>
    }
    
    public static KeyCommandBind getBindByCmd(String cmd){
<span class="nc bnc" id="L145" title="All 2 branches missed.">        for (KeyCommandBind bind : values()){</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">            if (bind.cmd.equals(cmd)){</span>
<span class="nc" id="L147">                return bind;</span>
            }
        }
<span class="nc" id="L150">        return null;</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>