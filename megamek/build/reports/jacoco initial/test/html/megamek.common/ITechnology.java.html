<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ITechnology.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.common</a> &gt; <span class="el_source">ITechnology.java</span></div><h1>ITechnology.java</h1><pre class="source lang-java linenums">/*
* MegaMek -
* Copyright (C) 2017 The MegaMek Team
*
* This program is free software; you can redistribute it and/or modify it under
* the terms of the GNU General Public License as published by the Free Software
* Foundation; either version 2 of the License, or (at your option) any later
* version.
*
* This program is distributed in the hope that it will be useful, but WITHOUT
* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
* FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
* details.
*/

package megamek.common;

/**
 * Implemented by any class that is subject to tech advancement (entities, equipment, systems, etc.)
 *
 * @author Neoancient
 *
 */
public interface ITechnology {

    public static final int TECH_BASE_ALL  = 0;
    public static final int TECH_BASE_IS   = 1;
    public static final int TECH_BASE_CLAN = 2;

    public static final int RATING_A = 0;
    public static final int RATING_B = 1;
    public static final int RATING_C = 2;
    public static final int RATING_D = 3;
    public static final int RATING_E = 4;
    public static final int RATING_F = 5;
    public static final int RATING_FSTAR = 6; // Increasing F (Clan equipmment for IS or extinct equipment
                                              // during SW era has a 50% chance of being X, denoted by F*.
    public static final int RATING_X = 7;

<span class="fc" id="L40">    public static final String[] ratingNames = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;F*&quot;,</span>
    &quot;X&quot; };

    public static final int ERA_SL   = 0;
    public static final int ERA_SW   = 1;
    public static final int ERA_CLAN = 2;
    public static final int ERA_DA   = 3;
    public static final int ERA_NUM  = 4;

    public static final int DATE_NONE = -1;
    public static final int DATE_PS = 1950;
    public static final int DATE_ES = 2100;

    //codes for recording which factions had access to technology at various points
    public static final int F_NONE = -1; // Indicates that factions should be ignored when calculating tech level.
    public static final int F_IS = 0;
    public static final int F_CC = 1;
    public static final int F_CF = 2;
    public static final int F_CP = 3;
    public static final int F_CS = 4;
    public static final int F_DC = 5;
    public static final int F_EI = 6;
    public static final int F_FC = 7;
    public static final int F_FR = 8;
    public static final int F_FS = 9;
    public static final int F_FW = 10;
    public static final int F_LC = 11;
    public static final int F_MC = 12;
    public static final int F_MH = 13;
    public static final int F_OA = 14;
    public static final int F_TA = 15;
    public static final int F_TC = 16;
    public static final int F_TH = 17;
    public static final int F_RD = 18;
    public static final int F_RS = 19;
    public static final int F_RA = 20;
    public static final int F_RW = 21;
    public static final int F_WB = 22;
    public static final int F_MERC = 23;
    public static final int F_PER = 24;
    public static final int F_CLAN = 25;
    public static final int F_CBR = 26;
    public static final int F_CBS = 27;
    public static final int F_CCY = 28;
    public static final int F_CCC = 29;
    public static final int F_CFM = 30;
    public static final int F_CGB = 31;
    public static final int F_CGS = 32;
    public static final int F_CHH = 33;
    public static final int F_CIH = 34;
    public static final int F_CJF = 35;
    public static final int F_CMN = 36;
    public static final int F_CNC = 37;
    public static final int F_CSF = 38;
    public static final int F_CSJ = 39;
    public static final int F_CSR = 40;
    public static final int F_CSV = 41;
    public static final int F_CSA = 42;
    public static final int F_CWM = 43;
    public static final int F_CWF = 44;
    public static final int F_CWX = 45;
    public static final int F_CWV = 46;

    //display codes using values from IOps
<span class="fc" id="L104">    public static final String[] IO_FACTION_CODES = {</span>
            &quot;IS&quot;, &quot;CC&quot;, &quot;CF&quot;, &quot;CP&quot;, &quot;CS&quot;, &quot;DC&quot;, &quot;EI&quot;, &quot;FC&quot;, &quot;FR&quot;, &quot;FS&quot;, &quot;FW&quot;, &quot;LC&quot;, &quot;MC&quot;,
            &quot;MH&quot;, &quot;OA&quot;, &quot;TA&quot;, &quot;TC&quot;, &quot;TH&quot;, &quot;RD&quot;, &quot;RS&quot;, &quot;RA&quot;, &quot;RW&quot;, &quot;WB&quot;, &quot;Merc&quot;, &quot;Per&quot;,
            &quot;Clan&quot;, &quot;CBR&quot;, &quot;CBS&quot;, &quot;CCY&quot;, &quot;CCC&quot;, &quot;CFM&quot;, &quot;CGB&quot;, &quot;CGS&quot;, &quot;CHH&quot;, &quot;CIH&quot;, &quot;CJF&quot;, &quot;CMN&quot;,
            &quot;CNC&quot;, &quot;CSF&quot;, &quot;CSJ&quot;, &quot;CSR&quot;, &quot;CSV&quot;, &quot;CSA&quot;, &quot;CWM&quot;, &quot;CWF&quot;, &quot;CWX&quot;, &quot;CWV&quot;
    };

    //faction lookup names for MHQ
<span class="fc" id="L112">    public static final String[] MM_FACTION_CODES = {</span>
            &quot;IS&quot;, &quot;CC&quot;, &quot;CIR&quot;, &quot;CDP&quot;, &quot;CS&quot;, &quot;DC&quot;, &quot;CEI&quot;, &quot;FC&quot;, &quot;FRR&quot;, &quot;FS&quot;, &quot;FWL&quot;, &quot;LA&quot;, &quot;MOC&quot;,
            &quot;MH&quot;, &quot;OA&quot;, &quot;TA&quot;, &quot;TC&quot;, &quot;TH&quot;, &quot;RD&quot;, &quot;ROS&quot;, &quot;RA&quot;, &quot;RWR&quot;, &quot;WOB&quot;, &quot;MERC&quot;, &quot;Periphery&quot;,
            &quot;CLAN&quot;, &quot;CB&quot;, &quot;CBS&quot;, &quot;CCO&quot;, &quot;CCC&quot;, &quot;CFM&quot;, &quot;CGB&quot;, &quot;CGS&quot;, &quot;CHH&quot;, &quot;CIH&quot;, &quot;CJF&quot;, &quot;CMG&quot;,
            &quot;CNC&quot;, &quot;CDS&quot;, &quot;CSJ&quot;, &quot;CSR&quot;, &quot;CSV&quot;, &quot;CSA&quot;, &quot;CWI&quot;, &quot;CW&quot;, &quot;CWIE&quot;, &quot;CWOV&quot;,
    };

    boolean isClan();
    boolean isMixedTech();
    int getTechBase();

    int getIntroductionDate();
    int getPrototypeDate();
    int getProductionDate();
    int getCommonDate();
    int getExtinctionDate();
    int getReintroductionDate();

    int getTechRating();
    int getBaseAvailability(int era);

    default int getIntroductionDate(boolean clan) {
<span class="nc" id="L134">        return getIntroductionDate();</span>
    }
    int getIntroductionDate(boolean clan, int faction);
    default int getPrototypeDate(boolean clan) {
<span class="nc" id="L138">        return getPrototypeDate();</span>
    }
    int getPrototypeDate(boolean clan, int faction);
    default int getProductionDate(boolean clan) {
<span class="nc" id="L142">        return getProductionDate();</span>
    }
    int getProductionDate(boolean clan, int faction);
    default int getCommonDate(boolean clan) {
<span class="fc" id="L146">        return getCommonDate();</span>
    }
    int getExtinctionDate(boolean clan, int faction);
    default int getExtinctionDate(boolean clan) {
<span class="nc" id="L150">        return getExtinctionDate();</span>
    }
    int getReintroductionDate(boolean clan, int faction);
    default int getReintroductionDate(boolean clan) {
<span class="nc" id="L154">        return getReintroductionDate();</span>
    }

    public static int getTechEra(int year) {
<span class="fc bfc" id="L158" title="All 2 branches covered.">        if (year &lt; 2780) {</span>
<span class="fc" id="L159">            return ERA_SL;</span>
<span class="pc bpc" id="L160" title="1 of 2 branches missed.">        } else if (year &lt; 3050) {</span>
<span class="fc" id="L161">            return ERA_SW;</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">        } else if (year &lt; 3130) {</span>
<span class="nc" id="L163">            return ERA_CLAN;</span>
        } else {
<span class="nc" id="L165">            return ERA_DA;</span>
        }
    }

    default int getTechLevel(int year, boolean clan) {
<span class="fc" id="L170">        return getSimpleLevel(year, clan).getCompoundTechLevel(clan);</span>
    }

    default int getTechLevel(int year) {
<span class="fc" id="L174">        return getTechLevel(year, isClan());</span>
    }

    default SimpleTechLevel getSimpleLevel(int year) {
<span class="nc bnc" id="L178" title="All 2 branches missed.">        if (getSimpleLevel(year, true).compareTo(getSimpleLevel(year, false)) &lt; 0) {</span>
<span class="nc" id="L179">            return getSimpleLevel(year, true);</span>
        }
<span class="nc" id="L181">        return getSimpleLevel(year, false);</span>
    }

    default SimpleTechLevel getSimpleLevel(int year, boolean clan) {
<span class="fc" id="L185">        return getSimpleLevel(year, clan, F_NONE);</span>
    }

    default SimpleTechLevel getSimpleLevel(int year, boolean clan, int faction) {
<span class="pc bpc" id="L189" title="1 of 2 branches missed.">        if (isUnofficial()) {</span>
<span class="nc" id="L190">            return SimpleTechLevel.UNOFFICIAL;</span>
<span class="pc bpc" id="L191" title="1 of 4 branches missed.">        } else if (year &gt;= getCommonDate(clan) &amp;&amp; getCommonDate(clan) != DATE_NONE) {</span>
<span class="fc bfc" id="L192" title="All 2 branches covered.">            if (isIntroLevel()) {</span>
<span class="fc" id="L193">                return SimpleTechLevel.INTRO;</span>
            } else {
<span class="fc" id="L195">                return SimpleTechLevel.STANDARD;</span>
            }
<span class="pc bpc" id="L197" title="2 of 4 branches missed.">        } else if (year &gt;= getProductionDate(clan, faction) &amp;&amp; getProductionDate(clan, faction) != DATE_NONE) {</span>
<span class="fc" id="L198">            return SimpleTechLevel.ADVANCED;</span>
<span class="nc bnc" id="L199" title="All 4 branches missed.">        } else if (year &gt;= getPrototypeDate(clan, faction) &amp;&amp; getPrototypeDate(clan, faction) != DATE_NONE) {</span>
<span class="nc" id="L200">            return SimpleTechLevel.EXPERIMENTAL;</span>
        } else {
<span class="nc" id="L202">            return SimpleTechLevel.UNOFFICIAL;</span>
        }
    }

    /**
     * For non-era-based usage, provide a single tech level that does not vary with date.
     *
     * @return The base rules level of the equipment or unit.
     */
    SimpleTechLevel getStaticTechLevel();

    default boolean isIntroLevel() {
<span class="fc bfc" id="L214" title="All 2 branches covered.">        return getStaticTechLevel() == SimpleTechLevel.INTRO;</span>
    }

    default boolean isUnofficial() {
<span class="pc bpc" id="L218" title="1 of 2 branches missed.">        return getStaticTechLevel() == SimpleTechLevel.UNOFFICIAL;</span>
    }


    /**
     * Finds the lowest rules level the equipment qualifies for, for either IS or Clan faction
     * using it.
     *
     * @param clan - whether tech level is being calculated for a Clan faction
     * @return - the lowest tech level available to the item
     */
    default SimpleTechLevel findMinimumRulesLevel(boolean clan) {
<span class="nc bnc" id="L230" title="All 2 branches missed.">        if (getCommonDate(clan) != DATE_NONE) {</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">            return (getStaticTechLevel() == SimpleTechLevel.INTRO)?</span>
<span class="nc" id="L232">                    SimpleTechLevel.INTRO : SimpleTechLevel.STANDARD;</span>
        }
<span class="nc bnc" id="L234" title="All 2 branches missed.">        if (getProductionDate(clan) != DATE_NONE) {</span>
<span class="nc" id="L235">            return SimpleTechLevel.ADVANCED;</span>
        }
<span class="nc bnc" id="L237" title="All 2 branches missed.">        if (getPrototypeDate(clan) != DATE_NONE) {</span>
<span class="nc" id="L238">            return SimpleTechLevel.EXPERIMENTAL;</span>
        }
<span class="nc" id="L240">        return SimpleTechLevel.UNOFFICIAL;</span>
    }

    /**
     * Finds the lowest rules level the equipment qualifies for regardless of faction using it.
     *
     * @return - the lowest tech level available to the item
     */
    default SimpleTechLevel findMinimumRulesLevel() {
<span class="nc bnc" id="L249" title="All 2 branches missed.">        if (getCommonDate() != DATE_NONE) {</span>
<span class="nc bnc" id="L250" title="All 2 branches missed.">            return (getStaticTechLevel() == SimpleTechLevel.INTRO)?</span>
<span class="nc" id="L251">                    SimpleTechLevel.INTRO : SimpleTechLevel.STANDARD;</span>
        }
<span class="nc bnc" id="L253" title="All 2 branches missed.">        if (getProductionDate() != DATE_NONE) {</span>
<span class="nc" id="L254">            return SimpleTechLevel.ADVANCED;</span>
        }
<span class="nc bnc" id="L256" title="All 2 branches missed.">        if (getPrototypeDate() != DATE_NONE) {</span>
<span class="nc" id="L257">            return SimpleTechLevel.EXPERIMENTAL;</span>
        }
<span class="nc" id="L259">        return SimpleTechLevel.UNOFFICIAL;</span>
    }

    default boolean isExtinct(int year, boolean clan) {
<span class="pc bpc" id="L263" title="1 of 2 branches missed.">        return getExtinctionDate(clan) != DATE_NONE</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">                &amp;&amp; getExtinctionDate(clan) &lt; year</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">                &amp;&amp; (getReintroductionDate(clan) == DATE_NONE</span>
<span class="pc bnc" id="L266" title="All 2 branches missed.">                || year &lt; getReintroductionDate(clan));</span>
    }

    default boolean isExtinct(int year, boolean clan, int faction) {
        // Tech that is lost but later recovered in the IS is not lost to ComStar.
<span class="nc bnc" id="L271" title="All 4 branches missed.">        if ((F_CS == faction) &amp;&amp; (getReintroductionDate(false) != DATE_NONE)) {</span>
<span class="nc" id="L272">            return false;</span>
        }
<span class="nc bnc" id="L274" title="All 2 branches missed.">        return getExtinctionDate(clan) != DATE_NONE</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">                &amp;&amp; getExtinctionDate(clan) &lt; year</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">                &amp;&amp; (getReintroductionDate(clan) == DATE_NONE</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">                || year &lt; getReintroductionDate(clan, faction));</span>
    }

    default boolean isExtinct(int year) {
<span class="nc bnc" id="L281" title="All 2 branches missed.">        return getExtinctionDate() != DATE_NONE</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">                &amp;&amp; getExtinctionDate() &lt; year</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">                &amp;&amp; (getReintroductionDate() == DATE_NONE</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">                || year &lt; getReintroductionDate());</span>
    }

    default boolean isAvailableIn(int year, boolean clan) {
<span class="pc bpc" id="L288" title="3 of 6 branches missed.">        return year &gt;= getIntroductionDate(clan) &amp;&amp; getIntroductionDate(clan) != DATE_NONE  &amp;&amp; !isExtinct(year, clan);</span>
    }

    default boolean isAvailableIn(int year) {
<span class="nc bnc" id="L292" title="All 6 branches missed.">        return year &gt;= getIntroductionDate() &amp;&amp; getIntroductionDate() != DATE_NONE &amp;&amp; !isExtinct(year);</span>
    }

    default boolean isAvailableIn(int year, boolean clan, int faction) {
<span class="nc bnc" id="L296" title="All 2 branches missed.">        return year &gt;= getIntroductionDate(clan, faction)</span>
<span class="nc bnc" id="L297" title="All 4 branches missed.">                &amp;&amp; getIntroductionDate(clan, faction) != DATE_NONE  &amp;&amp; !isExtinct(year, clan, faction);</span>
    }

    default boolean isLegal(int year, int techLevel, boolean mixedTech) {
<span class="fc" id="L301">        return isLegal(year, SimpleTechLevel.convertCompoundToSimple(techLevel),</span>
<span class="fc" id="L302">                TechConstants.isClan(techLevel), mixedTech);</span>
    }

    default boolean isLegal(int year, SimpleTechLevel simpleRulesLevel, boolean clanBase, boolean mixedTech) {
<span class="pc bpc" id="L306" title="1 of 2 branches missed.">        if (mixedTech) {</span>
<span class="nc bnc" id="L307" title="All 2 branches missed.">            if (!isAvailableIn(year)) {</span>
<span class="nc" id="L308">                return false;</span>
            } else {
<span class="nc bnc" id="L310" title="All 2 branches missed.">                return getSimpleLevel(year).ordinal() &lt;= simpleRulesLevel.ordinal();</span>
            }
        } else {
<span class="pc bpc" id="L313" title="1 of 2 branches missed.">            if (getTechBase() != TECH_BASE_ALL</span>
<span class="pc bpc" id="L314" title="1 of 2 branches missed.">                    &amp;&amp; clanBase != isClan()) {</span>
<span class="nc" id="L315">                return false;</span>
            }
<span class="pc bpc" id="L317" title="1 of 2 branches missed.">            if (!isAvailableIn(year, clanBase)) {</span>
<span class="nc" id="L318">                return false;</span>
            }
<span class="pc bpc" id="L320" title="1 of 2 branches missed.">            return getSimpleLevel(year, clanBase).ordinal() &lt;= simpleRulesLevel.ordinal();</span>
        }
    }

    /**
     * Adjusts availability for certain combinations of era and IS/Clan use
     * @param era - one of the four tech eras
     * @param clanUse - whether the faction trying to obtain the tech is IS or Clan
     * @return - the adjusted availability code
     */
    default int calcEraAvailability(int era, boolean clanUse) {
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (clanUse) {</span>
<span class="nc bnc" id="L332" title="All 4 branches missed.">            if (!isClan()</span>
                    &amp;&amp; era &lt; ERA_CLAN
<span class="nc bnc" id="L334" title="All 2 branches missed.">                    &amp;&amp; getPrototypeDate(false) &gt;= 2780) {</span>
<span class="nc" id="L335">                return ITechnology.RATING_X;</span>
            } else {
<span class="nc" id="L337">                return getBaseAvailability(era);</span>
            }
        } else {
<span class="nc bnc" id="L340" title="All 2 branches missed.">            if (isClan()) {</span>
<span class="nc bnc" id="L341" title="All 2 branches missed.">                if (era &lt; ERA_CLAN) {</span>
<span class="nc" id="L342">                    return ITechnology.RATING_X;</span>
                } else {
<span class="nc" id="L344">                    return Math.min(ITechnology.RATING_X, getBaseAvailability(era) + 1);</span>
                }
            } else {
<span class="nc" id="L347">                return getBaseAvailability(era);</span>
            }
        }
    }

    default int calcYearAvailability(int year, boolean clanUse) {
<span class="nc" id="L353">        return calcYearAvailability(year, clanUse, -1);</span>
    }

    default int calcYearAvailability(int year, boolean clanUse, int faction) {
<span class="nc bnc" id="L357" title="All 8 branches missed.">        if (!clanUse &amp;&amp; !isClan() &amp;&amp; (faction != F_CS) &amp;&amp; (getTechEra(year) == ERA_SW)</span>
<span class="nc bnc" id="L358" title="All 2 branches missed.">                &amp;&amp; (getBaseAvailability(ERA_SW) &gt;= RATING_E)</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">                &amp;&amp; (getExtinctionDate(false) != DATE_NONE)</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">                &amp;&amp; (getExtinctionDate(false) &lt;= year)</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">                &amp;&amp; ((getReintroductionDate(false) == DATE_NONE)</span>
<span class="nc bnc" id="L362" title="All 2 branches missed.">                        || (getReintroductionDate() &gt; year))) {</span>
<span class="nc" id="L363">            return Math.min(getBaseAvailability(ERA_SW) + 1, RATING_X);</span>
        }
<span class="nc" id="L365">        return calcEraAvailability(getTechEra(year), clanUse);</span>
    }

    /**
     * Adjusts base availability code for IS/Clan and IS extinction
     *
     * @param era - one of the ERA_* constants from EquipmentType
     * @param clanUse - whether this should be calculated for a Clan faction rather than IS
     * @return - The availability code for the faction in the era. The code for an IS faction
     *           during the SW era may be two values indicating availability before and after
     *           the extinction date.
     */
    default String getEraAvailabilityName(int era, boolean clanUse) {
<span class="nc bnc" id="L378" title="All 6 branches missed.">        if (!clanUse &amp;&amp; !isClan() &amp;&amp; era == ERA_SW</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">                &amp;&amp; getBaseAvailability(ERA_SW) &gt;= RATING_E</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">                &amp;&amp; getBaseAvailability(ERA_SW) &lt; RATING_X</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">                &amp;&amp; getExtinctionDate(false) != DATE_NONE</span>
<span class="nc bnc" id="L382" title="All 2 branches missed.">                &amp;&amp; getTechEra(getExtinctionDate(false)) == ERA_SW) {</span>
<span class="nc" id="L383">            return getRatingName(getBaseAvailability(ERA_SW))</span>
<span class="nc" id="L384">                    + &quot;(&quot; + getRatingName(getBaseAvailability(ERA_SW) + 1) + &quot;)&quot;;</span>
        }
<span class="nc" id="L386">        return getRatingName(calcEraAvailability(era, clanUse));</span>
    }

    default String getTechRatingName() {
<span class="nc" id="L390">        return getRatingName(getTechRating());</span>
    }

    default String getEraAvailabilityName(int era) {
<span class="nc" id="L394">        return getEraAvailabilityName(era, isClan());</span>
    }

    default String getFullRatingName(boolean clanUse) {
<span class="nc" id="L398">        String rating = getRatingName(getTechRating());</span>
<span class="nc" id="L399">        rating += &quot;/&quot;;</span>
<span class="nc" id="L400">        rating += getEraAvailabilityName(ERA_SL, clanUse);</span>
<span class="nc" id="L401">        rating += &quot;-&quot;;</span>
<span class="nc" id="L402">        rating += getEraAvailabilityName(ERA_SW, clanUse);</span>
<span class="nc" id="L403">        rating += &quot;-&quot;;</span>
<span class="nc" id="L404">        rating += getEraAvailabilityName(ERA_CLAN, clanUse);</span>
<span class="nc" id="L405">        rating += &quot;-&quot;;</span>
<span class="nc" id="L406">        rating += getEraAvailabilityName(ERA_DA, clanUse);</span>
<span class="nc" id="L407">        return rating;</span>
    }

    default String getFullRatingName() {
<span class="nc" id="L411">        return getFullRatingName(isClan());</span>
    }

    default int calcEraAvailability(int era) {
<span class="nc" id="L415">        return calcEraAvailability(era, isClan());</span>
    }

    default int calcYearAvailability(int year) {
<span class="nc" id="L419">        return calcYearAvailability(year, isClan());</span>
    }

    public static String getRatingName(int rating) {
<span class="nc bnc" id="L423" title="All 4 branches missed.">        if ((rating &lt; 0) || (rating &gt;= ratingNames.length)) {</span>
<span class="nc" id="L424">            return &quot;U&quot;;</span>
        }
<span class="nc" id="L426">        return ratingNames[rating];</span>
    }

    public static String getDateRange(int startIncl, int endNonIncl) {
<span class="nc bnc" id="L430" title="All 2 branches missed.">        if (startIncl == DATE_NONE) {</span>
<span class="nc" id="L431">            return &quot;-&quot;;</span>
        }
<span class="nc" id="L433">        StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L434">        sb.append(startIncl);</span>
<span class="nc bnc" id="L435" title="All 2 branches missed.">        if (endNonIncl == DATE_NONE) {</span>
<span class="nc" id="L436">            sb.append(&quot;+&quot;);</span>
<span class="nc bnc" id="L437" title="All 2 branches missed.">        } else if (endNonIncl &gt; startIncl + 1) {</span>
<span class="nc" id="L438">            sb.append(&quot;-&quot;).append(endNonIncl - 1);</span>
        }
<span class="nc" id="L440">        return sb.toString();</span>
    }

    default String getExperimentalRange(boolean clan) {
<span class="nc" id="L444">        return getDateRange(getPrototypeDate(clan), getProductionDate(clan));</span>
    }
    default String getAdvancedRange(boolean clan) {
<span class="nc" id="L447">        return getDateRange(getProductionDate(clan), getCommonDate(clan));</span>
    }
    default String getStandardRange(boolean clan) {
<span class="nc" id="L450">        return getDateRange(getCommonDate(clan), DATE_NONE);</span>
    }
    default String getExtinctionRange(boolean clan) {
<span class="nc" id="L453">        return getDateRange(getExtinctionDate(clan), getReintroductionDate(clan));</span>
    }

    default String getExperimentalRange() {
<span class="nc" id="L457">        return getDateRange(getPrototypeDate(), getProductionDate());</span>
    }
    default String getAdvancedRange() {
<span class="nc" id="L460">        return getDateRange(getProductionDate(), getCommonDate());</span>
    }
    default String getStandardRange() {
<span class="nc" id="L463">        return getDateRange(getCommonDate(), DATE_NONE);</span>
    }
    default String getExtinctionRange() {
<span class="nc" id="L466">        return getDateRange(getExtinctionDate(), getReintroductionDate());</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>