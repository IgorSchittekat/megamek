<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CachedEntityState.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">megamek</a> &gt; <a href="index.source.html" class="el_package">megamek.common.pathfinder</a> &gt; <span class="el_source">CachedEntityState.java</span></div><h1>CachedEntityState.java</h1><pre class="source lang-java linenums">package megamek.common.pathfinder;

import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;

import megamek.common.Entity;
import megamek.common.Mech;
import megamek.common.MiscType;

/**
 * A transient class used to lazy-load &quot;calculated&quot; information from an entity
 * 
 */
public class CachedEntityState {
    private Entity backingEntity;
    
    private Integer walkMP;
    private Integer runMP;
    private Integer runMPWithoutMasc;
    private Integer runMPNoGravity;
    private Integer sprintMP;
    private Integer sprintMPWithoutMasc;
    private Integer jumpMP;
    private Integer jumpMPWithTerrain;
    private Map&lt;BigInteger, Boolean&gt; hasWorkingMisc;
    private Integer torsoJumpJets;
    private Integer jumpMPNoGravity;
    
<span class="fc" id="L30">    public CachedEntityState(Entity entity) {</span>
<span class="fc" id="L31">        backingEntity = entity;</span>
<span class="fc" id="L32">        hasWorkingMisc = new HashMap&lt;&gt;();</span>
<span class="fc" id="L33">    }</span>
    
    public int getWalkMP() {
<span class="nc bnc" id="L36" title="All 2 branches missed.">        if(walkMP == null) {</span>
<span class="nc" id="L37">            walkMP = backingEntity.getWalkMP();</span>
        }
        
<span class="nc" id="L40">        return walkMP;</span>
    }
    
    public int getRunMP() {
<span class="nc bnc" id="L44" title="All 2 branches missed.">        if(runMP == null) {</span>
<span class="nc" id="L45">            runMP = backingEntity.getRunMP();</span>
        }
        
<span class="nc" id="L48">        return runMP;</span>
    }
    
    public int getRunMPwithoutMASC() {
<span class="nc bnc" id="L52" title="All 2 branches missed.">        if(runMPWithoutMasc == null) {</span>
<span class="nc" id="L53">            runMPWithoutMasc = backingEntity.getRunMPwithoutMASC();</span>
        }
        
<span class="nc" id="L56">        return runMPWithoutMasc;</span>
    }
    
    public int getSprintMP() {
<span class="nc bnc" id="L60" title="All 2 branches missed.">        if(sprintMP == null) {</span>
<span class="nc" id="L61">            sprintMP = backingEntity.getSprintMP();</span>
        }
        
<span class="nc" id="L64">        return sprintMP;</span>
    }
    
    public int getSprintMPwithoutMASC() {
<span class="nc bnc" id="L68" title="All 2 branches missed.">        if(sprintMPWithoutMasc == null) {</span>
<span class="nc" id="L69">            sprintMPWithoutMasc = backingEntity.getSprintMPwithoutMASC();</span>
        }
        
<span class="nc" id="L72">        return sprintMPWithoutMasc;</span>
    }
    
    public int getJumpMP() {
<span class="nc bnc" id="L76" title="All 2 branches missed.">        if(jumpMP == null) {</span>
<span class="nc" id="L77">            jumpMP = backingEntity.getJumpMP();</span>
        }
        
<span class="nc" id="L80">        return jumpMP;</span>
    }
    
    public int getJumpMPWithTerrain() {
<span class="nc bnc" id="L84" title="All 2 branches missed.">        if(jumpMPWithTerrain == null) {</span>
<span class="nc" id="L85">            jumpMPWithTerrain = backingEntity.getJumpMPWithTerrain();</span>
        }
        
<span class="nc" id="L88">        return jumpMPWithTerrain;</span>
    }
    
    public boolean hasWorkingMisc(BigInteger flag) {
<span class="nc bnc" id="L92" title="All 2 branches missed.">        if(!hasWorkingMisc.containsKey(flag)) {</span>
<span class="nc" id="L93">            hasWorkingMisc.put(flag, backingEntity.hasWorkingMisc(flag));</span>
        }
        
<span class="nc" id="L96">        return hasWorkingMisc.get(flag);</span>
    }
    
    public int getTorsoJumpJets() {
<span class="nc bnc" id="L100" title="All 2 branches missed.">        if(torsoJumpJets == null) {</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">            if(backingEntity instanceof Mech) {</span>
<span class="nc" id="L102">                torsoJumpJets = ((Mech) backingEntity).torsoJumpJets();</span>
            } else {
<span class="nc" id="L104">                torsoJumpJets = 0;</span>
            }
        }
        
<span class="nc" id="L108">        return torsoJumpJets;</span>
    }
    
    public int getJumpMPNoGravity() {
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if (jumpMPNoGravity == null) {</span>
<span class="nc" id="L113">            jumpMPNoGravity = backingEntity.getJumpMP(false);</span>
        }
        
<span class="nc" id="L116">        return jumpMPNoGravity;</span>
    }
    
    public int getRunMPNoGravity() {
<span class="nc bnc" id="L120" title="All 2 branches missed.">        if (runMPNoGravity == null) {</span>
<span class="nc" id="L121">            runMPNoGravity = backingEntity.getRunningGravityLimit();</span>
        }
        
<span class="nc" id="L124">        return runMPNoGravity;</span>
    }
    
    /**
     * Convenience property to determine if the backing entity is amphibious.
     */
    public boolean isAmphibious() {
<span class="nc bnc" id="L131" title="All 2 branches missed.">        return hasWorkingMisc(MiscType.F_FULLY_AMPHIBIOUS) || </span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">                hasWorkingMisc(MiscType.F_AMPHIBIOUS) ||</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">                hasWorkingMisc(MiscType.F_LIMITED_AMPHIBIOUS);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>